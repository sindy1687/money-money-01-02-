<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é ç®—è¨­å®šæ¨¡æ…‹æ¡†èƒŒæ™¯æ¸¬è©¦ - ä¿®å¾©ç‰ˆ</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-container {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .theme-selector {
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
        }
        .theme-btn {
            margin: 5px;
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            background: white;
        }
        .theme-btn:hover {
            background: #f0f0f0;
        }
        .theme-btn.active {
            background: #007bff;
            color: white;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .test-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: var(--color-primary, #007bff);
            color: white;
            font-weight: 600;
        }
        .test-btn:hover {
            background: var(--color-primary-dark, #0056b3);
        }
        .debug-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .direct-test-card {
            margin: 20px 0;
        }
    </style>
</head>
<body data-theme="cuteCats">
    <div class="test-container">
        <h1>é ç®—è¨­å®šæ¨¡æ…‹æ¡†èƒŒæ™¯åœ–ç‰‡æ¸¬è©¦ - ä¿®å¾©ç‰ˆ</h1>
        
        <div class="theme-selector">
            <h3>é¸æ“‡ä¸»é¡Œï¼š</h3>
            <button class="theme-btn active" onclick="switchTheme('cuteCats')">å¯æ„›è²“å’ª</button>
            <button class="theme-btn" onclick="switchTheme('dreamy')">å¤¢å¹»å¢ƒåŸŸ</button>
            <button class="theme-btn" onclick="switchTheme('chick')">èŒé›æ¨‚åœ’</button>
            <button class="theme-btn" onclick="switchTheme('dreamyfish')">å¤¢å¹»é­šèª</button>
            <button class="theme-btn" onclick="switchTheme('emerald')">ç¿ ç¶ ä¹‹å¤¢</button>
            <button class="theme-btn" onclick="switchTheme('meow')">å–µå–µå–µ</button>
        </div>
        
        <div class="test-buttons">
            <button class="test-btn" onclick="showBudgetSettingModal()">é¡¯ç¤ºé ç®—è¨­å®šæ¨¡æ…‹æ¡†</button>
            <button class="test-btn" onclick="showDirectBudgetCard()">é¡¯ç¤ºç›´æ¥é ç®—å¡ç‰‡</button>
            <button class="test-btn" onclick="checkStyles()">æª¢æŸ¥CSSæ¨£å¼</button>
            <button class="test-btn" onclick="checkAllThemes()">æª¢æŸ¥æ‰€æœ‰ä¸»é¡Œ</button>
        </div>
        
        <div class="debug-info">
            <strong>æ¸¬è©¦èªªæ˜ï¼š</strong><br>
            â€¢ é æœŸèƒŒæ™¯åœ–ç‰‡ï¼šhttps://i.pinimg.com/1200x/95/64/99/956499812b93c3c5bf8226051c7e627f.jpg<br>
            â€¢ é»æ“Šã€Œé¡¯ç¤ºé ç®—è¨­å®šæ¨¡æ…‹æ¡†ã€æ¸¬è©¦å¯¦éš›çš„é ç®—è¨­å®šå°è©±æ¡†<br>
            â€¢ é»æ“Šã€Œé¡¯ç¤ºç›´æ¥é ç®—å¡ç‰‡ã€æ¸¬è©¦ç´”CSSæ¨£å¼<br>
            â€¢ é»æ“Šã€Œæª¢æŸ¥CSSæ¨£å¼ã€æŸ¥çœ‹å¯¦éš›æ‡‰ç”¨çš„CSSè¦å‰‡<br>
            â€¢ é»æ“Šã€Œæª¢æŸ¥æ‰€æœ‰ä¸»é¡Œã€æ‰¹é‡æ¸¬è©¦æ‰€æœ‰ä¸»é¡Œ<br>
            â€¢ ç•¶å‰ä¸»é¡Œï¼š<span id="current-theme">cuteCats</span>
        </div>
        
        <div id="direct-test-container" class="direct-test-card"></div>
        <div id="style-output"></div>
    </div>
    
    <!-- æ¨¡æ…‹æ¡†å®¹å™¨ -->
    <div id="modalContainer"></div>
    
    <script>
        function switchTheme(themeId) {
            document.body.setAttribute('data-theme', themeId);
            document.getElementById('current-theme').textContent = themeId;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // å¦‚æœæœ‰ç›´æ¥æ¸¬è©¦å¡ç‰‡ï¼Œé‡æ–°æª¢æŸ¥æ¨£å¼
            const directCard = document.querySelector('.budget-setting-modal-content');
            if (directCard) {
                setTimeout(checkStyles, 100);
            }
        }
        
        function showBudgetSettingModal() {
            // å‰µå»ºé ç®—è¨­å®šæ¨¡æ…‹æ¡† - ç§»é™¤å…§è¯èƒŒæ™¯æ¨£å¼
            const modalHtml = `
                <div class="modal-overlay" onclick="closeModal(event)">
                    <div class="budget-setting-modal-content" onclick="event.stopPropagation()">
                        <h2 style="margin: 0 0 20px 0; font-size: 22px; font-weight: 600; color: var(--text-primary); display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 28px;">ğŸ½ï¸</span>
                            é¤é£² - é ç®—è¨­å®š
                        </h2>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">æœˆåº¦é ç®—é‡‘é¡</label>
                            <input type="number" placeholder="è¼¸å…¥é ç®—é‡‘é¡" style="width: 100%; padding: 12px; border: 2px solid var(--border-light); border-radius: 8px; font-size: 16px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">é ç®—æé†’</label>
                            <select style="width: 100%; padding: 12px; border: 2px solid var(--border-light); border-radius: 8px; font-size: 16px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary);">
                                <option>é”åˆ°80%æ™‚æé†’</option>
                                <option>é”åˆ°90%æ™‚æé†’</option>
                                <option>é”åˆ°100%æ™‚æé†’</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button onclick="closeModal()" style="padding: 10px 20px; border: 1px solid var(--border-light); border-radius: 8px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary); cursor: pointer;">å–æ¶ˆ</button>
                            <button onclick="saveBudget()" style="padding: 10px 20px; border: none; border-radius: 8px; background: var(--color-primary); color: white; cursor: pointer; font-weight: 600;">å„²å­˜</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalContainer').innerHTML = modalHtml;
        }
        
        function showDirectBudgetCard() {
            const container = document.getElementById('direct-test-container');
            container.innerHTML = `
                <h3>ç›´æ¥æ¸¬è©¦ .budget-setting-modal-content é¡åˆ¥ï¼š</h3>
                <div class="budget-setting-modal-content">
                    <h2 style="margin: 0 0 20px 0; font-size: 22px; font-weight: 600; color: var(--text-primary); display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 28px;">ğŸ½ï¸</span>
                        é¤é£² - é ç®—è¨­å®š
                    </h2>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">æœˆåº¦é ç®—é‡‘é¡</label>
                        <input type="number" placeholder="è¼¸å…¥é ç®—é‡‘é¡" value="5000" style="width: 100%; padding: 12px; border: 2px solid var(--border-light); border-radius: 8px; font-size: 16px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary);">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">é ç®—æé†’</label>
                        <select style="width: 100%; padding: 12px; border: 2px solid var(--border-light); border-radius: 8px; font-size: 16px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary);">
                            <option selected>é”åˆ°80%æ™‚æé†’</option>
                            <option>é”åˆ°90%æ™‚æé†’</option>
                            <option>é”åˆ°100%æ™‚æé†’</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button style="padding: 10px 20px; border: 1px solid var(--border-light); border-radius: 8px; background: rgba(255, 255, 255, 0.8); color: var(--text-primary); cursor: pointer;">å–æ¶ˆ</button>
                        <button style="padding: 10px 20px; border: none; border-radius: 8px; background: var(--color-primary); color: white; cursor: pointer; font-weight: 600;">å„²å­˜</button>
                    </div>
                </div>
            `;
            
            // è‡ªå‹•æª¢æŸ¥æ¨£å¼
            setTimeout(checkStyles, 100);
        }
        
        function checkStyles() {
            const modalContent = document.querySelector('.budget-setting-modal-content');
            if (modalContent) {
                const computedStyle = window.getComputedStyle(modalContent);
                const output = document.getElementById('style-output');
                
                const hasBackgroundImage = computedStyle.backgroundImage.includes('956499812b93c3c5bf8226051c7e627f');
                const hasBlendMode = computedStyle.backgroundBlendMode !== 'normal';
                const hasBackdropFilter = computedStyle.backdropFilter !== 'none';
                
                output.innerHTML = `
                    <div class="debug-info">
                        <strong>ç•¶å‰ä¸»é¡Œï¼š${document.body.getAttribute('data-theme')}</strong><br><br>
                        <strong>å¯¦éš›æ‡‰ç”¨çš„CSSæ¨£å¼ï¼š</strong><br>
                        background: ${computedStyle.background}<br>
                        background-color: ${computedStyle.backgroundColor}<br>
                        background-image: ${computedStyle.backgroundImage}<br>
                        background-blend-mode: ${computedStyle.backgroundBlendMode}<br>
                        border: ${computedStyle.border}<br>
                        border-radius: ${computedStyle.borderRadius}<br>
                        backdrop-filter: ${computedStyle.backdropFilter}<br>
                        color: ${computedStyle.color}<br><br>
                        <strong>æª¢æŸ¥çµæœï¼š</strong><br>
                        ${hasBackgroundImage ? 'âœ…' : 'âŒ'} èƒŒæ™¯åœ–ç‰‡URL: ${hasBackgroundImage ? 'æ­£ç¢º' : 'éŒ¯èª¤'}<br>
                        ${hasBlendMode ? 'âœ…' : 'âŒ'} æœ‰èƒŒæ™¯æ··åˆæ¨¡å¼: ${hasBlendMode ? 'æ˜¯' : 'å¦'}<br>
                        ${hasBackdropFilter ? 'âœ…' : 'âŒ'} æœ‰æ¯›ç»ç’ƒæ•ˆæœ: ${hasBackdropFilter ? 'æ˜¯' : 'å¦'}<br><br>
                        <strong>èƒŒæ™¯åœ–ç‰‡URLï¼š</strong><br>
                        ${computedStyle.backgroundImage}
                    </div>
                `;
            } else {
                document.getElementById('style-output').innerHTML = `
                    <div class="debug-info">
                        <strong>æ‰¾ä¸åˆ° .budget-setting-modal-content å…ƒç´ </strong><br>
                        è«‹å…ˆé»æ“Šã€Œé¡¯ç¤ºç›´æ¥é ç®—å¡ç‰‡ã€æŒ‰éˆ•
                    </div>
                `;
            }
        }
        
        function checkAllThemes() {
            const themes = ['cuteCats', 'dreamy', 'chick', 'dreamyfish', 'emerald', 'meow'];
            const output = document.getElementById('style-output');
            let results = '<div class="debug-info"><strong>æ‰€æœ‰ä¸»é¡Œæª¢æŸ¥çµæœï¼š</strong>\n\n';
            
            let currentIndex = 0;
            
            function checkNextTheme() {
                if (currentIndex >= themes.length) {
                    results += '\n<strong>æª¢æŸ¥å®Œæˆï¼</strong>';
                    output.innerHTML = `<pre>${results}</pre>`;
                    return;
                }
                
                const theme = themes[currentIndex];
                document.body.setAttribute('data-theme', theme);
                
                setTimeout(() => {
                    const element = document.querySelector('.budget-setting-modal-content');
                    if (element) {
                        const computedStyle = window.getComputedStyle(element);
                        const hasBackgroundImage = computedStyle.backgroundImage.includes('956499812b93c3c5bf8226051c7e627f');
                        
                        results += `${theme}: ${hasBackgroundImage ? 'âœ…' : 'âŒ'} èƒŒæ™¯åœ–ç‰‡\n`;
                    } else {
                        results += `${theme}: âŒ æ‰¾ä¸åˆ°å…ƒç´ \n`;
                    }
                    
                    currentIndex++;
                    checkNextTheme();
                }, 200);
            }
            
            // ç¢ºä¿æœ‰ç›´æ¥æ¸¬è©¦å¡ç‰‡
            if (!document.querySelector('.budget-setting-modal-content')) {
                showDirectBudgetCard();
                setTimeout(checkNextTheme, 300);
            } else {
                checkNextTheme();
            }
        }
        
        function closeModal(event) {
            if (!event || event.target.classList.contains('modal-overlay')) {
                document.getElementById('modalContainer').innerHTML = '';
            }
        }
        
        function saveBudget() {
            alert('é ç®—å·²å„²å­˜ï¼ï¼ˆé€™åªæ˜¯æ¸¬è©¦ï¼‰');
            closeModal();
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•é¡¯ç¤ºç›´æ¥æ¸¬è©¦å¡ç‰‡
        window.addEventListener('load', () => {
            setTimeout(() => {
                showDirectBudgetCard();
            }, 500);
        });
    </script>
</body>
</html>
