<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme.js èªæ³•éŒ¯èª¤ä¿®å¾©å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .error-info {
            background: #ffebee;
            border: 1px solid #f44336;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .fix-steps {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .button {
            background: #2196f3;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
        }
        .button:hover {
            background: #1976d2;
        }
        .success {
            background: #4caf50;
        }
        .warning {
            background: #ff9800;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Theme.js èªæ³•éŒ¯èª¤ä¿®å¾©å·¥å…·</h1>
    
    <div class="error-info">
        <h2>âŒ éŒ¯èª¤ä¿¡æ¯</h2>
        <p><strong>Uncaught SyntaxError: Unexpected token '}' (at theme.js:703:1)</strong></p>
        <p>é€™è¡¨ç¤ºåœ¨ç¬¬703è¡Œæœ‰ä¸€å€‹ä¸åŒ¹é…çš„å¤§æ‹¬è™Ÿã€‚</p>
    </div>
    
    <div class="fix-steps">
        <h2>âœ… ä¿®å¾©æ­¥é©Ÿ</h2>
        
        <h3>æ–¹æ³• 1: æ‰‹å‹•ä¿®å¾© (æ¨è–¦)</h3>
        <ol>
            <li>æ‰“é–‹ <code>js/theme.js</code> æ–‡ä»¶</li>
            <li>æŒ‰ <kbd>Ctrl+G</kbd> è·³è½‰åˆ°ç¬¬ <strong>703</strong> è¡Œ</li>
            <li>æ‰¾åˆ°é€™è¡Œå…§å®¹: <span class="code-block">};</span></li>
            <li>ä¿®æ”¹ç‚º: <span class="code-block">];</span></li>
            <li>æŒ‰ <kbd>Ctrl+S</kbd> ä¿å­˜æ–‡ä»¶</li>
            <li>é‡æ–°è¼‰å…¥é é¢</li>
        </ol>
        
        <h3>æ–¹æ³• 2: è‡ªå‹•ä¿®å¾©</h3>
        <button class="button" onclick="autoFix()">ğŸš€ è‡ªå‹•ä¿®å¾©</button>
        <p>é»æ“Šæ­¤æŒ‰éˆ•å°‡è‡ªå‹•ä¸‹è¼‰ä¿®å¾©å¾Œçš„æ–‡ä»¶ã€‚</p>
    </div>
    
    <div class="fix-steps">
        <h2>ğŸ“ è©³ç´°èªªæ˜</h2>
        <p><strong>ç‚ºä»€éº¼éœ€è¦ä¿®å¾©ï¼Ÿ</strong></p>
        <ul>
            <li><code>themes</code> æ˜¯ä¸€å€‹é™£åˆ— (Array)ï¼Œæ‡‰è©²ç”¨ <code>]</code> çµæŸ</li>
            <li><code>};</code> æ˜¯ç‰©ä»¶ (Object) çš„çµæŸç¬¦è™Ÿ</li>
            <li>é€™å€‹éŒ¯èª¤å°è‡´æ•´å€‹ä¸»é¡Œç³»çµ±ç„¡æ³•è¼‰å…¥</li>
        </ul>
        
        <p><strong>ä¿®å¾©å‰:</strong></p>
        <div class="code-block">
var themes = window.AppThemes || [
    // ... æ‰€æœ‰ä¸»é¡Œå®šç¾© ...
    {
        id: 'cuteChicks',
        name: 'å¯æ„›å°é›',
        // ... å…¶ä»–å±¬æ€§ ...
    }
};  // âŒ éŒ¯èª¤ï¼šé™£åˆ—ç”¨äº†ç‰©ä»¶çµæŸç¬¦è™Ÿ
        </div>
        
        <p><strong>ä¿®å¾©å¾Œ:</strong></p>
        <div class="code-block">
var themes = window.AppThemes || [
    // ... æ‰€æœ‰ä¸»é¡Œå®šç¾© ...
    {
        id: 'cuteChicks',
        name: 'å¯æ„›å°é›',
        // ... å…¶ä»–å±¬æ€§ ...
    }
];  // âœ… æ­£ç¢ºï¼šé™£åˆ—ç”¨é™£åˆ—çµæŸç¬¦è™Ÿ
        </div>
    </div>
    
    <div class="fix-steps">
        <h2>ğŸ§ª é©—è­‰ä¿®å¾©</h2>
        <p>ä¿®å¾©å®Œæˆå¾Œï¼Œæ‰“é–‹ç€è¦½å™¨æ§åˆ¶å°é‹è¡Œï¼š</p>
        <div class="code-block">
// æª¢æŸ¥ä¸»é¡Œé™£åˆ—
console.log('ä¸»é¡Œæ•¸é‡:', themes.length);

// æª¢æŸ¥å°ç‹å­ä¸»é¡Œ
const littlePrince = themes.find(t => t.id === 'littlePrince');
console.log('å°ç‹å­ä¸»é¡Œ:', littlePrince ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');

// æª¢æŸ¥å‡½æ•¸
console.log('showThemeSelector å¯ç”¨:', typeof showThemeSelector === 'function');
        </div>
        
        <p><strong>æœŸæœ›çµæœ:</strong></p>
        <ul>
            <li>âœ… ä¸»é¡Œæ•¸é‡: [æ•¸å­—]</li>
            <li>âœ… å°ç‹å­ä¸»é¡Œ: å­˜åœ¨</li>
            <li>âœ… showThemeSelector å¯ç”¨: true</li>
        </ul>
    </div>
    
    <div id="status"></div>
    
    <script>
        async function autoFix() {
            const status = document.getElementById('status');
            
            try {
                status.innerHTML = '<div class="fix-steps"><h3>ğŸ”„ æ­£åœ¨ä¿®å¾©...</h3><p>æ­£åœ¨è®€å– theme.js æ–‡ä»¶...</p></div>';
                
                // è®€å–ç•¶å‰ theme.js æ–‡ä»¶
                const response = await fetch('js/theme.js');
                const content = await response.text();
                
                status.innerHTML = '<div class="fix-steps"><h3>ğŸ”„ æ­£åœ¨ä¿®å¾©...</h3><p>æ­£åœ¨åˆ†æèªæ³•éŒ¯èª¤...</p></div>';
                
                // ä¿®å¾©èªæ³•éŒ¯èª¤
                const lines = content.split('\n');
                let fixed = false;
                
                // å°‹æ‰¾ä¸¦ä¿®å¾©éŒ¯èª¤è¡Œ
                for (let i = 0; i < lines.length; i++) {
                    if (lines[i].trim() === '};' && i >= 700 && i <= 710) {
                        lines[i] = '];';
                        fixed = true;
                        console.log(`å·²ä¿®å¾©ç¬¬ ${i + 1} è¡Œ`);
                        break;
                    }
                }
                
                if (!fixed) {
                    throw new Error('æœªæ‰¾åˆ°éœ€è¦ä¿®å¾©çš„èªæ³•éŒ¯èª¤');
                }
                
                status.innerHTML = '<div class="fix-steps"><h3>ğŸ”„ æ­£åœ¨ä¿®å¾©...</h3><p>æ­£åœ¨ç”Ÿæˆä¿®å¾©æ–‡ä»¶...</p></div>';
                
                // å‰µå»ºä¿®å¾©å¾Œçš„æ–‡ä»¶
                const fixedContent = lines.join('\n');
                const blob = new Blob([fixedContent], { type: 'text/javascript' });
                const url = URL.createObjectURL(blob);
                
                // ä¸‹è¼‰æ–‡ä»¶
                const a = document.createElement('a');
                a.href = url;
                a.download = 'theme.js';
                a.click();
                URL.revokeObjectURL(url);
                
                status.innerHTML = '<div class="fix-steps success"><h3>âœ… ä¿®å¾©å®Œæˆï¼</h3><p>è«‹ä¸‹è¼‰ä¿®å¾©å¾Œçš„ theme.js æ–‡ä»¶ï¼Œä¸¦æ›¿æ›åŸä¾†çš„ js/theme.js æ–‡ä»¶ã€‚</p><p>æ›¿æ›å¾Œè«‹é‡æ–°è¼‰å…¥é é¢ã€‚</p></div>';
                
            } catch (error) {
                status.innerHTML = `<div class="error-info"><h3>âŒ ä¿®å¾©å¤±æ•—</h3><p>${error.message}</p><p>è«‹ä½¿ç”¨æ‰‹å‹•ä¿®å¾©æ–¹æ³•ã€‚</p></div>`;
                console.error('ä¿®å¾©å¤±æ•—:', error);
            }
        }
        
        // æª¢æŸ¥ç•¶å‰ç‹€æ…‹
        function checkStatus() {
            try {
                if (typeof themes !== 'undefined') {
                    console.log('âœ… themes è®Šæ•¸å¯ç”¨ï¼Œä¸»é¡Œæ•¸é‡:', themes.length);
                } else {
                    console.log('âŒ themes è®Šæ•¸ä¸å¯ç”¨ï¼Œå­˜åœ¨èªæ³•éŒ¯èª¤');
                }
                
                if (typeof showThemeSelector === 'function') {
                    console.log('âœ… showThemeSelector å‡½æ•¸å¯ç”¨');
                } else {
                    console.log('âŒ showThemeSelector å‡½æ•¸ä¸å¯ç”¨');
                }
            } catch (error) {
                console.log('âŒ æª¢æŸ¥å¤±æ•—:', error.message);
            }
        }
        
        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç‹€æ…‹
        checkStatus();
    </script>
</body>
</html>
