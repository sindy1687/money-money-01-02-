:root[data-theme="money"] {
    --color-primary: #2c3e50;
    --color-primary-light: #34495e;
    --color-primary-lighter: #7f8c8d;
    --color-primary-dark: #1a252f;
    --color-secondary: #f39c12;
    --color-secondary-light: #f1c40f;
    --color-secondary-dark: #d68910;
    --bg-primary: linear-gradient(135deg, rgba(44, 62, 80, 0.94) 0%, rgba(52, 73, 94, 0.85) 65%, rgba(243, 156, 18, 0.35) 100%);
    --bg-body: rgba(44, 62, 80, 0.96);
    --bg-body-strong: rgba(52, 73, 94, 0.98);
    --bg-gradient: linear-gradient(135deg, #1a252f 0%, #2c3e50 60%, #f39c12 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(52, 73, 94, 0.08) 0%, rgba(243, 156, 18, 0.25) 100%);
    --bg-white: rgba(44, 62, 80, 0.78);
    --bg-card: rgba(52, 73, 94, 0.8);
    --bg-light: rgba(127, 140, 141, 0.64);
    --bg-lighter: rgba(149, 165, 166, 0.52);
    --bg-soft: rgba(189, 195, 199, 0.55);
    --bg-soft-strong: rgba(127, 140, 141, 0.68);
    --text-primary: rgba(236, 240, 241, 0.96);
    --text-secondary: rgba(189, 195, 199, 0.78);
    --text-tertiary: rgba(149, 165, 166, 0.6);
    --text-strong: rgba(255, 255, 255, 0.98);
    --text-white: rgba(236, 240, 241, 0.98);
    --border-primary: rgba(243, 156, 18, 0.65);
    --border-light: rgba(52, 73, 94, 0.24);
    --border-medium: rgba(243, 156, 18, 0.4);
    --card-border-color: rgba(243, 156, 18, 0.45);
    --control-border-color: rgba(52, 73, 94, 0.32);
    --table-border-color: rgba(52, 73, 94, 0.22);
    --shadow-primary: 0 20px 60px rgba(44, 62, 80, 0.8);
    --shadow-primary-lg: 0 30px 80px rgba(44, 62, 80, 0.7);
    --color-primary-rgba-08: rgba(52, 73, 94, 0.08);
    --color-primary-rgba-10: rgba(52, 73, 94, 0.1);
    --color-primary-rgba-15: rgba(52, 73, 94, 0.15);
    --color-primary-rgba-20: rgba(52, 73, 94, 0.2);
    --color-primary-rgba-25: rgba(52, 73, 94, 0.25);
    --color-primary-rgba-30: rgba(52, 73, 94, 0.3);
    --color-primary-rgba-40: rgba(52, 73, 94, 0.4);
    --color-primary-light-rgba-08: rgba(127, 140, 141, 0.08);
    --color-primary-light-rgba-10: rgba(127, 140, 141, 0.1);
    --color-primary-light-rgba-15: rgba(127, 140, 141, 0.15);
    --color-primary-light-rgba-20: rgba(127, 140, 141, 0.2);
    --color-primary-light-rgba-25: rgba(127, 140, 141, 0.25);
    --color-primary-light-rgba-30: rgba(127, 140, 141, 0.3);
    --color-primary-light-rgba-40: rgba(127, 140, 141, 0.4);
    --color-secondary-rgba-08: rgba(243, 156, 18, 0.08);
    --color-secondary-rgba-10: rgba(243, 156, 18, 0.1);
    --color-secondary-rgba-15: rgba(243, 156, 18, 0.15);
    --color-secondary-rgba-20: rgba(243, 156, 18, 0.2);
    --color-secondary-rgba-25: rgba(243, 156, 18, 0.25);
    --color-secondary-rgba-30: rgba(243, 156, 18, 0.3);
    --color-secondary-rgba-40: rgba(243, 156, 18, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(44, 62, 80, 0.85) 0%, rgba(44, 62, 80, 0.65) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(44, 62, 80, 0.85) 0%, rgba(44, 62, 80, 0.65) 100%);
    --action-side-bg: color-mix(in srgb, rgba(52, 73, 94, 0.92) 75%, rgba(243, 156, 18, 0.08));
    --action-side-bg-hover: color-mix(in srgb, rgba(52, 73, 94, 0.92) 65%, rgba(243, 156, 18, 0.2));
    --action-side-text: rgba(236, 240, 241, 0.96);
}

:root[data-theme="money"] body {
    background: transparent;
    color: var(--text-primary);
}

:root[data-theme="money"] body::before {
    display: none;
}

:root[data-theme="money"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="money"] .page-input,
:root[data-theme="money"] .page-chart,
:root[data-theme="money"] .page-budget,
:root[data-theme="money"] .page-monthly-planner,
:root[data-theme="money"] .page-daily-budget,
:root[data-theme="money"] .page-settings,
:root[data-theme="money"] .page-category-manage,
:root[data-theme="money"] .page-investment,
:root[data-theme="money"] .page-wallet,
:root[data-theme="money"] .page-history,
:root[data-theme="money"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="money"] .card,
:root[data-theme="money"] .record-card,
:root[data-theme="money"] .ledger-card,
:root[data-theme="money"] .summary-card,
:root[data-theme="money"] .budget-card,
:root[data-theme="money"] .wallet-card,
:root[data-theme="money"] .chart-card,
:root[data-theme="money"] .investment-card {
    background: rgba(6, 20, 13, 0.5);
    border: 1px solid rgba(22, 244, 154, 0.22);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.35);
}

:root[data-theme="money"] .investment-card,
:root[data-theme="money"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-secondary) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-secondary);
    box-shadow: 
        0 12px 32px rgba(0, 0, 0, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.4),
        0 0 30px var(--color-secondary-rgba-40);
}

:root[data-theme="money"] .investment-card::before,
:root[data-theme="money"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-secondary-rgba-40) 0%, var(--color-secondary-rgba-30) 55%, var(--color-secondary-rgba-20) 100%);
}

:root[data-theme="money"] .nav-item.active {
    background: var(--color-secondary-rgba-20);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
}
.record-card-headline {
    display: flex;
    align-items: center;
    gap: 12px;
}

.record-card-headline .account-name {
    color: var(--text-primary);
    filter: brightness(1.2);
}


:root[data-theme="totoro"] {
    --color-primary: #4682B4;
    --color-primary-light: #87CEEB;
    --color-primary-lighter: #B0E0E6;
    --color-primary-dark: #36454F;
    --bg-primary: linear-gradient(135deg, #F5F5DC 0%, #E6E6FA 50%, #B0E0E6 100%);
    --bg-gradient: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 50%, #F5F5DC 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(135, 206, 235, 0.15) 0%, rgba(176, 224, 230, 0.12) 50%, rgba(245, 245, 220, 0.18) 100%);
    --bg-light-gradient: linear-gradient(135deg, rgba(245, 245, 220, 0.95) 0%, rgba(255, 255, 255, 0.92) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(255, 255, 255, 0.94) 0%, rgba(245, 245, 220, 0.92) 100%);
    --bg-card: rgba(255, 255, 255, 0.88);
    --bg-white: rgba(255, 255, 255, 0.9);
    --bg-light: rgba(245, 245, 220, 0.85);
    --bg-lighter: rgba(240, 248, 255, 0.78);
    --text-primary: #36454F;
    --text-secondary: rgba(54, 69, 79, 0.75);
    --text-tertiary: rgba(54, 69, 79, 0.6);
    --border-light: rgba(135, 206, 235, 0.3);
    --border-medium: rgba(176, 224, 230, 0.35);
    --card-border-color: rgba(135, 206, 235, 0.4);
    --card-border-color-strong: rgba(70, 130, 180, 0.5);
    --border-primary: #4682B4;
    --shadow-primary: 0 10px 28px rgba(70, 130, 180, 0.25);
    --shadow-primary-lg: 0 14px 36px rgba(135, 206, 235, 0.22);
    --color-primary-rgba-08: rgba(70, 130, 180, 0.08);
    --color-primary-rgba-10: rgba(70, 130, 180, 0.10);
    --color-primary-rgba-12: rgba(70, 130, 180, 0.12);
    --color-primary-rgba-15: rgba(70, 130, 180, 0.15);
    --color-primary-rgba-20: rgba(70, 130, 180, 0.20);
    --color-primary-rgba-25: rgba(70, 130, 180, 0.25);
    --color-primary-rgba-30: rgba(70, 130, 180, 0.30);
    --color-primary-rgba-40: rgba(70, 130, 180, 0.40);
    --color-primary-light-rgba-08: rgba(135, 206, 235, 0.08);
    --color-primary-light-rgba-10: rgba(135, 206, 235, 0.10);
    --color-primary-light-rgba-12: rgba(135, 206, 235, 0.12);
    --color-primary-light-rgba-15: rgba(135, 206, 235, 0.15);
    --color-primary-light-rgba-20: rgba(135, 206, 235, 0.20);
    --color-primary-light-rgba-25: rgba(135, 206, 235, 0.25);
    --color-primary-light-rgba-30: rgba(135, 206, 235, 0.30);
    --color-primary-light-rgba-40: rgba(135, 206, 235, 0.40);
}

:root[data-theme="totoro"] body {
    background: url("https://i.pinimg.com/736x/f6/e9/10/f6e910dc17992265ad9833055ff153ac.jpg") center/cover no-repeat fixed;
    background-color: var(--bg-primary);
}

:root[data-theme="totoro"] body::before {
    display: none;
}

:root[data-theme="totoro"] .page-input,
:root[data-theme="totoro"] .page-ledger,
:root[data-theme="totoro"] .page-chart,
:root[data-theme="totoro"] .page-budget,
:root[data-theme="totoro"] .page-monthly-planner,
:root[data-theme="totoro"] .page-daily-budget,
:root[data-theme="totoro"] .page-settings,
:root[data-theme="totoro"] .page-category-manage,
:root[data-theme="totoro"] .page-investment,
:root[data-theme="totoro"] .page-wallet,
:root[data-theme="totoro"] .page-history,
:root[data-theme="totoro"] .page-planner {
    background: transparent !important;
    box-shadow: none;
}

:root[data-theme="totoro"] .card,
:root[data-theme="totoro"] .record-card,
:root[data-theme="totoro"] .ledger-card,
:root[data-theme="totoro"] .summary-card,
:root[data-theme="totoro"] .budget-card,
:root[data-theme="totoro"] .wallet-card,
:root[data-theme="totoro"] .chart-card,
:root[data-theme="totoro"] .investment-card,
:root[data-theme="totoro"] .stock-item-card {
    background: rgba(245, 245, 220, 0.85);
    border: 1px solid rgba(135, 206, 235, 0.3);
    box-shadow: 0 8px 24px rgba(70, 130, 180, 0.15);
}

:root[data-theme="totoro"] .investment-card::before,
:root[data-theme="totoro"] .stock-item-card::before {
    background: linear-gradient(135deg, rgba(135, 206, 235, 0.15) 0%, rgba(176, 224, 230, 0.12) 55%, rgba(245, 245, 220, 0.18) 100%);
}

:root[data-theme="totoro"] .nav-item.active {
    background: rgba(135, 206, 235, 0.25);
    box-shadow: 0 6px 16px rgba(70, 130, 180, 0.2);
}

:root[data-theme="totoro"] .modal-content,
:root[data-theme="totoro"] .modal-content-standard,
:root[data-theme="totoro"] .budget-category-modal-content,
:root[data-theme="totoro"] .budget-setting-modal-content,
:root[data-theme="totoro"] .category-modal-content,
:root[data-theme="totoro"] .dca-execute-modal .modal-content,
:root[data-theme="totoro"] .account-modal-content,
:root[data-theme="totoro"] .emoji-modal-content,
:root[data-theme="totoro"] .crop-modal-content,
:root[data-theme="totoro"] .history-modal-content {
    background: rgba(245, 245, 220, 0.95);
    border: 1px solid rgba(135, 206, 235, 0.4);
    box-shadow: 0 12px 32px rgba(70, 130, 180, 0.2);
}

:root[data-theme="totoro"] .input-section {
    background: rgba(245, 245, 220, 0.92);
    border: 2px solid rgba(135, 206, 235, 0.3);
    box-shadow: 0 -4px 20px rgba(70, 130, 180, 0.15);
}

:root[data-theme="totoro"] .bottom-nav {
    background: rgba(245, 245, 220, 0.9) !important;
    border-top: 1px solid rgba(135, 206, 235, 0.4) !important;
    backdrop-filter: blur(14px);
}

:root[data-theme="totoro"] .form-input,
:root[data-theme="totoro"] .form-select,
:root[data-theme="totoro"] .form-textarea,
:root[data-theme="totoro"] .note-input {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(135, 206, 235, 0.3) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="totoro"] .form-input:focus,
:root[data-theme="totoro"] .form-select:focus,
:root[data-theme="totoro"] .form-textarea:focus,
:root[data-theme="totoro"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(70, 130, 180, 0.15) !important;
    background: rgba(255, 255, 255, 0.95) !important;
}

:root[data-theme="totoro"] .header-section {
    background: rgba(245, 245, 220, 0.9) !important;
    border-bottom: 1px solid rgba(135, 206, 235, 0.3) !important;
    backdrop-filter: blur(10px);
}

:root[data-theme="totoro"] .tab-btn {
    background: rgba(255, 255, 255, 0.7) !important;
    border: 1px solid rgba(135, 206, 235, 0.3) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="totoro"] .tab-btn.active {
    background: rgba(135, 206, 235, 0.3) !important;
    border: 2px solid #4682B4 !important;
    color: var(--text-primary) !important;
    box-shadow: 0 4px 12px rgba(70, 130, 180, 0.2) !important;
}

:root[data-theme="totoro"] .tab-btn:hover {
    background: rgba(135, 206, 235, 0.2) !important;
    border-color: rgba(70, 130, 180, 0.4) !important;
}

:root[data-theme="totoro"] .key-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(135, 206, 235, 0.3) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 4px 12px rgba(70, 130, 180, 0.1) !important;
}

:root[data-theme="totoro"] .key-btn:hover {
    background: rgba(135, 206, 235, 0.3) !important;
    border-color: rgba(70, 130, 180, 0.4) !important;
    box-shadow: 0 6px 16px rgba(70, 130, 180, 0.15) !important;
}

:root[data-theme="totoro"] .key-btn:active {
    background: rgba(70, 130, 180, 0.2) !important;
    transform: scale(0.95);
}

:root[data-theme="totoro"] .key-btn.operator {
    background: rgba(70, 130, 180, 0.7) !important;
    color: var(--text-white) !important;
}

:root[data-theme="totoro"] .key-btn.equal {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
    color: var(--text-white) !important;
}

:root[data-theme="totoro"] .key-btn.delete {
    background: rgba(220, 53, 69, 0.8) !important;
    color: var(--text-white) !important;
}

:root[data-theme="totoro"] .fab-btn {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%) !important;
    box-shadow: 0 8px 24px rgba(70, 130, 180, 0.3) !important;
}

:root[data-theme="totoro"] .fab-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%) !important;
    box-shadow: 0 12px 32px rgba(70, 130, 180, 0.4) !important;
}

:root[data-theme="noface"] {
    --color-primary: #f6c343;
    --color-primary-light: #ffe08a;
    --color-primary-lighter: #fff3c6;
    --color-primary-dark: #1f1b24;
    --bg-primary: linear-gradient(135deg, #0f0c12 0%, #1f1b24 55%, #f6c343 100%);
    --bg-gradient: linear-gradient(135deg, rgba(246, 195, 67, 0.35) 0%, rgba(38, 32, 44, 0.85) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(31, 27, 36, 0.85) 0%, rgba(20, 17, 24, 0.9) 60%, rgba(246, 195, 67, 0.2) 100%);
    --bg-light-gradient: linear-gradient(135deg, rgba(31, 27, 36, 0.92) 0%, rgba(17, 15, 21, 0.94) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(20, 17, 24, 0.96) 0%, rgba(31, 27, 36, 0.92) 100%);
    --bg-card: rgba(24, 20, 27, 0.9);
    --bg-white: rgba(20, 17, 24, 0.92);
    --bg-light: rgba(31, 27, 36, 0.85);
    --bg-lighter: rgba(38, 32, 44, 0.78);
    --text-primary: #f9f6ef;
    --text-secondary: rgba(249, 246, 239, 0.78);
    --text-tertiary: rgba(249, 246, 239, 0.6);
    --border-light: rgba(246, 195, 67, 0.35);
    --border-medium: rgba(255, 232, 141, 0.4);
    --card-border-color: rgba(246, 195, 67, 0.45);
    --card-border-color-strong: rgba(255, 224, 138, 0.55);
    --border-primary: #f6c343;
    --shadow-primary: 0 12px 30px rgba(0, 0, 0, 0.55);
    --shadow-primary-lg: 0 18px 40px rgba(0, 0, 0, 0.65);
    --color-primary-rgba-08: rgba(246, 195, 67, 0.08);
    --color-primary-rgba-10: rgba(246, 195, 67, 0.10);
    --color-primary-rgba-12: rgba(246, 195, 67, 0.12);
    --color-primary-rgba-15: rgba(246, 195, 67, 0.15);
    --color-primary-rgba-20: rgba(246, 195, 67, 0.2);
    --color-primary-rgba-25: rgba(246, 195, 67, 0.25);
    --color-primary-rgba-30: rgba(246, 195, 67, 0.3);
    --color-primary-rgba-40: rgba(246, 195, 67, 0.4);
    --color-primary-light-rgba-08: rgba(255, 224, 138, 0.08);
    --color-primary-light-rgba-10: rgba(255, 224, 138, 0.10);
    --color-primary-light-rgba-12: rgba(255, 224, 138, 0.12);
    --color-primary-light-rgba-15: rgba(255, 224, 138, 0.15);
    --color-primary-light-rgba-20: rgba(255, 224, 138, 0.2);
    --color-primary-light-rgba-25: rgba(255, 224, 138, 0.25);
    --color-primary-light-rgba-30: rgba(255, 224, 138, 0.3);
    --color-primary-light-rgba-40: rgba(255, 224, 138, 0.4);
}

:root[data-theme="noface"] body {
    background: url("https://i.pinimg.com/1200x/fe/b3/f9/feb3f9990f903e1b7b0f4a2066a97722.jpg") center/cover no-repeat fixed;
    background-color: var(--bg-primary);
}

:root[data-theme="noface"] body::before {
    display: none;
}

:root[data-theme="noface"] .page-input,
:root[data-theme="noface"] .page-ledger,
:root[data-theme="noface"] .page-chart,
:root[data-theme="noface"] .page-budget,
:root[data-theme="noface"] .page-monthly-planner,
:root[data-theme="noface"] .page-daily-budget,
:root[data-theme="noface"] .page-settings,
:root[data-theme="noface"] .page-category-manage,
:root[data-theme="noface"] .page-investment,
:root[data-theme="noface"] .page-wallet,
:root[data-theme="noface"] .page-history,
:root[data-theme="noface"] .page-planner,
:root[data-theme="noface"] .dividend-page,
:root[data-theme="noface"] .dca-management-page,
:root[data-theme="noface"] .dca-setup-page,
:root[data-theme="noface"] .investment-input-page,
:root[data-theme="noface"] .wishlist-content,
:root[data-theme="noface"] .savings-content {
    background: transparent !important;
    box-shadow: none;
}

:root[data-theme="noface"] .card,
:root[data-theme="noface"] .record-card,
:root[data-theme="noface"] .ledger-card,
:root[data-theme="noface"] .summary-card,
:root[data-theme="noface"] .budget-card,
:root[data-theme="noface"] .wallet-card,
:root[data-theme="noface"] .chart-card,
:root[data-theme="noface"] .investment-card,
:root[data-theme="noface"] .stock-item-card,
:root[data-theme="noface"] .monthly-planner-card,
:root[data-theme="noface"] .dividend-stat-card,
:root[data-theme="noface"] .dca-card,
:root[data-theme="noface"] .installment-card {
    background: rgba(14, 12, 18, 0.88);
    border: 1px solid rgba(246, 195, 67, 0.35);
    box-shadow: 0 14px 36px rgba(0, 0, 0, 0.6);
    color: var(--text-primary);
}

:root[data-theme="noface"] .card .value,
:root[data-theme="noface"] .summary-value,
:root[data-theme="noface"] .summary-label,
:root[data-theme="noface"] .stock-card-value,
:root[data-theme="noface"] .stock-card-label,
:root[data-theme="noface"] .stock-card-name,
:root[data-theme="noface"] .stat-label,
:root[data-theme="noface"] .stat-value,
:root[data-theme="noface"] .budget-summary-value,
:root[data-theme="noface"] .budget-summary-label,
:root[data-theme="noface"] .transaction-amount,
:root[data-theme="noface"] .transaction-category,
:root[data-theme="noface"] .transaction-note,
:root[data-theme="noface"] .investment-metric-value,
:root[data-theme="noface"] .investment-metric-label {
    color: var(--text-primary-light) !important;
}

:root[data-theme="noface"] .stock-card-name {
    color: var(--text-primary-lighter) !important;
    text-shadow: 0 0 10px rgba(246, 195, 67, 0.3);
}

:root[data-theme="noface"] .stock-grid-card-price-number,
:root[data-theme="noface"] .stock-grid-card-price-unit,
:root[data-theme="noface"] .stock-grid-card-price-arrow {
    color: var(--text-primary-lightest) !important;
    text-shadow: 0 0 14px rgba(246, 195, 67, 0.35);
}

:root[data-theme="noface"] .metric-pill,
:root[data-theme="noface"] .stock-chip,
:root[data-theme="noface"] .badge,
:root[data-theme="noface"] .status-pill {
    background: rgba(246, 195, 67, 0.15) !important;
    color: var(--color-primary-light) !important;
    border-color: rgba(246, 195, 67, 0.35) !important;
}

:root[data-theme="noface"] .investment-card::before,
:root[data-theme="noface"] .stock-item-card::before {
    background: linear-gradient(135deg, rgba(246, 195, 67, 0.18) 0%, rgba(31, 27, 36, 0.4) 60%, rgba(255, 224, 138, 0.25) 100%);
}

:root[data-theme="noface"] .nav-item.active {
    background: rgba(246, 195, 67, 0.15);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45);
}

:root[data-theme="noface"] .modal-content,
:root[data-theme="noface"] .modal-content-standard,
:root[data-theme="noface"] .budget-category-modal-content,
:root[data-theme="noface"] .budget-setting-modal-content,
:root[data-theme="noface"] .category-modal-content,
:root[data-theme="noface"] .dca-execute-modal .modal-content,
:root[data-theme="noface"] .account-modal-content,
:root[data-theme="noface"] .emoji-modal-content,
:root[data-theme="noface"] .crop-modal-content,
:root[data-theme="noface"] .history-modal-content {
    background: rgba(13, 11, 16, 0.95);
    border: 1px solid rgba(246, 195, 67, 0.4);
    box-shadow: 0 18px 42px rgba(0, 0, 0, 0.65);
}

:root[data-theme="noface"] .input-section {
    background: rgba(13, 11, 16, 0.92);
    border-top: 2px solid rgba(246, 195, 67, 0.35);
    box-shadow: 0 -6px 24px rgba(0, 0, 0, 0.55);
}

:root[data-theme="noface"] .bottom-nav {
    background: rgba(13, 11, 16, 0.95) !important;
    border-top: 1px solid rgba(246, 195, 67, 0.35) !important;
    backdrop-filter: blur(16px);
}

:root[data-theme="noface"] .form-input,
:root[data-theme="noface"] .form-select,
:root[data-theme="noface"] .form-textarea,
:root[data-theme="noface"] .note-input {
    background: rgba(24, 20, 27, 0.85) !important;
    border: 2px solid rgba(246, 195, 67, 0.35) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="noface"] .form-input:focus,
:root[data-theme="noface"] .form-select:focus,
:root[data-theme="noface"] .form-textarea:focus,
:root[data-theme="noface"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(246, 195, 67, 0.25) !important;
    background: rgba(20, 17, 24, 0.95) !important;
}

:root[data-theme="noface"] .header-section {
    background: rgba(13, 11, 16, 0.9) !important;
    border-bottom: 1px solid rgba(246, 195, 67, 0.25) !important;
    backdrop-filter: blur(10px);
}

:root[data-theme="noface"] .tab-btn {
    background: rgba(20, 17, 24, 0.85) !important;
    border: 1px solid rgba(246, 195, 67, 0.25) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="noface"] .tab-btn.active {
    background: rgba(246, 195, 67, 0.2) !important;
    border: 2px solid #f6c343 !important;
    color: var(--text-primary) !important;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.45) !important;
}

:root[data-theme="noface"] .tab-btn:hover {
    background: rgba(246, 195, 67, 0.15) !important;
    border-color: rgba(246, 195, 67, 0.35) !important;
}

:root[data-theme="noface"] .key-btn {
    background: rgba(24, 20, 27, 0.85) !important;
    border: 2px solid rgba(246, 195, 67, 0.35) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.5) !important;
}

:root[data-theme="noface"] .key-btn:hover {
    background: rgba(246, 195, 67, 0.2) !important;
    border-color: rgba(246, 195, 67, 0.4) !important;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.6) !important;
}

:root[data-theme="noface"] .key-btn:active {
    background: rgba(18, 15, 23, 0.95) !important;
    transform: scale(0.95);
}

:root[data-theme="noface"] .key-btn.operator {
    background: rgba(246, 195, 67, 0.35) !important;
    color: var(--color-primary-dark) !important;
}

:root[data-theme="noface"] .key-btn.equal {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
    color: var(--color-primary-dark) !important;
}

:root[data-theme="noface"] .key-btn.delete {
    background: rgba(220, 72, 84, 0.85) !important;
    border-color: rgba(220, 72, 84, 0.9) !important;
}

:root[data-theme="noface"] .fab-btn {
    background: linear-gradient(135deg, var(--color-primary) 0%, color-mix(in srgb, var(--color-primary) 70%, black) 100%) !important;
    color: var(--color-primary-dark) !important;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.65) !important;
}

:root[data-theme="noface"] .fab-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%) !important;
    box-shadow: 0 16px 36px rgba(0, 0, 0, 0.65) !important;
}

:root[data-theme="demonslayer"] {
    --color-primary: #00c2d1;
    --color-primary-light: #7af5ff;
    --color-primary-lighter: #b0fbff;
    --color-primary-dark: #08131e;
    --bg-primary: linear-gradient(135deg, #08131e 0%, #0f2434 45%, #00c2d1 100%);
    --bg-gradient: linear-gradient(135deg, rgba(0, 194, 209, 0.25) 0%, rgba(8, 19, 30, 0.9) 70%);
    --bg-gradient-light: linear-gradient(135deg, rgba(8, 19, 30, 0.92) 0%, rgba(10, 36, 52, 0.9) 60%, rgba(0, 194, 209, 0.25) 100%);
    --bg-light-gradient: linear-gradient(135deg, rgba(11, 28, 42, 0.95) 0%, rgba(8, 19, 30, 0.94) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(11, 28, 42, 0.96) 0%, rgba(8, 19, 30, 0.92) 100%);
    --bg-card: rgba(6, 14, 22, 0.92);
    --bg-white: rgba(10, 22, 33, 0.95);
    --bg-light: rgba(13, 30, 45, 0.9);
    --bg-lighter: rgba(15, 34, 52, 0.82);
    --text-primary: #f0feff;
    --text-secondary: rgba(240, 254, 255, 0.8);
    --text-tertiary: rgba(240, 254, 255, 0.65);
    --border-light: rgba(0, 194, 209, 0.35);
    --border-medium: rgba(122, 245, 255, 0.4);
    --card-border-color: rgba(0, 194, 209, 0.45);
    --card-border-color-strong: rgba(122, 245, 255, 0.55);
    --border-primary: #00c2d1;
    --shadow-primary: 0 14px 34px rgba(0, 0, 0, 0.55);
    --shadow-primary-lg: 0 20px 46px rgba(0, 0, 0, 0.65);
    --color-primary-rgba-08: rgba(0, 194, 209, 0.08);
    --color-primary-rgba-10: rgba(0, 194, 209, 0.10);
    --color-primary-rgba-12: rgba(0, 194, 209, 0.12);
    --color-primary-rgba-15: rgba(0, 194, 209, 0.15);
    --color-primary-rgba-20: rgba(0, 194, 209, 0.2);
    --color-primary-rgba-25: rgba(0, 194, 209, 0.25);
    --color-primary-rgba-30: rgba(0, 194, 209, 0.3);
    --color-primary-rgba-40: rgba(0, 194, 209, 0.4);
    --color-primary-light-rgba-08: rgba(122, 245, 255, 0.08);
    --color-primary-light-rgba-10: rgba(122, 245, 255, 0.10);
    --color-primary-light-rgba-12: rgba(122, 245, 255, 0.12);
    --color-primary-light-rgba-15: rgba(122, 245, 255, 0.15);
    --color-primary-light-rgba-20: rgba(122, 245, 255, 0.2);
    --color-primary-light-rgba-25: rgba(122, 245, 255, 0.25);
    --color-primary-light-rgba-30: rgba(122, 245, 255, 0.3);
    --color-primary-light-rgba-40: rgba(122, 245, 255, 0.4);
}

:root[data-theme="demonslayer"] body {
    background: url("https://i.pinimg.com/736x/73/3c/b0/733cb0696372d66f16702dd385a5aa5b.jpg") center/cover no-repeat fixed;
    background-color: var(--bg-primary);
}

:root[data-theme="demonslayer"] body::before {
    display: none;
}

:root[data-theme="demonslayer"] .page-input,
:root[data-theme="demonslayer"] .page-ledger,
:root[data-theme="demonslayer"] .page-chart,
:root[data-theme="demonslayer"] .page-budget,
:root[data-theme="demonslayer"] .page-monthly-planner,
:root[data-theme="demonslayer"] .page-daily-budget,
:root[data-theme="demonslayer"] .page-settings,
:root[data-theme="demonslayer"] .page-category-manage,
:root[data-theme="demonslayer"] .page-investment,
:root[data-theme="demonslayer"] .page-wallet,
:root[data-theme="demonslayer"] .page-history,
:root[data-theme="demonslayer"] .page-planner,
:root[data-theme="demonslayer"] .dividend-page,
:root[data-theme="demonslayer"] .dca-management-page,
:root[data-theme="demonslayer"] .dca-setup-page,
:root[data-theme="demonslayer"] .investment-input-page,
:root[data-theme="demonslayer"] .wishlist-content,
:root[data-theme="demonslayer"] .savings-content {
    background: transparent !important;
    box-shadow: none;
}

:root[data-theme="demonslayer"] .card,
:root[data-theme="demonslayer"] .record-card,
:root[data-theme="demonslayer"] .ledger-card,
:root[data-theme="demonslayer"] .summary-card,
:root[data-theme="demonslayer"] .budget-card,
:root[data-theme="demonslayer"] .wallet-card,
:root[data-theme="demonslayer"] .chart-card,
:root[data-theme="demonslayer"] .investment-card,
:root[data-theme="demonslayer"] .stock-item-card,
:root[data-theme="demonslayer"] .monthly-planner-card,
:root[data-theme="demonslayer"] .dividend-stat-card,
:root[data-theme="demonslayer"] .dca-card,
:root[data-theme="demonslayer"] .installment-card {
    background: rgba(5, 12, 20, 0.88);
    border: 1px solid rgba(0, 194, 209, 0.4);
    box-shadow: 0 14px 34px rgba(0, 0, 0, 0.55);
    color: var(--text-primary);
}

:root[data-theme="demonslayer"] .card .value,
:root[data-theme="demonslayer"] .summary-value,
:root[data-theme="demonslayer"] .summary-label,
:root[data-theme="demonslayer"] .stock-card-value,
:root[data-theme="demonslayer"] .stock-card-label,
:root[data-theme="demonslayer"] .stock-card-name,
:root[data-theme="demonslayer"] .stat-label,
:root[data-theme="demonslayer"] .stat-value,
:root[data-theme="demonslayer"] .budget-summary-value,
:root[data-theme="demonslayer"] .budget-summary-label,
:root[data-theme="demonslayer"] .transaction-amount,
:root[data-theme="demonslayer"] .transaction-category,
:root[data-theme="demonslayer"] .transaction-note,
:root[data-theme="demonslayer"] .investment-metric-value,
:root[data-theme="demonslayer"] .investment-metric-label {
    color: var(--text-primary-light) !important;
}

:root[data-theme="demonslayer"] .metric-pill,
:root[data-theme="demonslayer"] .stock-chip,
:root[data-theme="demonslayer"] .badge,
:root[data-theme="demonslayer"] .status-pill {
    background: rgba(0, 194, 209, 0.15) !important;
    color: var(--color-primary-light) !important;
    border-color: rgba(0, 194, 209, 0.35) !important;
}

:root[data-theme="demonslayer"] .investment-card::before,
:root[data-theme="demonslayer"] .stock-item-card::before {
    background: linear-gradient(135deg, rgba(0, 194, 209, 0.22) 0%, rgba(8, 19, 30, 0.45) 65%, rgba(122, 245, 255, 0.25) 100%);
}

:root[data-theme="demonslayer"] .nav-item.active {
    background: rgba(0, 194, 209, 0.16);
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.45);
}

:root[data-theme="demonslayer"] .modal-content,
:root[data-theme="demonslayer"] .modal-content-standard,
:root[data-theme="demonslayer"] .budget-category-modal-content,
:root[data-theme="demonslayer"] .budget-setting-modal-content,
:root[data-theme="demonslayer"] .category-modal-content,
:root[data-theme="demonslayer"] .dca-execute-modal .modal-content,
:root[data-theme="demonslayer"] .account-modal-content,
:root[data-theme="demonslayer"] .emoji-modal-content,
:root[data-theme="demonslayer"] .crop-modal-content,
:root[data-theme="demonslayer"] .history-modal-content {
    background: rgba(5, 13, 20, 0.95);
    border: 1px solid rgba(0, 194, 209, 0.4);
    box-shadow: 0 18px 44px rgba(0, 0, 0, 0.65);
}

:root[data-theme="demonslayer"] .input-section {
    background: rgba(5, 13, 20, 0.92);
    border-top: 2px solid rgba(0, 194, 209, 0.35);
    box-shadow: 0 -6px 24px rgba(0, 0, 0, 0.55);
}

:root[data-theme="demonslayer"] .bottom-nav {
    background: rgba(5, 13, 20, 0.95) !important;
    border-top: 1px solid rgba(0, 194, 209, 0.35) !important;
    backdrop-filter: blur(16px);
}

:root[data-theme="demonslayer"] .form-input,
:root[data-theme="demonslayer"] .form-select,
:root[data-theme="demonslayer"] .form-textarea,
:root[data-theme="demonslayer"] .note-input {
    background: rgba(12, 27, 40, 0.85) !important;
    border: 2px solid rgba(0, 194, 209, 0.35) !important;
    color: var(--text-primary-light) !important;
}

:root[data-theme="demonslayer"] .form-input:focus,
:root[data-theme="demonslayer"] .form-select:focus,
:root[data-theme="demonslayer"] .form-textarea:focus,
:root[data-theme="demonslayer"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(0, 194, 209, 0.25) !important;
    background: rgba(8, 19, 30, 0.96) !important;
}

:root[data-theme="demonslayer"] .header-section {
    background: rgba(5, 12, 20, 0.92) !important;
    border-bottom: 1px solid rgba(0, 194, 209, 0.3) !important;
    backdrop-filter: blur(12px);
}

:root[data-theme="demonslayer"] .tab-btn {
    background: rgba(10, 24, 36, 0.85) !important;
    border: 1px solid rgba(0, 194, 209, 0.25) !important;
    color: var(--text-primary-light) !important;
}

:root[data-theme="demonslayer"] .tab-btn.active {
    background: rgba(0, 194, 209, 0.2) !important;
    border: 2px solid #00c2d1 !important;
    color: var(--text-primary-light) !important;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.45) !important;
}

:root[data-theme="demonslayer"] .tab-btn:hover {
    background: rgba(0, 194, 209, 0.15) !important;
    border-color: rgba(0, 194, 209, 0.35) !important;
}

:root[data-theme="demonslayer"] .key-btn {
    background: rgba(12, 27, 40, 0.85) !important;
    border: 2px solid rgba(0, 194, 209, 0.35) !important;
    color: var(--text-primary-light) !important;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5) !important;
}

:root[data-theme="demonslayer"] .key-btn:hover {
    background: rgba(0, 194, 209, 0.18) !important;
    border-color: rgba(0, 194, 209, 0.4) !important;
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.6) !important;
}

:root[data-theme="demonslayer"] .key-btn:active {
    background: rgba(5, 12, 20, 0.95) !important;
    transform: scale(0.95);
}

:root[data-theme="demonslayer"] .key-btn.operator {
    background: rgba(0, 194, 209, 0.35) !important;
    color: var(--color-primary-dark) !important;
}

:root[data-theme="demonslayer"] .key-btn.equal {
    background: linear-gradient(135deg, var(--color-primary) 0%, color-mix(in srgb, var(--color-primary) 85%, var(--color-primary-dark)) 100%) !important;
    color: var(--color-primary-dark) !important;
}

:root[data-theme="demonslayer"] .key-btn.delete {
    background: rgba(255, 99, 132, 0.85) !important;
    border-color: rgba(255, 99, 132, 0.9) !important;
}

:root[data-theme="demonslayer"] .fab-btn {
    background: linear-gradient(135deg, var(--color-primary) 0%, color-mix(in srgb, var(--color-primary) 90%, var(--color-primary-dark)) 100%) !important;
    color: var(--color-primary-dark) !important;
    box-shadow: 0 14px 36px rgba(0, 0, 0, 0.6) !important;
}

:root[data-theme="demonslayer"] .fab-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%) !important;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.65) !important;
}


:root[data-theme="pink"].dark,
:root[data-theme="blue"].dark,
:root[data-theme="green"].dark,
:root[data-theme="forest"].dark,
:root[data-theme="purple"].dark,
:root[data-theme="orange"].dark,
:root[data-theme="cyan"].dark,
:root[data-theme="star"].dark,
:root[data-theme="red"].dark,
:root[data-theme="auroraflow"].dark,
:root[data-theme="midnight"].dark,
:root[data-theme="neon"].dark,
:root[data-theme="ocean"].dark,
:root[data-theme="galaxy"].dark,
:root[data-theme="obsidian"].dark {
    --text-primary: rgba(248, 250, 252, 0.96);
    --text-secondary: rgba(248, 250, 252, 0.82);
    --text-tertiary: rgba(248, 250, 252, 0.66);
    --text-strong: rgba(248, 250, 252, 0.98);
    --action-buy-text: rgba(15, 23, 42, 0.95);
    --action-dca-text: rgba(15, 23, 42, 0.9);
    --action-side-bg: color-mix(in srgb, rgba(15, 23, 42, 0.9) 80%, rgba(255, 255, 255, 0.08));
    --action-side-bg-hover: color-mix(in srgb, rgba(15, 23, 42, 0.92) 85%, rgba(255, 255, 255, 0.15));
    --action-side-text: rgba(248, 250, 252, 0.95);
}

:root.dark {
    --text-primary: rgba(255, 255, 255, 0.96);
    --text-secondary: rgba(255, 255, 255, 0.86);
    --text-tertiary: rgba(255, 255, 255, 0.7);
    --text-strong: rgba(255, 255, 255, 0.98);
    --card-border-color: color-mix(in srgb, var(--border-light) 72%, transparent);
    --control-border-color: color-mix(in srgb, var(--border-light) 68%, transparent);
    --table-border-color: color-mix(in srgb, var(--border-light) 66%, transparent);
    --bg-card: #1f2133;
}

/* ========== CSS 變數定義（統一顏色和格式） ========== */
:root {
    /* 主色 */
    --color-primary: var(--color-primary, #4a90e2);
    --color-primary-light: var(--color-primary-light, #7bb3f0);
    --color-primary-lighter: var(--color-primary-lighter, #5da3ed);
    --color-primary-rgba-20: var(--color-primary-rgba-20, rgba(74, 144, 226, 0.2));
    --color-primary-rgba-12: var(--color-primary-rgba-12, rgba(74, 144, 226, 0.12));
    --color-primary-rgba-08: var(--color-primary-rgba-08, rgba(74, 144, 226, 0.08));
    --color-success: #22c55e;
    --color-danger: #ef4444;
    --color-error: var(--color-danger);
    --color-warning: #f59e0b;
    --color-info: #3b82f6;

    /* 背景顏色（預設淺色） */
    --bg-body: #f7f7f8;
    --bg-body-strong: #f0f1f5;
    --bg-white: #ffffff;
    --bg-light: #f6f7fb;
    --bg-lighter: #ffffff;
    --bg-card: #ffffff;
    --bg-soft: #f8fafc;
    --bg-soft-strong: #eef2ff;
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #e8f4fd 100%);
    --bg-warning: #fff3cd;
    --bg-danger: #fee2e2;
    --bg-input-focus: #f8f9ff;
    --bg-hover: #f0f0f0;
    --bg-dark: #000000;
    --bg-toggle: #e0e0e0;
    
    /* 文字顏色（預設淺色背景用深色字） */
    --text-primary: #0f172a;
    --text-secondary: rgba(15, 23, 42, 0.74);
    --text-tertiary: rgba(15, 23, 42, 0.58);
    --text-strong: var(--text-primary);
    --text-white: #ffffff;
    --text-primary-color: var(--color-primary, #4a90e2);
    --text-shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.14);
    --text-shadow-strong: 0 2px 6px rgba(0, 0, 0, 0.24);
    --text-warning: #856404;
    --text-primary-light: #fdf8e9;
    --text-primary-lighter: #fff8d2;
    --text-primary-lightest: #fff9dc;

    /* 邊框與陰影 */
    --border-light: #e5e7eb;
    --border-strong: #d1d5db;
    --border-medium: rgba(0, 0, 0, 0.08);
    --card-border-color: color-mix(in srgb, var(--border-light) 78%, transparent);
    --control-border-color: color-mix(in srgb, var(--border-light) 72%, transparent);
    --table-border-color: color-mix(in srgb, var(--border-light) 70%, transparent);
    --shadow-xs: 0 4px 10px rgba(0, 0, 0, 0.08);
    --shadow-sm: 0 8px 16px rgba(0, 0, 0, 0.12);
    --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.16);
    --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.2);
    --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.12);
    --shadow-soft: 0 8px 18px rgba(0, 0, 0, 0.08);
    --shadow-focus: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);

    /* 圓角 */
    --radius-xs: 8px;
    --radius-sm: 10px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-2xl: 24px;
    --radius-full: 999px;

    /* 間距 */
    --spacing-xxs: 4px;
    --spacing-xs: 6px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 20px;
    --spacing-xxl: 28px;
    --spacing-3xl: 36px;

    /* 字體階層 */
    --font-xs: 11px;
    --font-sm: 13px;
    --font-base: 15px;
    --font-lg: 17px;
    --font-xl: 20px;
    --font-2xl: 24px;
    --font-3xl: 28px;
    --font-4xl: 32px;
    --font-5xl: 40px;
    --font-thin: 300;
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;

    /* 其他 */
    --blur-sm: 12px;
    --blur-md: 18px;
    --blur-lg: 28px;
    --transition-base: 0.3s ease;
    --transition-slow: 0.5s ease;
    
    /* 馬卡龍配色 - 柔和甜美色調 */
    --macaron-primary: #ffb3d9;
    --macaron-primary-light: #ffcce6;
    --macaron-primary-dark: #ff99cc;
    --macaron-accent: #b3d9ff;
    --macaron-accent-light: #cce6ff;
    --macaron-accent-dark: #99ccff;
    --macaron-shadow: rgba(255, 179, 217, 0.35);
    --macaron-shadow-lg: rgba(255, 179, 217, 0.45);

    /* 動作按鈕（會依主題動態混色） */
    --action-buy-bg: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary-light, #7bb3f0) 80%, white) 0%,
        color-mix(in srgb, var(--color-primary, #4a90e2) 85%, var(--color-primary-dark, #2e7bd6)) 100%);
    --action-buy-bg-hover: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary, #4a90e2) 85%, white) 0%,
        color-mix(in srgb, var(--color-primary-dark, #2e7bd6) 90%, black) 100%);
    --action-buy-text: #ffffff;

    --action-dca-bg: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary-light, #7bb3f0) 25%, #5eead4) 0%,
        color-mix(in srgb, var(--color-primary, #4a90e2) 45%, #6366f1) 100%);
    --action-dca-bg-hover: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary, #4a90e2) 30%, #5eead4) 0%,
        color-mix(in srgb, var(--color-primary-dark, #2e7bd6) 55%, #4338ca) 100%);
    --action-dca-text: #ffffff;

    --action-side-bg: color-mix(in srgb, var(--bg-white) 75%, rgba(15, 23, 42, 0.08));
    --action-side-bg-hover: color-mix(in srgb, var(--bg-white) 65%, rgba(15, 23, 42, 0.2));
    --action-side-text: var(--text-primary);
}

/* 主題切換時，強調文字與主文字同步（解決深色主題文字過暗） */
:root[data-theme]:not(.dark) {
    --text-strong: var(--text-primary);
    --bg-card: var(--bg-light);
}

@media (max-width: 768px) {
    .page-chart {
        padding-left: 0;
        padding-right: 0;
    }

    .chart-section {
        margin-bottom: 18px;
    }

    .chart-container {
        height: 300px;
    }

    .chart-container--compare {
        height: 360px;
    }

    .chart-insight {
        padding: 0 16px 16px;
    }

    .dca-item-card {
        padding: 14px;
    }
}

/* ========== 主題顏色定義 ========== */
:root[data-theme="pink"] {
    --color-primary: #ff69b4;
    --color-primary-light: #ffb6d9;
    --color-primary-lighter: #ff9ec7;
    --color-primary-dark: #ff1493;
    --bg-primary: linear-gradient(135deg, #ffeef5 0%, #fff5f9 100%);
    --bg-gradient: linear-gradient(135deg, #ffb6d9 0%, #ff9ec7 100%);
    --bg-gradient-light: linear-gradient(135deg, #ffeef5 0%, #fff5f9 100%);
    --border-primary: #ff69b4;
    --shadow-primary: 0 2px 8px rgba(255, 105, 180, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(255, 105, 180, 0.3);
    --color-primary-rgba-08: rgba(255, 105, 180, 0.08);
    --color-primary-rgba-10: rgba(255, 105, 180, 0.1);
    --color-primary-rgba-15: rgba(255, 105, 180, 0.15);
    --color-primary-rgba-16: rgba(255, 105, 180, 0.16);
    --color-primary-rgba-20: rgba(255, 105, 180, 0.2);
    --color-primary-rgba-25: rgba(255, 105, 180, 0.25);
    --color-primary-rgba-30: rgba(255, 105, 180, 0.3);
    --color-primary-rgba-40: rgba(255, 105, 180, 0.4);
    --color-primary-rgba-28: rgba(255, 105, 180, 0.28);
    --color-primary-rgba-12: rgba(255, 105, 180, 0.12);
    --color-primary-rgba-18: rgba(255, 105, 180, 0.18);
    --color-primary-rgba-22: rgba(255, 105, 180, 0.22);
    --color-primary-rgba-32: rgba(255, 105, 180, 0.32);
    --color-primary-rgba-35: rgba(255, 105, 180, 0.35);
    --color-primary-rgba-42: rgba(255, 105, 180, 0.42);
    --color-primary-rgba-55: rgba(255, 105, 180, 0.55);
    --color-primary-rgba-60: rgba(255, 105, 180, 0.6);
    --color-primary-light-rgba-08: rgba(255, 158, 199, 0.08);
    --color-primary-light-rgba-10: rgba(255, 158, 199, 0.1);
    --color-primary-light-rgba-15: rgba(255, 158, 199, 0.15);
    --color-primary-light-rgba-20: rgba(255, 158, 199, 0.2);
    --color-primary-light-rgba-25: rgba(255, 158, 199, 0.25);
    --color-primary-light-rgba-30: rgba(255, 158, 199, 0.3);
    --color-primary-light-rgba-40: rgba(255, 158, 199, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #fff5f9 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #fff5f9 0%, #ffffff 100%);
}

:root[data-theme="blue"] {
    --color-primary: #4a90e2;
    --color-primary-light: #7bb3f0;
    --color-primary-lighter: #5da3ed;
    --color-primary-dark: #2e7bd6;
    --bg-primary: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%);
    --bg-gradient: linear-gradient(135deg, #7bb3f0 0%, #5da3ed 100%);
    --bg-gradient-light: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%);
    --border-primary: #4a90e2;
    --shadow-primary: 0 2px 8px rgba(74, 144, 226, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(74, 144, 226, 0.3);
    --color-primary-rgba-08: rgba(74, 144, 226, 0.08);
    --color-primary-rgba-10: rgba(74, 144, 226, 0.1);
    --color-primary-rgba-15: rgba(74, 144, 226, 0.15);
    --color-primary-rgba-20: rgba(74, 144, 226, 0.2);
    --color-primary-rgba-25: rgba(74, 144, 226, 0.25);
    --color-primary-rgba-30: rgba(74, 144, 226, 0.3);
    --color-primary-rgba-12: rgba(74, 144, 226, 0.12);
    --color-primary-rgba-18: rgba(74, 144, 226, 0.18);
    --color-primary-light-rgba-08: rgba(123, 179, 240, 0.08);
    --color-primary-light-rgba-10: rgba(123, 179, 240, 0.1);
    --color-primary-light-rgba-15: rgba(123, 179, 240, 0.15);
    --color-primary-light-rgba-20: rgba(123, 179, 240, 0.2);
    --color-primary-light-rgba-25: rgba(123, 179, 240, 0.25);
    --color-primary-light-rgba-30: rgba(123, 179, 240, 0.3);
    --color-primary-light-rgba-40: rgba(123, 179, 240, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #f0f8ff 0%, #ffffff 100%);
}

:root[data-theme="green"] {
    --color-primary: #4caf50;
    --color-primary-light: #81c784;
    --color-primary-lighter: #66bb6a;
    --color-primary-dark: #388e3c;
    --bg-primary: linear-gradient(135deg, #e8f5e9 0%, #f1f8f4 100%);
    --bg-gradient: linear-gradient(135deg, #81c784 0%, #66bb6a 100%);
    --bg-gradient-light: linear-gradient(135deg, #e8f5e9 0%, #f1f8f4 100%);
    --border-primary: #4caf50;
    --shadow-primary: 0 2px 8px rgba(76, 175, 80, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(76, 175, 80, 0.3);
    --color-primary-rgba-08: rgba(76, 175, 80, 0.08);
    --color-primary-rgba-10: rgba(76, 175, 80, 0.1);
    --color-primary-rgba-15: rgba(76, 175, 80, 0.15);
    --color-primary-rgba-20: rgba(76, 175, 80, 0.2);
    --color-primary-rgba-25: rgba(76, 175, 80, 0.25);
    --color-primary-rgba-30: rgba(76, 175, 80, 0.3);
    --color-primary-rgba-12: rgba(76, 175, 80, 0.12);
    --color-primary-rgba-18: rgba(76, 175, 80, 0.18);
    --color-primary-light-rgba-08: rgba(129, 199, 132, 0.08);
    --color-primary-light-rgba-10: rgba(129, 199, 132, 0.1);
    --color-primary-light-rgba-15: rgba(129, 199, 132, 0.15);
    --color-primary-light-rgba-20: rgba(129, 199, 132, 0.2);
    --color-primary-light-rgba-25: rgba(129, 199, 132, 0.25);
    --color-primary-light-rgba-30: rgba(129, 199, 132, 0.3);
    --color-primary-light-rgba-40: rgba(129, 199, 132, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #f1f8f4 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #f1f8f4 0%, #ffffff 100%);
}

:root[data-theme="purple"] {
    --color-primary: #9c27b0;
    --color-primary-light: #ba68c8;
    --color-primary-lighter: #ab47bc;
    --color-primary-dark: #7b1fa2;
    --bg-primary: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%);
    --bg-gradient: linear-gradient(135deg, #ba68c8 0%, #ab47bc 100%);
    --bg-gradient-light: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%);
    --border-primary: #9c27b0;
    --shadow-primary: 0 2px 8px rgba(156, 39, 176, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(156, 39, 176, 0.3);
    --color-primary-rgba-08: rgba(156, 39, 176, 0.08);
    --color-primary-rgba-10: rgba(156, 39, 176, 0.1);
    --color-primary-rgba-15: rgba(156, 39, 176, 0.15);
    --color-primary-rgba-20: rgba(156, 39, 176, 0.2);
    --color-primary-rgba-25: rgba(156, 39, 176, 0.25);
    --color-primary-rgba-30: rgba(156, 39, 176, 0.3);
    --color-primary-rgba-12: rgba(156, 39, 176, 0.12);
    --color-primary-rgba-18: rgba(156, 39, 176, 0.18);
    --color-primary-light-rgba-08: rgba(186, 104, 200, 0.08);
    --color-primary-light-rgba-10: rgba(186, 104, 200, 0.1);
    --color-primary-light-rgba-15: rgba(186, 104, 200, 0.15);
    --color-primary-light-rgba-20: rgba(186, 104, 200, 0.2);
    --color-primary-light-rgba-25: rgba(186, 104, 200, 0.25);
    --color-primary-light-rgba-30: rgba(186, 104, 200, 0.3);
    --color-primary-light-rgba-40: rgba(186, 104, 200, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #fce4ec 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #fce4ec 0%, #ffffff 100%);
}

:root[data-theme="orange"] {
    --color-primary: #ff9800;
    --color-primary-light: #ffb74d;
    --color-primary-lighter: #ffa726;
    --color-primary-dark: #f57c00;
    --bg-primary: linear-gradient(135deg, #fff3e0 0%, #fff8f0 100%);
    --bg-gradient: linear-gradient(135deg, #ffb74d 0%, #ffa726 100%);
    --bg-gradient-light: linear-gradient(135deg, #fff3e0 0%, #fff8f0 100%);
    --border-primary: #ff9800;
    --shadow-primary: 0 2px 8px rgba(255, 152, 0, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(255, 152, 0, 0.3);
    --color-primary-rgba-08: rgba(255, 152, 0, 0.08);
    --color-primary-rgba-10: rgba(255, 152, 0, 0.1);
    --color-primary-rgba-15: rgba(255, 152, 0, 0.15);
    --color-primary-rgba-20: rgba(255, 152, 0, 0.2);
    --color-primary-rgba-25: rgba(255, 152, 0, 0.25);
    --color-primary-rgba-30: rgba(255, 152, 0, 0.3);
    --color-primary-rgba-12: rgba(255, 152, 0, 0.12);
    --color-primary-rgba-18: rgba(255, 152, 0, 0.18);
    --color-primary-light-rgba-08: rgba(255, 183, 77, 0.08);
    --color-primary-light-rgba-10: rgba(255, 183, 77, 0.1);
    --color-primary-light-rgba-15: rgba(255, 183, 77, 0.15);
    --color-primary-light-rgba-20: rgba(255, 183, 77, 0.2);
    --color-primary-light-rgba-25: rgba(255, 183, 77, 0.25);
    --color-primary-light-rgba-30: rgba(255, 183, 77, 0.3);
    --color-primary-light-rgba-40: rgba(255, 183, 77, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #fff8f0 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #fff8f0 0%, #ffffff 100%);

     --text-primary: #1f2937;
     --text-secondary: rgba(31, 41, 55, 0.78);
     --text-tertiary: rgba(31, 41, 55, 0.58);
     --text-shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.12);
     --text-shadow-strong: 0 2px 6px rgba(0, 0, 0, 0.20);
}

:root[data-theme="forest"] {
    --color-primary: #2f855a;
    --color-primary-light: #48b37f;
    --color-primary-lighter: #a7f3d0;
    --color-primary-dark: #1f4d32;
    --bg-primary: linear-gradient(135deg, #03130d 0%, #103524 45%, #2f855a 100%);
    --bg-gradient: linear-gradient(135deg, #1f4d32 0%, #48b37f 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(47, 133, 90, 0.18) 0%, rgba(72, 179, 127, 0.14) 100%);
    --bg-light-gradient: linear-gradient(135deg, #071c14 0%, #123525 60%, #1d4833 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #1d4833 0%, #071c14 100%);
    --bg-card: linear-gradient(135deg, rgba(6, 26, 18, 0.95) 0%, rgba(17, 51, 36, 0.92) 55%, rgba(72, 179, 127, 0.18) 100%);
    --bg-white: rgba(6, 22, 17, 0.9);
    --bg-light: rgba(13, 35, 25, 0.82);
    --bg-lighter: rgba(20, 54, 35, 0.72);
    --text-primary: rgba(236, 252, 243, 0.95);
    --text-secondary: rgba(209, 250, 229, 0.85);
    --text-tertiary: rgba(167, 243, 208, 0.72);
    --border-light: rgba(167, 230, 203, 0.18);
    --border-medium: rgba(72, 179, 127, 0.35);
    --card-border-color: rgba(72, 179, 127, 0.4);
    --card-border-color-strong: rgba(47, 133, 90, 0.6);
    --border-primary: #2f855a;
    --shadow-primary: 0 2px 10px rgba(17, 51, 36, 0.45);
    --shadow-primary-lg: 0 8px 24px rgba(6, 15, 11, 0.6);
    --color-primary-rgba-08: rgba(47, 133, 90, 0.08);
    --color-primary-rgba-10: rgba(47, 133, 90, 0.10);
    --color-primary-rgba-12: rgba(47, 133, 90, 0.12);
    --color-primary-rgba-15: rgba(47, 133, 90, 0.15);
    --color-primary-rgba-20: rgba(47, 133, 90, 0.20);
    --color-primary-rgba-25: rgba(47, 133, 90, 0.25);
    --color-primary-rgba-30: rgba(47, 133, 90, 0.30);
    --color-primary-rgba-40: rgba(47, 133, 90, 0.40);
    --color-primary-light-rgba-08: rgba(72, 179, 127, 0.08);
    --color-primary-light-rgba-10: rgba(72, 179, 127, 0.10);
    --color-primary-light-rgba-12: rgba(72, 179, 127, 0.12);
    --color-primary-light-rgba-15: rgba(72, 179, 127, 0.15);
    --color-primary-light-rgba-20: rgba(72, 179, 127, 0.20);
    --color-primary-light-rgba-25: rgba(72, 179, 127, 0.25);
    --color-primary-light-rgba-30: rgba(72, 179, 127, 0.30);
    --color-primary-light-rgba-40: rgba(72, 179, 127, 0.40);
}

:root[data-theme="cyan"] {
    --color-primary: #00bcd4;
    --color-primary-light: #4dd0e1;
    --color-primary-lighter: #26c6da;
    --color-primary-dark: #0097a7;
    --bg-primary: linear-gradient(135deg, #e0f7fa 0%, #f0fdfe 100%);
    --bg-gradient: linear-gradient(135deg, #4dd0e1 0%, #26c6da 100%);
    --bg-gradient-light: linear-gradient(135deg, #e0f7fa 0%, #f0fdfe 100%);
    --border-primary: #00bcd4;
    --shadow-primary: 0 2px 8px rgba(0, 188, 212, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(0, 188, 212, 0.3);
    --color-primary-rgba-08: rgba(0, 188, 212, 0.08);
    --color-primary-rgba-10: rgba(0, 188, 212, 0.1);
    --color-primary-rgba-15: rgba(0, 188, 212, 0.15);
    --color-primary-rgba-20: rgba(0, 188, 212, 0.2);
    --color-primary-rgba-25: rgba(0, 188, 212, 0.25);
    --color-primary-rgba-30: rgba(0, 188, 212, 0.3);
    --color-primary-rgba-12: rgba(0, 188, 212, 0.12);
    --color-primary-rgba-18: rgba(0, 188, 212, 0.18);
    --color-primary-light-rgba-08: rgba(77, 208, 225, 0.08);
    --color-primary-light-rgba-10: rgba(77, 208, 225, 0.1);
    --color-primary-light-rgba-15: rgba(77, 208, 225, 0.15);
    --color-primary-light-rgba-20: rgba(77, 208, 225, 0.2);
    --color-primary-light-rgba-25: rgba(77, 208, 225, 0.25);
    --color-primary-light-rgba-30: rgba(77, 208, 225, 0.3);
    --color-primary-light-rgba-40: rgba(77, 208, 225, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #f0fdfe 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #f0fdfe 0%, #ffffff 100%);
}

:root[data-theme="star"] {
    --color-primary: #8b7cf6;
    --color-primary-light: #a594f8;
    --color-primary-lighter: #9b8af7;
    --color-primary-dark: #6b5dd9;
    --bg-primary: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
    --bg-gradient: linear-gradient(135deg, #a594f8 0%, #9b8af7 100%);
    --bg-gradient-light: linear-gradient(135deg, #1a1f3a 0%, #2a2f4a 100%);
    --border-primary: #8b7cf6;
    --shadow-primary: 0 2px 8px rgba(139, 124, 246, 0.4);
    --shadow-primary-lg: 0 4px 12px rgba(139, 124, 246, 0.5);
    --color-primary-rgba-08: rgba(139, 124, 246, 0.08);
    --color-primary-rgba-10: rgba(139, 124, 246, 0.1);
    --color-primary-rgba-15: rgba(139, 124, 246, 0.15);
    --color-primary-rgba-20: rgba(139, 124, 246, 0.2);
    --color-primary-rgba-25: rgba(139, 124, 246, 0.25);
    --color-primary-rgba-30: rgba(139, 124, 246, 0.3);
    --color-primary-rgba-12: rgba(139, 124, 246, 0.12);
    --color-primary-rgba-18: rgba(139, 124, 246, 0.18);
    --color-primary-light-rgba-08: rgba(165, 148, 248, 0.08);
    --color-primary-light-rgba-10: rgba(165, 148, 248, 0.1);
    --color-primary-light-rgba-15: rgba(165, 148, 248, 0.15);
    --color-primary-light-rgba-20: rgba(165, 148, 248, 0.2);
    --color-primary-light-rgba-25: rgba(165, 148, 248, 0.25);
    --color-primary-light-rgba-30: rgba(165, 148, 248, 0.3);
    --color-primary-light-rgba-40: rgba(165, 148, 248, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #1a1f3a 0%, #2a2f4a 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #2a2f4a 0%, #1a1f3a 100%);
    --bg-white: #1a1f3a;
    --bg-light: #2a2f4a;
    --bg-lighter: #3a3f5a;
    --text-primary: #ffffff;
    --text-secondary: #ffffff;
    --text-tertiary: #ffffff;
    --border-light: rgba(139, 124, 246, 0.2);
    --border-medium: rgba(139, 124, 246, 0.3);
}

/* ========== 新增主題：紅色主題 ========== */
:root[data-theme="red"] {
    --color-primary: #e53935;
    --color-primary-light: #ef5350;
    --color-primary-lighter: #f57373;
    --color-primary-dark: #c62828;
    --bg-primary: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
    --bg-gradient: linear-gradient(135deg, #ef5350 0%, #e53935 100%);
    --bg-gradient-light: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
    --border-primary: #e53935;
    --shadow-primary: 0 2px 8px rgba(229, 57, 53, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(229, 57, 53, 0.3);
    --color-primary-rgba-08: rgba(229, 57, 53, 0.08);
    --color-primary-rgba-10: rgba(229, 57, 53, 0.1);
    --color-primary-rgba-15: rgba(229, 57, 53, 0.15);
    --color-primary-rgba-20: rgba(229, 57, 53, 0.2);
    --color-primary-rgba-25: rgba(229, 57, 53, 0.25);
    --color-primary-rgba-30: rgba(229, 57, 53, 0.3);
    --color-primary-rgba-12: rgba(229, 57, 53, 0.12);
    --color-primary-rgba-18: rgba(229, 57, 53, 0.18);
    --color-primary-light-rgba-08: rgba(239, 83, 80, 0.08);
    --color-primary-light-rgba-10: rgba(239, 83, 80, 0.1);
    --color-primary-light-rgba-15: rgba(239, 83, 80, 0.15);
    --color-primary-light-rgba-20: rgba(239, 83, 80, 0.2);
    --color-primary-light-rgba-25: rgba(239, 83, 80, 0.25);
    --color-primary-light-rgba-30: rgba(239, 83, 80, 0.3);
    --color-primary-light-rgba-40: rgba(239, 83, 80, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #fce4ec 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #fce4ec 0%, #ffffff 100%);
}

/* ========== 新增主題：黃色主題 ========== */
:root[data-theme="yellow"] {
    --color-primary: #fbc02d;
    --color-primary-light: #fdd835;
    --color-primary-lighter: #ffeb3b;
    --color-primary-dark: #f9a825;
    --bg-primary: linear-gradient(135deg, #fffde7 0%, #fffef5 100%);
    --bg-gradient: linear-gradient(135deg, #fdd835 0%, #fbc02d 100%);
    --bg-gradient-light: linear-gradient(135deg, #fffde7 0%, #fffef5 100%);
    --border-primary: #fbc02d;
    --shadow-primary: 0 2px 8px rgba(251, 192, 45, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(251, 192, 45, 0.3);
    --color-primary-rgba-08: rgba(251, 192, 45, 0.08);
    --color-primary-rgba-10: rgba(251, 192, 45, 0.1);
    --color-primary-rgba-15: rgba(251, 192, 45, 0.15);
    --color-primary-rgba-20: rgba(251, 192, 45, 0.2);
    --color-primary-rgba-25: rgba(251, 192, 45, 0.25);
    --color-primary-rgba-30: rgba(251, 192, 45, 0.3);
    --color-primary-rgba-12: rgba(251, 192, 45, 0.12);
    --color-primary-rgba-18: rgba(251, 192, 45, 0.18);
    --color-primary-light-rgba-08: rgba(253, 216, 53, 0.08);
    --color-primary-light-rgba-10: rgba(253, 216, 53, 0.1);
    --color-primary-light-rgba-15: rgba(253, 216, 53, 0.15);
    --color-primary-light-rgba-20: rgba(253, 216, 53, 0.2);
    --color-primary-light-rgba-25: rgba(253, 216, 53, 0.25);
    --color-primary-light-rgba-30: rgba(253, 216, 53, 0.3);
    --color-primary-light-rgba-40: rgba(253, 216, 53, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #fffef5 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #fffef5 0%, #ffffff 100%);

     --text-primary: #1f2937;
     --text-secondary: rgba(31, 41, 55, 0.78);
     --text-tertiary: rgba(31, 41, 55, 0.58);
     --text-shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.10);
     --text-shadow-strong: 0 2px 6px rgba(0, 0, 0, 0.18);
}

/* ========== 新增主題：靛藍色主題 ========== */
:root[data-theme="indigo"] {
    --color-primary: #5c6bc0;
    --color-primary-light: #7986cb;
    --color-primary-lighter: #9fa8da;
    --color-primary-dark: #3f51b5;
    --bg-primary: linear-gradient(135deg, #e8eaf6 0%, #f3f4f9 100%);
    --bg-gradient: linear-gradient(135deg, #7986cb 0%, #5c6bc0 100%);
    --bg-gradient-light: linear-gradient(135deg, #e8eaf6 0%, #f3f4f9 100%);
    --border-primary: #5c6bc0;
    --shadow-primary: 0 2px 8px rgba(92, 107, 192, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(92, 107, 192, 0.3);
    --color-primary-rgba-08: rgba(92, 107, 192, 0.08);
    --color-primary-rgba-10: rgba(92, 107, 192, 0.1);
    --color-primary-rgba-15: rgba(92, 107, 192, 0.15);
    --color-primary-rgba-20: rgba(92, 107, 192, 0.2);
    --color-primary-rgba-25: rgba(92, 107, 192, 0.25);
    --color-primary-rgba-30: rgba(92, 107, 192, 0.3);
    --color-primary-rgba-12: rgba(92, 107, 192, 0.12);
    --color-primary-rgba-18: rgba(92, 107, 192, 0.18);
    --color-primary-light-rgba-08: rgba(121, 134, 203, 0.08);
    --color-primary-light-rgba-10: rgba(121, 134, 203, 0.1);
    --color-primary-light-rgba-15: rgba(121, 134, 203, 0.15);
    --color-primary-light-rgba-20: rgba(121, 134, 203, 0.2);
    --color-primary-light-rgba-25: rgba(121, 134, 203, 0.25);
    --color-primary-light-rgba-30: rgba(121, 134, 203, 0.3);
    --color-primary-light-rgba-40: rgba(121, 134, 203, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #f3f4f9 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #f3f4f9 0%, #ffffff 100%);
}

/* ========== 新增主題：茶色主題 ========== */
:root[data-theme="teal"] {
    --color-primary: #26a69a;
    --color-primary-light: #4db6ac;
    --color-primary-lighter: #80cbc4;
    --color-primary-dark: #00897b;
    --bg-primary: linear-gradient(135deg, #e0f2f1 0%, #f0f9f8 100%);
    --bg-gradient: linear-gradient(135deg, #4db6ac 0%, #26a69a 100%);
    --bg-gradient-light: linear-gradient(135deg, #e0f2f1 0%, #f0f9f8 100%);
    --border-primary: #26a69a;
    --shadow-primary: 0 2px 8px rgba(38, 166, 154, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(38, 166, 154, 0.3);
    --color-primary-rgba-08: rgba(38, 166, 154, 0.08);
    --color-primary-rgba-10: rgba(38, 166, 154, 0.1);
    --color-primary-rgba-15: rgba(38, 166, 154, 0.15);
    --color-primary-rgba-20: rgba(38, 166, 154, 0.2);
    --color-primary-rgba-25: rgba(38, 166, 154, 0.25);
    --color-primary-rgba-30: rgba(38, 166, 154, 0.3);
    --color-primary-rgba-12: rgba(38, 166, 154, 0.12);
    --color-primary-rgba-18: rgba(38, 166, 154, 0.18);
    --color-primary-light-rgba-08: rgba(77, 182, 172, 0.08);
    --color-primary-light-rgba-10: rgba(77, 182, 172, 0.1);
    --color-primary-light-rgba-15: rgba(77, 182, 172, 0.15);
    --color-primary-light-rgba-20: rgba(77, 182, 172, 0.2);
    --color-primary-light-rgba-25: rgba(77, 182, 172, 0.25);
    --color-primary-light-rgba-30: rgba(77, 182, 172, 0.3);
    --color-primary-light-rgba-40: rgba(77, 182, 172, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #f0f9f8 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #f0f9f8 0%, #ffffff 100%);
}


:root[data-theme="aurora"] {
    --color-primary: #00d4ff;
    --color-primary-light: #34d399;
    --color-primary-lighter: #a78bfa;
    --color-primary-dark: #0284c7;
    --bg-primary: linear-gradient(135deg, #071a52 0%, #0b8457 50%, #7c3aed 100%);
    --bg-gradient: linear-gradient(135deg, #00d4ff 0%, #34d399 50%, #a78bfa 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(52, 211, 153, 0.12) 50%, rgba(167, 139, 250, 0.12) 100%);
    --border-primary: #00d4ff;
    --shadow-primary: 0 2px 8px rgba(0, 212, 255, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(0, 212, 255, 0.3);
    --color-primary-rgba-08: rgba(0, 212, 255, 0.08);
    --color-primary-rgba-10: rgba(0, 212, 255, 0.1);
    --color-primary-rgba-15: rgba(0, 212, 255, 0.15);
    --color-primary-rgba-20: rgba(0, 212, 255, 0.2);
    --color-primary-rgba-25: rgba(0, 212, 255, 0.25);
    --color-primary-rgba-30: rgba(0, 212, 255, 0.3);
    --color-primary-rgba-12: rgba(0, 212, 255, 0.12);
    --color-primary-rgba-18: rgba(0, 212, 255, 0.18);
    --color-primary-light-rgba-08: rgba(52, 211, 153, 0.08);
    --color-primary-light-rgba-10: rgba(52, 211, 153, 0.1);
    --color-primary-light-rgba-15: rgba(52, 211, 153, 0.15);
    --color-primary-light-rgba-20: rgba(52, 211, 153, 0.2);
    --color-primary-light-rgba-25: rgba(52, 211, 153, 0.25);
    --color-primary-light-rgba-30: rgba(52, 211, 153, 0.3);
    --color-primary-light-rgba-40: rgba(52, 211, 153, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, rgba(0, 212, 255, 0.08) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(0, 212, 255, 0.08) 0%, #ffffff 100%);
}


:root[data-theme="firefly"] {
    --color-primary: #facc15;
    --color-primary-light: #fde047;
    --color-primary-lighter: #fef9c3;
    --color-primary-dark: #eab308;
    --bg-primary: linear-gradient(135deg, #0b1020 0%, #1a2b3f 100%);
    --bg-gradient: linear-gradient(135deg, rgba(250, 204, 21, 0.35) 0%, rgba(96, 165, 250, 0.2) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(250, 204, 21, 0.12) 0%, rgba(250, 204, 21, 0.08) 100%);
    --border-primary: #facc15;
    --shadow-primary: 0 2px 8px rgba(250, 204, 21, 0.35);
    --shadow-primary-lg: 0 4px 12px rgba(250, 204, 21, 0.45);
    --color-primary-rgba-08: rgba(250, 204, 21, 0.08);
    --color-primary-rgba-10: rgba(250, 204, 21, 0.1);
    --color-primary-rgba-15: rgba(250, 204, 21, 0.15);
    --color-primary-rgba-20: rgba(250, 204, 21, 0.2);
    --color-primary-rgba-25: rgba(250, 204, 21, 0.25);
    --color-primary-rgba-30: rgba(250, 204, 21, 0.3);
    --color-primary-rgba-12: rgba(250, 204, 21, 0.12);
    --color-primary-rgba-18: rgba(250, 204, 21, 0.18);
    --color-primary-light-rgba-08: rgba(253, 224, 71, 0.08);
    --color-primary-light-rgba-10: rgba(253, 224, 71, 0.1);
    --color-primary-light-rgba-15: rgba(253, 224, 71, 0.15);
    --color-primary-light-rgba-20: rgba(253, 224, 71, 0.2);
    --color-primary-light-rgba-25: rgba(253, 224, 71, 0.25);
    --color-primary-light-rgba-30: rgba(253, 224, 71, 0.3);
    --color-primary-light-rgba-40: rgba(253, 224, 71, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #1a2b3f 0%, #0b1020 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #0b1020 0%, #1a2b3f 100%);
    --bg-white: #121a2b;
    --bg-light: #1a2b3f;
    --bg-lighter: #243449;
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.9);
    --text-tertiary: rgba(255, 255, 255, 0.75);
    --border-light: rgba(250, 204, 21, 0.2);
    --border-medium: rgba(250, 204, 21, 0.3);
}

:root[data-theme="snow"] {
    --color-primary: #93c5fd;
    --color-primary-light: #bfdbfe;
    --color-primary-lighter: #dbeafe;
    --color-primary-dark: #60a5fa;
    --bg-primary: linear-gradient(135deg, #e8f1ff 0%, #ffffff 100%);
    --bg-gradient: linear-gradient(135deg, #bfdbfe 0%, #93c5fd 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(191, 219, 254, 0.22) 0%, rgba(147, 197, 253, 0.12) 100%);
    --border-primary: #93c5fd;
    --shadow-primary: 0 2px 8px rgba(147, 197, 253, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(147, 197, 253, 0.3);
    --color-primary-rgba-08: rgba(147, 197, 253, 0.08);
    --color-primary-rgba-10: rgba(147, 197, 253, 0.1);
    --color-primary-rgba-15: rgba(147, 197, 253, 0.15);
    --color-primary-rgba-20: rgba(147, 197, 253, 0.2);
    --color-primary-rgba-25: rgba(147, 197, 253, 0.25);
    --color-primary-rgba-30: rgba(147, 197, 253, 0.3);
    --color-primary-rgba-12: rgba(147, 197, 253, 0.12);
    --color-primary-rgba-18: rgba(147, 197, 253, 0.18);
    --color-primary-light-rgba-08: rgba(191, 219, 254, 0.08);
    --color-primary-light-rgba-10: rgba(191, 219, 254, 0.1);
    --color-primary-light-rgba-15: rgba(191, 219, 254, 0.15);
    --color-primary-light-rgba-20: rgba(191, 219, 254, 0.2);
    --color-primary-light-rgba-25: rgba(191, 219, 254, 0.25);
    --color-primary-light-rgba-30: rgba(191, 219, 254, 0.3);
    --color-primary-light-rgba-40: rgba(191, 219, 254, 0.4);
    --bg-light-gradient: linear-gradient(135deg, #ffffff 0%, #e8f1ff 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #e8f1ff 0%, #ffffff 100%);
}

:root[data-theme="cute"] {
    --color-primary: #4dd0e1;
    --color-primary-light: #81e6ef;
    --color-primary-lighter: #b2f5f9;
    --color-primary-dark: #00acc1;
    --bg-primary: linear-gradient(135deg, rgba(255, 255, 255, 0.78) 0%, rgba(230, 247, 255, 0.72) 100%);
    --bg-gradient: linear-gradient(135deg, rgba(129, 230, 239, 0.9) 0%, rgba(77, 208, 225, 0.9) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(230, 247, 255, 0.55) 100%);
    --border-primary: #4dd0e1;
    --shadow-primary: 0 2px 8px rgba(77, 208, 225, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(77, 208, 225, 0.3);
    --color-primary-rgba-08: rgba(77, 208, 225, 0.08);
    --color-primary-rgba-10: rgba(77, 208, 225, 0.1);
    --color-primary-rgba-15: rgba(77, 208, 225, 0.15);
    --color-primary-rgba-20: rgba(77, 208, 225, 0.2);
    --color-primary-rgba-25: rgba(77, 208, 225, 0.25);
    --color-primary-rgba-30: rgba(77, 208, 225, 0.3);
    --color-primary-rgba-12: rgba(77, 208, 225, 0.12);
    --color-primary-rgba-18: rgba(77, 208, 225, 0.18);
    --color-primary-light-rgba-08: rgba(129, 230, 239, 0.08);
    --color-primary-light-rgba-10: rgba(129, 230, 239, 0.1);
    --color-primary-light-rgba-15: rgba(129, 230, 239, 0.15);
    --color-primary-light-rgba-20: rgba(129, 230, 239, 0.2);
    --color-primary-light-rgba-25: rgba(129, 230, 239, 0.25);
    --color-primary-light-rgba-30: rgba(129, 230, 239, 0.3);
    --color-primary-light-rgba-40: rgba(129, 230, 239, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(255, 255, 255, 0.75) 0%, rgba(230, 247, 255, 0.55) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(230, 247, 255, 0.55) 0%, rgba(255, 255, 255, 0.75) 100%);
}

:root[data-theme="cute"] body {
    background-image:
        linear-gradient(135deg, rgba(255, 255, 255, 0.74) 0%, rgba(230, 247, 255, 0.66) 100%),
        url("image/BMG.jpg"),
        linear-gradient(135deg, #e6f7ff 0%, #ffffff 100%);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

:root[data-theme="forest"] body {
    background-image:
        linear-gradient(135deg, rgba(3, 19, 13, 0.92) 0%, rgba(16, 53, 36, 0.85) 50%, rgba(47, 133, 90, 0.65) 100%),
        url("https://i.pinimg.com/1200x/38/38/dc/3838dc7e5b75fe3f285c01b0eb883c93.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

:root[data-theme="auroraflow"] {
    --color-primary: #34d399;
    --color-primary-light: #60f5d7;
    --color-primary-lighter: #a5f3fc;
    --color-primary-dark: #0ea5e9;
    --bg-primary: linear-gradient(135deg, #0f172a 0%, #2563eb 35%, #34d399 70%, #a855f7 100%);
    --bg-gradient: linear-gradient(135deg, #2563eb 0%, #34d399 50%, #a855f7 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(37, 99, 235, 0.18) 0%, rgba(52, 211, 153, 0.15) 50%, rgba(168, 85, 247, 0.18) 100%);
    --border-primary: #34d399;
    --shadow-primary: 0 2px 12px rgba(52, 211, 153, 0.35);
    --shadow-primary-lg: 0 6px 20px rgba(37, 99, 235, 0.35);
    --bg-white: rgba(8, 11, 27, 0.85);
    --bg-light: rgba(37, 50, 89, 0.6);
    --bg-lighter: rgba(59, 74, 124, 0.45);
    --text-primary: #f0f9ff;
    --text-secondary: rgba(240, 249, 255, 0.82);
    --text-tertiary: rgba(240, 249, 255, 0.68);
    --border-light: rgba(240, 249, 255, 0.2);
    --border-medium: rgba(240, 249, 255, 0.35);
}

:root[data-theme="auroraflow"] body::before {
    opacity: 0.65;
    background-image:
        radial-gradient(circle at 20% 20%, rgba(168, 85, 247, 0.55), transparent 55%),
        radial-gradient(circle at 80% 30%, rgba(34, 211, 238, 0.45), transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(52, 211, 153, 0.4), transparent 45%);
    mix-blend-mode: screen;
    animation: auroraSweep 16s ease-in-out infinite alternate;
}

:root[data-theme="meteor"] {
    --color-primary: #60a5fa;
    --color-primary-light: #93c5fd;
    --color-primary-lighter: #bfdbfe;
    --color-primary-dark: #1d4ed8;
    --bg-primary: linear-gradient(135deg, #020617 0%, #0f172a 45%, #1d4ed8 100%);
    --bg-gradient: linear-gradient(135deg, #1d4ed8 0%, #60a5fa 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(2, 6, 23, 0.9) 0%, rgba(96, 165, 250, 0.18) 100%);
    --border-primary: #60a5fa;
    --shadow-primary: 0 2px 12px rgba(96, 165, 250, 0.35);
    --shadow-primary-lg: 0 8px 24px rgba(2, 6, 23, 0.65);
    --bg-white: rgba(8, 10, 26, 0.9);
    --bg-light: rgba(10, 15, 31, 0.75);
    --bg-lighter: rgba(26, 35, 65, 0.55);
    --text-primary: #e2e8f0;
    --text-secondary: rgba(226, 232, 240, 0.78);
    --text-tertiary: rgba(226, 232, 240, 0.6);
    --border-light: rgba(226, 232, 240, 0.22);
    --border-medium: rgba(226, 232, 240, 0.32);
}

:root[data-theme="meteor"] body::before {
    opacity: 0.5;
    background-image:
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.25), transparent 40%),
        radial-gradient(circle at 70% 10%, rgba(148, 163, 184, 0.25), transparent 35%),
        repeating-linear-gradient(120deg, rgba(96, 165, 250, 0.4), rgba(96, 165, 250, 0.05) 90px);
    mix-blend-mode: screen;
    animation: meteorTrail 18s linear infinite;
}

:root[data-theme="cyber"] {
    --color-primary: #00f5ff;
    --color-primary-light: #5ef3fe;
    --color-primary-lighter: #a5f3fc;
    --color-primary-dark: #0ea5e9;
    --bg-primary: linear-gradient(135deg, #050816 0%, #0f172a 35%, #00f5ff 70%, #ff2d95 100%);
    --bg-gradient: linear-gradient(135deg, #00f5ff 0%, #ff2d95 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(0, 245, 255, 0.22) 0%, rgba(255, 45, 149, 0.16) 100%);
    --border-primary: #00f5ff;
    --shadow-primary: 0 2px 12px rgba(0, 245, 255, 0.4);
    --shadow-primary-lg: 0 6px 20px rgba(255, 45, 149, 0.35);
    --bg-white: rgba(8, 10, 26, 0.92);
    --bg-light: rgba(15, 23, 42, 0.78);
    --bg-lighter: rgba(40, 51, 89, 0.52);
    --text-primary: rgba(255, 255, 255, 0.96);
    --text-secondary: rgba(244, 244, 255, 0.84);
    --text-tertiary: rgba(244, 244, 255, 0.65);
    --border-light: rgba(255, 255, 255, 0.2);
    --border-medium: rgba(0, 245, 255, 0.35);
}

:root[data-theme="cyber"] body::before {
    opacity: 0.45;
    background-image:
        linear-gradient(120deg, rgba(0, 245, 255, 0.4), rgba(255, 45, 149, 0.35)),
        repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.08), transparent 2px, transparent 50px);
    backdrop-filter: blur(0px);
    mix-blend-mode: screen;
    animation: cyberPulse 10s ease-in-out infinite alternate, gridScroll 25s linear infinite;
}


:root[data-theme="neon"] {
    --color-primary: #7c3aed;
    --color-primary-light: #a78bfa;
    --color-primary-lighter: #c4b5fd;
    --color-primary-dark: #5b21b6;
    --bg-primary: linear-gradient(135deg, #0b1020 0%, #1f1147 50%, #00d4ff 100%);
    --bg-gradient: linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(124, 58, 237, 0.12) 0%, rgba(0, 212, 255, 0.10) 100%);
    --border-primary: #7c3aed;
    --shadow-primary: 0 2px 8px rgba(124, 58, 237, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(0, 212, 255, 0.22);

     --bg-white: rgba(17, 24, 39, 0.78);
     --bg-light: rgba(17, 24, 39, 0.62);
     --bg-lighter: rgba(17, 24, 39, 0.48);
     --text-primary: rgba(255, 255, 255, 0.96);
     --text-secondary: rgba(255, 255, 255, 0.86);
     --text-tertiary: rgba(255, 255, 255, 0.72);
     --border-light: rgba(255, 255, 255, 0.14);
     --border-medium: rgba(255, 255, 255, 0.20);
     --bg-card: linear-gradient(135deg, rgba(15, 23, 42, 0.82) 0%, rgba(23, 18, 52, 0.9) 48%, rgba(0, 212, 255, 0.14) 100%);
     --card-border-color: rgba(0, 212, 255, 0.45);
     --card-border-color-strong: rgba(124, 58, 237, 0.6);
}

:root[data-theme="neon"] .record-card {
    background: var(--bg-card);
    border: 2px solid var(--card-border-color, rgba(124, 58, 237, 0.45));
    box-shadow: 0 18px 38px rgba(3, 7, 18, 0.75), 0 0 24px rgba(0, 212, 255, 0.25);
    color: var(--text-primary);
}

:root[data-theme="neon"] .record-card::before,
:root[data-theme="neon"] .record-card::after {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.18), rgba(124, 58, 237, 0.16));
}

:root[data-theme="neon"] .record-card .record-card-details > div {
    border: 1px solid rgba(0, 212, 255, 0.3);
    box-shadow: inset 0 0 16px rgba(11, 17, 31, 0.45);
}

:root[data-theme="neon"] .record-card-type,
:root[data-theme="neon"] .record-card-type.buy,
:root[data-theme="neon"] .record-card-type.sell,
:root[data-theme="neon"] .record-card-type.dividend {
    background: linear-gradient(135deg, rgba(124, 58, 237, 0.95), rgba(0, 212, 255, 0.8));
    color: #fdf2ff;
    border: 1px solid rgba(0, 212, 255, 0.4);
}

/* ========== 新增主題：午夜深色主題 ========== */
:root[data-theme="midnight"] {
    --color-primary: #6366f1;
    --color-primary-light: #818cf8;
    --color-primary-lighter: #a5b4fc;
    --color-primary-dark: #4f46e5;
    --bg-primary: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    --bg-gradient: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(99, 102, 241, 0.16) 0%, rgba(79, 70, 229, 0.12) 100%);
    --bg-light-gradient: linear-gradient(135deg, #101828 0%, #1f2937 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #1f2937 0%, #0f172a 100%);
    --bg-card: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(31, 45, 68, 0.95) 55%, rgba(79, 70, 229, 0.15) 100%);
    --card-border-color: rgba(99, 102, 241, 0.35);
    --card-border-color-strong: rgba(79, 70, 229, 0.55);
    --border-primary: #6366f1;
    --shadow-primary: 0 2px 8px rgba(99, 102, 241, 0.24);
    --shadow-primary-lg: 0 4px 14px rgba(79, 70, 229, 0.2);

    --bg-white: rgba(15, 23, 42, 0.85);
    --bg-light: rgba(30, 41, 59, 0.75);
    --bg-lighter: rgba(51, 65, 85, 0.65);
    --text-primary: rgba(248, 250, 252, 0.95);
    --text-secondary: rgba(248, 250, 252, 0.85);
    --text-tertiary: rgba(248, 250, 252, 0.70);
    --border-light: rgba(248, 250, 252, 0.12);
    --border-medium: rgba(148, 163, 184, 0.25);

    --color-primary-rgba-08: rgba(99, 102, 241, 0.08);
    --color-primary-rgba-10: rgba(99, 102, 241, 0.10);
    --color-primary-rgba-12: rgba(99, 102, 241, 0.12);
    --color-primary-rgba-15: rgba(99, 102, 241, 0.15);
    --color-primary-rgba-18: rgba(99, 102, 241, 0.18);
    --color-primary-rgba-20: rgba(99, 102, 241, 0.20);
    --color-primary-rgba-25: rgba(99, 102, 241, 0.25);
    --color-primary-rgba-30: rgba(99, 102, 241, 0.30);
    --color-primary-rgba-40: rgba(99, 102, 241, 0.40);

    --color-primary-light-rgba-08: rgba(129, 140, 248, 0.08);
    --color-primary-light-rgba-10: rgba(129, 140, 248, 0.10);
    --color-primary-light-rgba-12: rgba(129, 140, 248, 0.12);
    --color-primary-light-rgba-15: rgba(129, 140, 248, 0.15);
    --color-primary-light-rgba-20: rgba(129, 140, 248, 0.20);
    --color-primary-light-rgba-25: rgba(129, 140, 248, 0.25);
    --color-primary-light-rgba-30: rgba(129, 140, 248, 0.30);
    --color-primary-light-rgba-40: rgba(129, 140, 248, 0.40);
}

:root[data-theme="midnight"] .record-card-amount {
    color: color-mix(in srgb, var(--color-primary-lighter, var(--color-primary-light)) 92%, var(--text-primary) 8%);
    text-shadow: 0 2px 10px color-mix(in srgb, rgba(0, 0, 0, 0.85) 70%, transparent);
}

:root[data-theme="neon"] .record-card-date {
    background: rgba(255, 255, 255, 0.08);
    color: rgba(255, 255, 255, 0.85);
    border-color: rgba(0, 212, 255, 0.35);
}

:root[data-theme="neon"] .record-card:hover {
    box-shadow: 0 22px 46px rgba(3, 7, 18, 0.85), 0 0 30px rgba(0, 212, 255, 0.35);
    border-color: var(--card-border-color-strong, rgba(124, 58, 237, 0.65));
}

:root[data-theme="neon"] .page-ledger {
    background: linear-gradient(180deg, #050816 0%, #0f172a 55%, #00bcd4 100%);
}

:root[data-theme="neon"] .ledger-summary,
:root[data-theme="neon"] .transaction-group {
    background: linear-gradient(145deg, rgba(12, 10, 30, 0.8) 0%, rgba(23, 18, 52, 0.9) 60%, rgba(0, 212, 255, 0.15) 100%);
    border: 1px solid rgba(124, 58, 237, 0.25);
    box-shadow: 0 18px 32px rgba(3, 6, 20, 0.65);
}

:root[data-theme="neon"] .group-header {
    color: #a78bfa;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
}

:root[data-theme="neon"] .transaction-item {
    background: rgba(5, 8, 22, 0.92);
    border: 1px solid rgba(0, 212, 255, 0.12);
    box-shadow: 0 12px 28px rgba(3, 4, 12, 0.55);
    color: #1f2937;
}

:root[data-theme="neon"] .transaction-item:hover {
    background: linear-gradient(135deg, rgba(124, 58, 237, 0.22), rgba(0, 212, 255, 0.18));
    border-color: rgba(0, 212, 255, 0.35);
    box-shadow: 0 16px 32px rgba(3, 7, 18, 0.75);
}

:root[data-theme="neon"] .transaction-category,
:root[data-theme="neon"] .transaction-account,
:root[data-theme="neon"] .transaction-member,
:root[data-theme="neon"] .transaction-note {
    color: rgba(248, 250, 252, 0.86);
}

:root[data-theme="neon"] .transaction-amount-wrapper {
    background: linear-gradient(135deg, rgba(13, 17, 29, 0.95), rgba(23, 18, 52, 0.92));
    border: 1px solid rgba(0, 212, 255, 0.3);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.45), inset 0 0 10px rgba(0, 212, 255, 0.12);
}

:root[data-theme="neon"] .transaction-amount {
    color: rgba(255, 255, 255, 0.97);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
}

:root[data-theme="neon"] .transaction-amount.expense {
    color: #fb7185;
}

:root[data-theme="neon"] .transaction-amount.income {
    color: #34d399;
}

:root[data-theme="neon"] .transaction-delete-btn {
    background: rgba(15, 23, 42, 0.8);
    color: rgba(248, 250, 252, 0.75);
    border: 1px solid rgba(124, 58, 237, 0.35);
}

:root[data-theme="neon"] .transaction-delete-btn:hover {
    background: rgba(239, 68, 68, 0.25);
    border-color: rgba(239, 68, 68, 0.45);
    color: #fee2e2;
    box-shadow: 0 4px 10px rgba(239, 68, 68, 0.35);
}

:root[data-theme="neon"] .ledger-type-tab {
    background: rgba(12, 10, 30, 0.8);
    border: 1px solid rgba(124, 58, 237, 0.25);
    color: rgba(60, 51, 84, 0.76);
}

:root[data-theme="neon"] .ledger-type-tab.active {
    background: linear-gradient(135deg, rgba(124, 58, 237, 0.45), rgba(0, 212, 255, 0.35));
    border-color: rgba(0, 212, 255, 0.5);
    color: #fdf2ff;
    box-shadow: 0 8px 18px rgba(0, 212, 255, 0.28);
}

:root[data-theme="ocean"] {
    --color-primary: #0ea5e9;
    --color-primary-light: #22c55e;
    --color-primary-lighter: #67e8f9;
    --color-primary-dark: #0369a1;
    --bg-primary: linear-gradient(135deg, #0ea5e9 0%, #22c55e 50%, #06b6d4 100%);
    --bg-gradient: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(14, 165, 233, 0.10) 0%, rgba(6, 182, 212, 0.10) 100%);
    --border-primary: #0ea5e9;
    --shadow-primary: 0 2px 8px rgba(14, 165, 233, 0.20);
    --shadow-primary-lg: 0 4px 12px rgba(6, 182, 212, 0.18);

     --bg-white: rgba(17, 24, 39, 0.72);
     --bg-light: rgba(17, 24, 39, 0.58);
     --bg-lighter: rgba(17, 24, 39, 0.46);
     --text-primary: rgba(255, 255, 255, 0.96);
     --text-secondary: rgba(255, 255, 255, 0.86);
     --text-tertiary: rgba(255, 255, 255, 0.72);
     --border-light: rgba(255, 255, 255, 0.14);
     --border-medium: rgba(255, 255, 255, 0.20);
}

:root[data-theme="galaxy"] {
    --color-primary: #8b5cf6;
    --color-primary-light: #a78bfa;
    --color-primary-lighter: #c4b5fd;
    --color-primary-dark: #3b0764;
    --bg-primary: linear-gradient(135deg, #0b1020 0%, #3b0764 50%, #1d4ed8 100%);
    --bg-gradient: linear-gradient(135deg, #8b5cf6 0%, #1d4ed8 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(139, 92, 246, 0.12) 0%, rgba(29, 78, 216, 0.10) 100%);
    --border-primary: #8b5cf6;
    --shadow-primary: 0 2px 8px rgba(139, 92, 246, 0.22);
    --shadow-primary-lg: 0 4px 12px rgba(29, 78, 216, 0.18);

     --bg-white: rgba(17, 24, 39, 0.78);
     --bg-light: rgba(17, 24, 39, 0.62);
     --bg-lighter: rgba(17, 24, 39, 0.48);
     --text-primary: rgba(255, 255, 255, 0.96);
     --text-secondary: rgba(255, 255, 255, 0.86);
     --text-tertiary: rgba(255, 255, 255, 0.72);
     --border-light: rgba(255, 255, 255, 0.14);
     --border-medium: rgba(255, 255, 255, 0.20);
}

:root[data-theme="peach"] {
    --color-primary: #fb7185;
    --color-primary-light: #fdba74;
    --color-primary-lighter: #ffe4e6;
    --color-primary-dark: #f43f5e;
    --bg-primary: linear-gradient(135deg, #fff1f2 0%, #ffedd5 50%, #ffe4e6 100%);
    --bg-gradient: linear-gradient(135deg, #fb7185 0%, #fdba74 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(251, 113, 133, 0.10) 0%, rgba(253, 186, 116, 0.10) 100%);
    --border-primary: #fb7185;
    --shadow-primary: 0 2px 8px rgba(251, 113, 133, 0.20);
    --shadow-primary-lg: 0 4px 12px rgba(253, 186, 116, 0.18);

     --bg-white: rgba(255, 255, 255, 0.92);
     --bg-light: rgba(255, 255, 255, 0.80);
     --bg-lighter: rgba(255, 255, 255, 0.70);
     --text-primary: #0f172a;
     --text-secondary: rgba(15, 23, 42, 0.78);
     --text-tertiary: rgba(15, 23, 42, 0.60);
     --border-light: rgba(15, 23, 42, 0.10);
     --border-medium: rgba(15, 23, 42, 0.16);
}


:root[data-theme="obsidian"] {
    --color-primary: #71717a;
    --color-primary-light: #a1a1aa;
    --color-primary-lighter: #d4d4d8;
    --color-primary-dark: #52525b;
    --bg-card: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(26, 26, 26, 0.94) 50%, rgba(45, 45, 45, 0.9) 100%);
    --card-border-color: rgba(161, 161, 170, 0.38);
    --card-border-color-strong: rgba(113, 113, 122, 0.6);
    --bg-primary: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2d2d2d 100%);
    --bg-gradient: linear-gradient(135deg, #71717a 0%, #52525b 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(113, 113, 122, 0.12) 0%, rgba(82, 82, 91, 0.10) 100%);
    --border-primary: #71717a;
    --shadow-primary: 0 2px 8px rgba(113, 113, 122, 0.22);
    --shadow-primary-lg: 0 4px 12px rgba(82, 82, 91, 0.18);

     --bg-white: rgba(0, 0, 0, 0.78);
     --bg-light: rgba(0, 0, 0, 0.62);
     --bg-lighter: rgba(0, 0, 0, 0.48);
     --text-primary: rgba(255, 255, 255, 0.96);
     --text-secondary: rgba(255, 255, 255, 0.86);
     --text-tertiary: rgba(255, 255, 255, 0.72);
     --border-light: rgba(255, 255, 255, 0.14);
     --border-medium: rgba(255, 255, 255, 0.20);
     
     --color-primary-rgba-08: rgba(113, 113, 122, 0.08);
     --color-primary-rgba-10: rgba(113, 113, 122, 0.1);
     --color-primary-rgba-12: rgba(113, 113, 122, 0.12);
     --color-primary-rgba-15: rgba(113, 113, 122, 0.15);
     --color-primary-rgba-20: rgba(113, 113, 122, 0.2);
     --color-primary-rgba-25: rgba(113, 113, 122, 0.25);
     --color-primary-rgba-30: rgba(113, 113, 122, 0.3);
     --color-primary-rgba-40: rgba(113, 113, 122, 0.4);
     --color-primary-light-rgba-08: rgba(161, 161, 170, 0.08);
     --color-primary-light-rgba-10: rgba(161, 161, 170, 0.1);
     --color-primary-light-rgba-12: rgba(161, 161, 170, 0.12);
     --color-primary-light-rgba-15: rgba(161, 161, 170, 0.15);
     --color-primary-light-rgba-20: rgba(161, 161, 170, 0.2);
     --color-primary-light-rgba-25: rgba(161, 161, 170, 0.25);
     --color-primary-light-rgba-30: rgba(161, 161, 170, 0.3);
     --color-primary-light-rgba-40: rgba(161, 161, 170, 0.4);
}

/* 主題色塊展示 */
.theme-color-blocks {
    display: flex;
    gap: 12px;
    padding: 16px;
    background: var(--bg-white);
    border-radius: 12px;
    border: 1px solid var(--border-light);
    flex-wrap: wrap;
}

.theme-color-block {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    border: 2px solid var(--border-medium);
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.theme-color-block:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-primary);
}

.theme-color-block.midnight {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
}

.theme-color-block.obsidian {
    background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2d2d2d 100%);
}

:root[data-theme="mono"] {
    --color-primary: #0f172a;
    --color-primary-light: #334155;
    --color-primary-lighter: #e2e8f0;
    --color-primary-dark: #0b0f19;
    --bg-primary: linear-gradient(135deg, #0b0f19 0%, #334155 50%, #e2e8f0 100%);
    --bg-gradient: linear-gradient(135deg, #0f172a 0%, #334155 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(15, 23, 42, 0.10) 0%, rgba(51, 65, 85, 0.10) 100%);
    --border-primary: #0f172a;
    --shadow-primary: 0 2px 8px rgba(15, 23, 42, 0.18);
    --shadow-primary-lg: 0 4px 12px rgba(51, 65, 85, 0.18);

     --bg-white: rgba(17, 24, 39, 0.78);
     --bg-light: rgba(17, 24, 39, 0.62);
     --bg-lighter: rgba(17, 24, 39, 0.48);
     --text-primary: rgba(255, 255, 255, 0.96);
     --text-secondary: rgba(255, 255, 255, 0.86);
     --text-tertiary: rgba(255, 255, 255, 0.72);
     --border-light: rgba(255, 255, 255, 0.14);
     --border-medium: rgba(255, 255, 255, 0.20);
}

:root[data-theme="pink"] body,
:root[data-theme="blue"] body,
:root[data-theme="green"] body,
:root[data-theme="forest"] body,
:root[data-theme="purple"] body,
:root[data-theme="orange"] body,
:root[data-theme="cyan"] body,
:root[data-theme="red"] body,
:root[data-theme="yellow"] body,
:root[data-theme="indigo"] body,
:root[data-theme="teal"] body,
:root[data-theme="neon"] body,
:root[data-theme="ocean"] body,
:root[data-theme="galaxy"] body,
:root[data-theme="money"] body,
:root[data-theme="peach"] body,
:root[data-theme="mono"] body {
    position: relative;
    overflow-x: hidden;
}

:root[data-theme="pink"] body::before,
:root[data-theme="blue"] body::before,
:root[data-theme="green"] body::before,
:root[data-theme="forest"] body::before,
:root[data-theme="purple"] body::before,
:root[data-theme="orange"] body::before,
:root[data-theme="cyan"] body::before,
:root[data-theme="red"] body::before,
:root[data-theme="yellow"] body::before,
:root[data-theme="indigo"] body::before,
:root[data-theme="teal"] body::before,
:root[data-theme="neon"] body::before,
:root[data-theme="ocean"] body::before,
:root[data-theme="galaxy"] body::before,
:root[data-theme="peach"] body::before,
:root[data-theme="mono"] body::before {
    content: '';
    position: fixed;
    top: -20%;
    left: -20%;
    width: 140%;
    height: 140%;
    background: var(--bg-primary);
    background-size: 200% 200%;
    animation: dynamicThemeFlow 14s ease-in-out infinite;
    z-index: -1;
    pointer-events: none;
}

@keyframes dynamicThemeFlow {
    0% { transform: translate(0, 0) rotate(0deg); background-position: 0% 50%; }
    50% { transform: translate(-1.5%, 1.5%) rotate(6deg); background-position: 100% 50%; }
    100% { transform: translate(0, 0) rotate(0deg); background-position: 0% 50%; }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', 'Arial', 'Noto Sans TC', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
    background: var(--bg-primary);
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-tap-highlight-color: transparent;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1;
    font-kerning: normal;
    letter-spacing: 0.005em;
    line-height: 1.6;
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.6s ease;
    z-index: -1;
    background: transparent;
}

.theme-video-background {
    position: fixed;
    inset: 0;
    z-index: -2;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.65s ease;
    background: radial-gradient(circle at top, rgba(22, 244, 154, 0.18), transparent 45%);
}

.theme-video-background.active {
    opacity: 1;
}

.theme-video-background .theme-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: saturate(1.1);
}

.theme-video-background .theme-video-gradient {
    position: absolute;
    inset: 0;
    background: transparent;
    pointer-events: none;
}

/* ========== 新增主題：星際宇航主題 ========== */
:root[data-theme="space"] {
    --color-primary: #00d4ff;
    --color-primary-light: #00e5ff;
    --color-primary-lighter: #7fffd4;
    --color-primary-dark: #0099cc;
    --color-secondary: #ff6b35;
    --color-secondary-light: #ff8c42;
    --color-secondary-dark: #e55a2b;
    --bg-primary: linear-gradient(135deg, rgba(0, 20, 40, 0.95) 0%, rgba(0, 40, 80, 0.85) 50%, rgba(138, 43, 226, 0.35) 100%);
    --bg-body: rgba(0, 20, 40, 0.96);
    --bg-body-strong: rgba(0, 40, 80, 0.98);
    --bg-gradient: linear-gradient(135deg, #001428 0%, #002850 60%, #8a2be2 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(0, 40, 80, 0.08) 0%, rgba(138, 43, 226, 0.25) 100%);
    --bg-white: rgba(0, 20, 40, 0.78);
    --bg-card: rgba(0, 40, 80, 0.8);
    --bg-light: rgba(0, 80, 160, 0.64);
    --bg-lighter: rgba(0, 120, 200, 0.52);
    --bg-soft: rgba(127, 200, 255, 0.55);
    --bg-soft-strong: rgba(0, 80, 160, 0.68);
    --text-primary: rgba(0, 255, 255, 0.96);
    --text-secondary: rgba(127, 200, 255, 0.78);
    --text-tertiary: rgba(0, 150, 255, 0.6);
    --text-strong: rgba(255, 255, 255, 0.98);
    --text-white: rgba(0, 255, 255, 0.98);
    --border-primary: rgba(255, 107, 53, 0.65);
    --border-light: rgba(0, 40, 80, 0.24);
    --border-medium: rgba(255, 107, 53, 0.4);
    --card-border-color: rgba(255, 107, 53, 0.45);
    --control-border-color: rgba(0, 40, 80, 0.32);
    --table-border-color: rgba(0, 40, 80, 0.22);
    --shadow-primary: 0 20px 60px rgba(0, 20, 40, 0.8);
    --shadow-primary-lg: 0 30px 80px rgba(0, 20, 40, 0.7);
    --color-primary-rgba-08: rgba(0, 40, 80, 0.08);
    --color-primary-rgba-10: rgba(0, 40, 80, 0.1);
    --color-primary-rgba-15: rgba(0, 40, 80, 0.15);
    --color-primary-rgba-20: rgba(0, 40, 80, 0.2);
    --color-primary-rgba-25: rgba(0, 40, 80, 0.25);
    --color-primary-rgba-30: rgba(0, 40, 80, 0.3);
    --color-primary-rgba-40: rgba(0, 40, 80, 0.4);
    --color-primary-light-rgba-08: rgba(0, 80, 160, 0.08);
    --color-primary-light-rgba-10: rgba(0, 80, 160, 0.1);
    --color-primary-light-rgba-15: rgba(0, 80, 160, 0.15);
    --color-primary-light-rgba-20: rgba(0, 80, 160, 0.2);
    --color-primary-light-rgba-25: rgba(0, 80, 160, 0.25);
    --color-primary-light-rgba-30: rgba(0, 80, 160, 0.3);
    --color-primary-light-rgba-40: rgba(0, 80, 160, 0.4);
    --color-secondary-rgba-08: rgba(255, 107, 53, 0.08);
    --color-secondary-rgba-10: rgba(255, 107, 53, 0.1);
    --color-secondary-rgba-15: rgba(255, 107, 53, 0.15);
    --color-secondary-rgba-20: rgba(255, 107, 53, 0.2);
    --color-secondary-rgba-25: rgba(255, 107, 53, 0.25);
    --color-secondary-rgba-30: rgba(255, 107, 53, 0.3);
    --color-secondary-rgba-40: rgba(255, 107, 53, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(0, 40, 80, 0.08) 0%, rgba(138, 43, 226, 0.25) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(0, 20, 40, 0.8) 0%, rgba(0, 40, 80, 0.6) 100%);
}

:root[data-theme="space"] body {
    background: url("https://v1.pinimg.com/videos/iht/720p/4e/00/d1/4e00d1999152ab007ebe4aef36d5e2c9.mp4") center/cover no-repeat fixed;
    background-color: #001428;
}

:root[data-theme="space"] body::before {
    display: none;
}

:root[data-theme="space"] .page-input,
:root[data-theme="space"] .page-ledger,
:root[data-theme="space"] .page-chart,
:root[data-theme="space"] .page-budget,
:root[data-theme="space"] .page-monthly-planner,
:root[data-theme="space"] .page-daily-budget,
:root[data-theme="space"] .page-settings,
:root[data-theme="space"] .page-category-manage,
:root[data-theme="space"] .page-investment,
:root[data-theme="space"] .page-wallet,
:root[data-theme="space"] .page-history,
:root[data-theme="space"] .page-planner {
    background: transparent !important;
    box-shadow: none;
}

:root[data-theme="space"] .card,
:root[data-theme="space"] .record-card,
:root[data-theme="space"] .ledger-card,
:root[data-theme="space"] .summary-card,
:root[data-theme="space"] .budget-card,
:root[data-theme="space"] .wallet-card,
:root[data-theme="space"] .chart-card,
:root[data-theme="space"] .investment-card {
    background: linear-gradient(145deg, rgba(0, 40, 80, 0.7) 0%, rgba(138, 43, 226, 0.3) 50%, rgba(0, 80, 160, 0.5) 100%);
    border: 1px solid rgba(255, 107, 53, 0.4);
    box-shadow: 0 12px 32px rgba(0, 20, 40, 0.6), 0 0 20px rgba(0, 212, 255, 0.3);
}

:root[data-theme="space"] .investment-card,
:root[data-theme="space"] .stock-item-card {
    background: linear-gradient(145deg, rgba(0, 40, 80, 0.8) 0%, rgba(255, 107, 53, 0.2) 25%, rgba(138, 43, 226, 0.3) 50%, rgba(0, 212, 255, 0.2) 75%, rgba(0, 80, 160, 0.6) 100%);
    border: 1px solid var(--color-secondary);
    box-shadow: 
        0 12px 32px rgba(0, 20, 40, 0.6),
        0 0 30px rgba(0, 212, 255, 0.4);
}

:root[data-theme="space"] .investment-card::before,
:root[data-theme="space"] .stock-item-card::before {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.4) 0%, rgba(138, 43, 226, 0.3) 55%, rgba(255, 107, 53, 0.2) 100%);
}

:root[data-theme="space"] .nav-item.active {
    background: rgba(255, 107, 53, 0.2);
    box-shadow: 0 8px 20px rgba(0, 20, 40, 0.6);
}

:root[data-theme="space"] .nav-item.active:hover {
    background: rgba(255, 107, 53, 0.3);
    filter: brightness(1.2);
}

/* ========== 統一按鈕基礎樣式 ========== */
button {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;
    user-select: none;
    font-family: inherit;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    transition: all var(--transition-base);
    border: none;
    outline: none;
}

:where(button):not(.nav-item):not(.fab-btn) {
    border: 1px solid var(--control-border-color);
}

input, textarea, select {
    font-family: inherit;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.005em;
}

:where(input, textarea, select, .form-input, .note-input) {
    border-color: var(--control-border-color);
}

:where(.month-nav-btn, .chart-range-btn, .chart-type-btn, .chart-tab-btn) {
    border-color: var(--control-border-color);
}

:where(table, th, td) {
    border-color: var(--table-border-color);
}

h1, h2, h3, h4, h5, h6 {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.006em;
    font-weight: 700;
    line-height: 1.35;
}

.page-title,
.section-title,
.app-modal-title,
.next-month-bills-title,
.summary-value,
.stat-value,
.amount,
.next-month-bill-amount {
    font-variant-numeric: tabular-nums;
}

p, span, div, label {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

button:active {
    transform: scale(0.98);
    opacity: 0.9;
}

/* ========== 通用工具類 ========== */
.empty-state {
    text-align: center;
    padding: 40px var(--spacing-lg);
    color: var(--text-tertiary);
    font-size: var(--font-md);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 245, 249, 0.8) 100%);
    border-radius: 20px;
    margin: 20px 16px;
    border: 1px solid rgba(255, 158, 199, 0.2);
    box-shadow: 0 4px 12px var(--color-primary-rgba-08);
}

.empty-state small {
    font-size: var(--font-sm);
    margin-top: var(--spacing-sm);
    display: block;
}

.text-center {
    text-align: center;
}

.text-primary {
    color: var(--text-primary);
}

.text-secondary {
    color: var(--text-secondary);
}

.text-tertiary {
    color: var(--text-tertiary);
}

.text-success {
    color: var(--color-success);
}

.text-error {
    color: var(--color-error);
}

.bg-white {
    background: var(--bg-white);
}

.bg-gradient {
    background: var(--bg-gradient);
}

.bg-gradient-light {
    background: var(--bg-gradient-light);
}

.shadow-sm {
    box-shadow: var(--shadow-sm);
}

.shadow-md {
    box-shadow: var(--shadow-md);
}

.shadow-lg {
    box-shadow: var(--shadow-lg);
}

.shadow-primary {
    box-shadow: var(--shadow-primary);
}

.rounded-sm {
    border-radius: var(--radius-sm);
}

.rounded-md {
    border-radius: var(--radius-md);
}

.rounded-lg {
    border-radius: var(--radius-lg);
}

.rounded-xl {
    border-radius: var(--radius-xl);
}

.rounded-full {
    border-radius: var(--radius-full);
}

/* ========== Header部分 ========== */
.header-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: transparent;
    width: 100%;
}

/* 響應式：Header內邊距調整 */
@media (min-width: 576px) {
    .header-section {
        padding: 12px 20px;
    }
}

@media (min-width: 768px) {
    .header-section {
        padding: 12px 30px;
        max-width: 1200px;
        margin: 0 auto;
    }
}

.close-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    color: var(--color-primary);
    font-size: var(--font-xxl);
    font-weight: var(--font-bold);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-full);
    transition: all var(--transition-fast);
}

.close-btn:active {
    background: var(--color-primary-rgba-10);
}

.header-tabs {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    flex: 1;
}

.header-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    border: none;
    background: transparent;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 70px;
    position: relative;
    gap: 4px;
}

.header-tab:hover {
    background: var(--color-primary-light-rgba-10);
}

.header-tab.active {
    background: var(--bg-gradient-light);
    box-shadow: var(--shadow-primary);
    transform: translateY(-1px);
    border: 2px solid var(--color-primary-lighter);
}

.header-tab-icon {
    font-size: 24px;
    margin-bottom: 0;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
    transition: transform 0.3s ease;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

.header-tab.active .header-tab-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 2px 4px var(--color-primary-rgba-30));
}

.header-tab-text {
    font-size: 13px;
    color: var(--text-tertiary);
    font-weight: 500;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.header-tab.active .header-tab-text {
    color: var(--color-primary);
    font-weight: 600;
    font-size: 13px;
}

/* 響應式：標籤調整 */
@media (max-width: 576px) {
    .header-tabs {
        gap: 8px;
    }
    
    .header-tab {
        padding: 8px 16px;
        min-width: 60px;
    }
    
    .header-tab-icon {
        font-size: 22px;
    }
    
    .header-tab-text {
        font-size: 12px;
    }
}

.app-container {
    width: 100%;
    padding: 20px 16px;
    margin: 0 auto;
}

/* 響應式：容器內邊距調整 */
@media (min-width: 576px) {
    .app-container {
        padding: 24px 20px;
    }
}

@media (min-width: 768px) {
    .app-container {
        padding: 30px 30px;
        max-width: 1200px;
    }
}

@media (min-width: 992px) {
    .app-container {
        padding: 40px 40px;
    }
}

/* ========== 上半部：分類選擇區 ========== */
.category-section {
    margin-bottom: 20px;
    max-height: calc(100vh - 300px);
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    padding-right: 4px;
}

/* 常用項目一鍵記錄 */
.quick-actions-section {
    margin-bottom: 16px;
    padding: 12px;
    background: var(--bg-white);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.quick-actions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.quick-actions-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.quick-actions-edit-btn {
    padding: 6px 12px;
    background: var(--bg-gradient-light);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--color-primary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.quick-actions-edit-btn:hover {
    background: var(--bg-gradient);
    color: white;
    border-color: var(--color-primary);
}

.quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 10px;
}

.quick-action-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 14px 10px;
    background: var(--bg-gradient-light);
    border: 2px solid var(--border-light);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    min-height: 90px;
}

.quick-action-item:hover {
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary);
}

.quick-action-icon {
    font-size: 24px;
    margin-bottom: 4px;
}

.quick-action-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
    line-height: 1.3;
    word-break: break-word;
}

.quick-action-amount {
    font-size: 12px;
    color: var(--color-primary);
    font-weight: 700;
    margin-top: 2px;
}


.metric-price-wrapper {
display: flex;
align-items: center;
gap: 16px;
width: 100%;
}

.metric-price-wrapper--simple {
    flex-wrap: wrap;
    align-items: stretch;
    gap: 12px;
}

.metric-price-wrapper--simple .metric-input-large {
    flex: 0 1 auto;
    width: auto;
    min-width: 8ch;
    max-width: 100%;
}

.metric-price-wrapper--simple .metric-quote-btn {
    flex: 0 0 auto;
}

.metric-quote-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 10px;
    border-radius: 12px;
    border: 2px solid rgba(102, 126, 234, 0.45);
    background: rgba(102, 126, 234, 0.12);
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 700;
    font-size: 12px;
    line-height: 1;
    white-space: nowrap;
    cursor: pointer;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
    min-height: 34px;
}

.metric-quote-btn::before {
    content: '↗';
    font-size: 12px;
    opacity: 0.8;
}

.metric-quote-btn:hover {
    border-color: rgba(102, 126, 234, 0.75);
    background: rgba(102, 126, 234, 0.18);
    transform: translateY(-1px);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.22);
}

.metric-quote-btn:active {
    transform: translateY(0);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
}

@media (max-width: 576px) {
    .metric-price-wrapper--simple {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .metric-price-wrapper--simple .metric-input-large {
        width: 100%;
        max-width: 100%;
    }

    .metric-quote-btn {
        width: 100%;
        justify-content: center;
        align-self: stretch;
        white-space: normal;
        line-height: 1.2;
    }
}

.metric-quick-links {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px 12px;
    border-radius: var(--radius-xl);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.02));
    border: 1px dashed rgba(255, 255, 255, 0.25);
    box-shadow: inset 0 0 25px rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(4px);
}

.metric-quick-link {
    padding: 6px 16px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    border: 1px solid rgba(255, 255, 255, 0.35);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-white);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
}

.metric-quick-link::before {
    content: '↗';
    font-size: 11px;
    opacity: 0.75;
}

.metric-quick-link-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    letter-spacing: 0.18em;
    text-transform: uppercase;
    margin-bottom: 4px;
    width: 100%;
}

.metric-quick-link.metric-quick-link--primary {
    background: linear-gradient(120deg, var(--color-primary-dark, #0ea5e9), var(--color-primary), var(--color-primary-light, #93c5fd));
    border: 1px solid rgba(255, 255, 255, 0.25);
    color: #fff;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25), inset 0 0 20px rgba(255, 255, 255, 0.08);
    position: relative;
    overflow: hidden;
}

.metric-quick-link.metric-quick-link--primary::before {
    opacity: 0.45;
}

.metric-quick-link.metric-quick-link--primary::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 999px;
    background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.45), transparent 55%);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.metric-quick-link.metric-quick-link--primary span {
    position: relative;
    z-index: 1;
    font-size: 12px;
    letter-spacing: 0.08em;
}

.metric-quick-link.metric-quick-link--primary:hover::after {
    opacity: 0.8;
}

.metric-quick-link.metric-quick-link--primary {
    animation: metric-link-pulse 5s ease-in-out infinite;
}

.metric-quick-link:hover {
    border-color: var(--color-primary-light);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.05));
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.2);
}

@keyframes metric-link-pulse {
    0% {
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25), inset 0 0 20px rgba(255, 255, 255, 0.08);
        transform: translateY(0) scale(1);
    }
    50% {
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.3), inset 0 0 30px rgba(255, 255, 255, 0.18);
        transform: translateY(-1px) scale(1.01);
    }
    100% {
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25), inset 0 0 20px rgba(255, 255, 255, 0.08);
        transform: translateY(0) scale(1);
    }
}


.category-section::-webkit-scrollbar {
    width: 4px;
}

.category-section::-webkit-scrollbar-track {
    background: transparent;
}

.category-section::-webkit-scrollbar-thumb {
    background: var(--color-primary-rgba-30);
    border-radius: 2px;
}

.category-section::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary-rgba-30);
}

.category-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    padding: 8px 0;
    min-height: min-content;
}

.category-group-header {
    grid-column: 1 / -1;
    font-size: 16px;
    font-weight: 600;
    padding: 12px 0 8px 0;
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 2px solid var(--border-light);
}

/* 推薦 tab 分組標題美化 */
.category-group-header.recommended-group-header {
    padding: 14px 16px;
    margin-top: 16px;
    margin-bottom: 12px;
    background: linear-gradient(135deg, var(--bg-lighter) 0%, var(--bg-white) 100%);
    border-radius: 12px;
    border: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.category-group-header.recommended-group-header::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--color-primary);
    border-radius: 2px 0 0 2px;
}

.category-group-header.recommended-group-header[data-type="expense"]::before {
    background: linear-gradient(180deg, #ff6b6b 0%, #ff8787 100%);
}

.category-group-header.recommended-group-header[data-type="income"]::before {
    background: linear-gradient(180deg, #51cf66 0%, #69db7c 100%);
}

.category-group-header.recommended-group-header[data-type="transfer"]::before {
    background: linear-gradient(180deg, #4dabf7 0%, #74c0fc 100%);
}

.group-header-icon {
    font-size: 20px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-white);
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    flex-shrink: 0;
}

.group-header-label {
    flex: 1;
    font-size: 17px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: 0.3px;
}

.group-header-count {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-tertiary);
    background: var(--bg-lighter);
    padding: 4px 10px;
    border-radius: 12px;
    min-width: 32px;
    text-align: center;
}

.category-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px 8px;
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    border: 2px solid var(--color-primary-light-rgba-20);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-height: 80px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    position: relative;
    box-shadow: var(--color-primary-rgba-10);
    z-index: 1;
    pointer-events: auto;
}

.record-card .record-quick-buy-fab {
    top: 18px;
    right: 96px;
}

/* 推薦 tab 分類卡片美化 */
.category-item.recommended-category-item {
    padding: 18px 12px;
    min-height: 95px;
    background: linear-gradient(135deg, var(--bg-white) 0%, var(--bg-lighter) 100%);
    border: 2px solid var(--border-light);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.category-item.recommended-category-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    border-color: var(--color-primary-lighter);
}

.category-item.recommended-category-item.selected {
    background: linear-gradient(135deg, var(--color-primary-rgba-10) 0%, var(--color-primary-rgba-5) 100%);
    border-color: var(--color-primary);
    box-shadow: 0 4px 12px var(--color-primary-rgba-20);
    transform: translateY(-2px);
}

.category-item.recommended-category-item[data-category-type="expense"] {
    border-left: 3px solid #ff6b6b;
}

.category-item.recommended-category-item[data-category-type="expense"]:hover {
    border-left-color: #ff5252;
    box-shadow: 0 6px 16px rgba(255, 107, 107, 0.2);
}

.category-item.recommended-category-item[data-category-type="expense"].selected {
    border-left-color: #ff6b6b;
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(255, 107, 107, 0.05) 100%);
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.25);
}

.category-item.recommended-category-item[data-category-type="income"] {
    border-left: 3px solid #51cf66;
}

.category-item.recommended-category-item[data-category-type="income"]:hover {
    border-left-color: #40c057;
    box-shadow: 0 6px 16px rgba(81, 207, 102, 0.2);
}

.category-item.recommended-category-item[data-category-type="income"].selected {
    border-left-color: #51cf66;
    background: linear-gradient(135deg, rgba(81, 207, 102, 0.1) 0%, rgba(81, 207, 102, 0.05) 100%);
    box-shadow: 0 4px 12px rgba(81, 207, 102, 0.25);
}

.category-item.recommended-category-item[data-category-type="transfer"] {
    border-left: 3px solid #4dabf7;
}

.category-item.recommended-category-item[data-category-type="transfer"]:hover {
    border-left-color: #339af0;
    box-shadow: 0 6px 16px rgba(77, 171, 247, 0.2);
}

.category-item.recommended-category-item[data-category-type="transfer"].selected {
    border-left-color: #4dabf7;
    background: linear-gradient(135deg, rgba(77, 171, 247, 0.1) 0%, rgba(77, 171, 247, 0.05) 100%);
    box-shadow: 0 4px 12px rgba(77, 171, 247, 0.25);
}

.category-item:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-primary);
    border-color: var(--color-primary-light-rgba-40);
    background: var(--bg-gradient-light);
}

.category-item.selected {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary);
    box-shadow: var(--shadow-primary);
    transform: translateY(-2px);
}

.category-icon {
    font-size: 28px;
    margin-bottom: 6px;
    filter: grayscale(0);
    transition: all 0.3s ease;
    pointer-events: none;
    user-select: none;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
}

 .category-icon-wrapper {
     width: 40px;
     height: 40px;
     margin-bottom: 6px;
     display: flex;
     align-items: center;
     justify-content: center;
     position: relative;
 }

 .category-icon-wrapper.custom-icon-wrapper {
     border-radius: 12px;
     overflow: hidden;
     border: 1px solid var(--border-light);
     background: var(--bg-white);
     box-shadow: var(--shadow-sm);
 }

 .category-icon-wrapper .category-icon-image {
     width: 100%;
     height: 100%;
     object-fit: cover;
     border-radius: 0;
 }

 .custom-icon-badge {
     position: absolute;
     top: -6px;
     right: -6px;
     width: 18px;
     height: 18px;
     border-radius: 999px;
     display: flex;
     align-items: center;
     justify-content: center;
     font-size: 10px;
     background: var(--bg-gradient);
     color: var(--text-white);
     border: 2px solid var(--bg-white);
     box-shadow: var(--shadow-sm);
 }

.category-icon-svg {
    width: 40px;
    height: 40px;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    pointer-events: none;
}

.category-icon-svg svg {
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.category-icon-svg svg path,
.category-icon-svg svg rect,
.category-icon-svg svg circle,
.category-icon-svg svg line,
.category-icon-svg svg ellipse,
.category-icon-svg svg polygon {
    stroke: #8B6BC7;
    stroke-width: 2;
}

.category-item.selected .category-icon {
    filter: grayscale(0) brightness(1.1);
    transform: scale(1.1);
}

.category-item.selected .category-icon-svg {
    transform: scale(1.1);
    filter: brightness(1.1);
}

.category-item.selected .category-icon-svg svg path,
.category-item.selected .category-icon-svg svg rect,
.category-item.selected .category-icon-svg svg circle,
.category-item.selected .category-icon-svg svg line,
.category-item.selected .category-icon-svg svg ellipse,
.category-item.selected .category-icon-svg svg polygon {
    stroke: var(--color-primary);
    stroke-width: 2.5;
}

.category-name {
    font-size: 12px;
    color: var(--text-primary);
    font-weight: var(--font-medium);
    text-align: center;
    line-height: 1.2;
    pointer-events: none;
    user-select: none;
}

/* 推薦 tab 分類名稱美化 */
.recommended-category-item .category-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.2px;
    margin-top: 2px;
}

.recommended-category-item:hover .category-name {
    color: var(--color-primary);
}

.recommended-category-item.selected .category-name {
    color: var(--color-primary);
    font-weight: 700;
}

.category-type-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    white-space: nowrap;
    pointer-events: none;
}

.category-item.selected .category-name {
    color: var(--text-primary);
    font-weight: var(--font-semibold);
}

/* ========== 中間：Tab 切換列 ========== */
/* 記帳輸入頁面返回鍵區域 */
.page-input .input-page-header {
    display: flex;
    align-items: center;
    padding: 12px 16px 8px 16px;
    margin-bottom: 8px;
}

.page-input .input-page-header .back-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    font-size: var(--font-xxl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-full);
    transition: all var(--transition-fast);
    color: var(--color-primary);
}

.page-input .input-page-header .back-btn:hover {
    background: rgba(255, 158, 199, 0.15);
    transform: scale(1.05);
}

.page-input .input-page-header .back-btn:active {
    background: rgba(255, 158, 199, 0.25);
    transform: scale(0.95);
}

.tab-section {
    margin-bottom: 20px;
    padding: 0 4px;
    position: relative;
    z-index: 10;
}

.tabs {
    display: flex;
    background: var(--bg-white);
    border-radius: 20px;
    padding: 6px;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border-light);
}

.tab-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 12px 8px;
    background: transparent;
    border: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-base);
    font-size: var(--font-md);
    position: relative;
    z-index: 10;
    pointer-events: auto;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

.tab-btn.active {
    background: var(--bg-gradient-light);
    border: 2px solid var(--color-primary);
    box-shadow: var(--shadow-primary);
    transform: translateY(-1px);
    color: var(--color-primary);
}

.tab-btn:hover {
    background: var(--color-primary-light-rgba-10);
    transform: translateY(-1px);
    border: 1px solid var(--color-primary-light-rgba-20);
}

.tab-icon {
    font-size: 20px;
    margin-bottom: 4px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
    pointer-events: none;
    user-select: none;
    transition: transform 0.3s ease;
}

.tab-btn.active .tab-icon {
    transform: scale(1.1);
}

.tab-btn:hover .tab-icon {
    transform: scale(1.05);
}

.tab-text {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: var(--font-medium);
    pointer-events: none;
    user-select: none;
}

.tab-btn.active .tab-text {
    color: var(--color-primary);
    font-weight: var(--font-semibold);
}

/* ========== 下半部：輸入區（固定在底部） ========== */
.input-section {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-white);
    border-top-left-radius: var(--radius-xl);
    border-top-right-radius: var(--radius-xl);
    border: 2px solid var(--color-primary-light);
    box-shadow: 0 -4px 20px var(--color-primary-rgba-15);
    padding: 16px;
    padding-bottom: 80px;
    padding-top: 16px;
    z-index: 3100;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    max-height: 90vh;
    overflow-y: auto;
    box-sizing: border-box;
    scroll-padding-bottom: 20px;
    width: 100%;
}

/* 收起狀態：只顯示金額和展開按鈕 */
.input-section.collapsed {
    transform: translateY(calc(100% - 120px));
    padding: 8px 16px 16px 16px;
    padding-top: 36px;
}

.input-section.collapsed .collapse-btn {
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
}

.input-section.collapsed .keyboard,
.input-section.collapsed .input-top-row,
.input-section.collapsed .account-info-row,
.input-section.collapsed .input-second-row,
.input-section.collapsed .quick-notes-container,
.input-section.collapsed .member-display,
.input-section.collapsed .image-preview {
    display: none !important;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.3s ease, max-height 0.3s ease;
}

.input-section.collapsed .amount-display {
    margin-bottom: 0;
    padding: 16px 12px;
    background: var(--bg-gradient-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--color-primary-light-rgba-15);
    transition: all 0.3s ease;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

.input-section.collapsed .amount-display:active {
    transform: scale(0.98);
    box-shadow: var(--color-primary-light-rgba-20);
}

.input-section.collapsed .amount {
    font-size: 28px;
    transition: font-size 0.3s ease;
}

.input-section.collapsed .currency {
    font-size: 18px;
    transition: font-size 0.3s ease;
}

/* 手機適配：優化收起狀態的顯示 */
@media (max-width: 576px) {
    .input-section.collapsed {
        transform: translateY(calc(100% - 110px));
        padding: 6px 12px 12px 12px;
        padding-top: 32px;
    }
    
    .input-section.collapsed .amount-display {
        padding: 14px 10px;
    }
    
    .input-section.collapsed .amount {
        font-size: 24px;
    }
    
    .input-section.collapsed .currency {
        font-size: 16px;
    }
    
    .collapse-btn {
        width: 60px;
        height: 40px;
        top: 6px;
    }
    
    .collapse-icon {
        font-size: 18px;
    }
}

/* 響應式：輸入區內邊距調整 */
@media (min-width: 576px) {
    .input-section {
        padding: 20px;
        padding-bottom: 80px;
        padding-top: 40px;
    }
    
    .input-section.collapsed {
        transform: translateY(calc(100% - 130px));
        padding: 8px 20px 20px 20px;
        padding-top: 40px;
    }
}

@media (min-width: 768px) {
    .input-section {
        padding: 24px 40px;
        padding-bottom: 80px;
        padding-top: 40px;
    }
    
    .input-section.collapsed {
        transform: translateY(calc(100% - 140px));
        padding: 8px 40px 24px 40px;
        padding-top: 40px;
    }
}

@media (min-width: 992px) {
    .input-section {
        padding: 28px 60px;
        padding-bottom: 80px;
        padding-top: 40px;
    }
    
    .input-section.collapsed {
        transform: translateY(calc(100% - 150px));
        padding: 8px 60px 28px 60px;
        padding-top: 40px;
    }
}

@media (min-width: 1200px) {
    .input-section {
        padding: 32px 80px;
        padding-bottom: 80px;
        padding-top: 40px;
    }
    
    .input-section.collapsed {
        transform: translateY(calc(100% - 160px));
        padding: 8px 80px 32px 80px;
        padding-top: 40px;
    }
}

.input-section .keyboard,
.input-section .input-top-row,
.input-section .input-second-row {
    transition: opacity 0.3s ease, max-height 0.3s ease;
}

/* 輸入區域頂部操作欄 */
.input-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 0 12px 0;
    margin-bottom: 8px;
    position: relative;
}

.page-title {
    letter-spacing: 0.01em;
    line-height: 1.15;
}

.input-back-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--color-primary-light-rgba-15);
    border: 2px solid var(--color-primary-light-rgba-40);
    border-radius: var(--radius-md);
    font-size: var(--font-xl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    color: var(--color-primary);
    font-weight: var(--font-bold);
    z-index: 3200;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    position: relative;
}

.input-back-btn:hover {
    background: var(--color-primary-light-rgba-25);
    border-color: var(--color-primary-light-rgba-60);
    transform: scale(1.05);
}

.input-back-btn:active {
    transform: scale(0.95);
    background: var(--color-primary-light-rgba-30);
}

.input-header-spacer {
    flex: 1;
}

.input-section.collapsed .input-section-header {
    display: none;
}

.collapse-btn {
    position: relative;
    width: 56px;
    height: 36px;
    border: none;
    background: var(--bg-gradient);
    border: 2px solid var(--color-primary);
    border-radius: var(--radius-xl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1002;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-primary);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    margin: 0 auto;
}

.collapse-btn:hover {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary-dark);
    box-shadow: var(--shadow-primary-lg);
    transform: translateY(-2px);
}

.collapse-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.collapse-icon {
    font-size: 16px;
    color: #ffffff;
    transition: transform 0.3s ease;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.input-section.collapsed .collapse-icon {
    transform: rotate(0deg);
    color: #ffffff;
}

/* 展開狀態時圖標向下 */
.input-section:not(.collapsed) .collapse-icon {
    transform: rotate(180deg);
}

.input-top-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    padding: 12px;
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-primary-light-rgba-20);
    box-shadow: var(--color-primary-rgba-10);
}

.input-btn {
    width: 40px;
    height: 40px;
    border: 1px solid var(--color-primary-light-rgba-30);
    background: var(--bg-white);
    border-radius: var(--radius-md);
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-base);
    flex-shrink: 0;
    box-shadow: var(--shadow-sm);
    color: var(--text-primary);
}

.input-btn:hover {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary-lighter);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.input-btn:active {
    transform: scale(0.95);
    background: var(--color-primary-light-rgba-15);
    box-shadow: var(--shadow-sm);
}

.note-input {
    flex: 1;
    padding: 10px 12px;
    border: 2px solid var(--color-primary-light-rgba-30);
    border-radius: var(--radius-md);
    font-size: var(--font-sm);
    background: var(--bg-white);
    transition: all 0.3s ease;
    box-shadow: var(--color-primary-rgba-08);
    color: var(--text-primary);
}

.note-input:focus {
    outline: none;
    border-color: var(--color-primary-light);
    background: var(--bg-white);
    box-shadow: var(--color-primary-rgba-15);
}

/* 常用備註按鈕 */
.quick-notes-container {
    padding: 12px 16px;
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-primary-light-rgba-20);
    margin-bottom: 12px;
    box-shadow: var(--color-primary-rgba-10);
    display: none; /* 默認隱藏，當有輸入時顯示 */
}

.quick-notes-container.show {
    display: block;
}

.quick-notes-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-bottom: 8px;
    font-weight: 500;
}

.quick-notes-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.quick-note-btn {
    padding: 8px 14px;
    border: 1px solid var(--color-primary-light-rgba-30);
    border-radius: var(--radius-lg);
    background: var(--bg-white);
    color: var(--text-primary);
    font-size: var(--font-sm);
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    font-weight: var(--font-medium);
    display: flex;
    align-items: center;
    gap: 4px;
    line-height: 1.2;
    box-shadow: var(--color-primary-rgba-10);
}

.quick-note-btn:hover {
    background: var(--color-primary-light-rgba-15);
    border-color: var(--color-primary-light-rgba-50);
    color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--color-primary-rgba-15);
}

.quick-note-btn:active {
    transform: scale(0.95);
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    color: var(--text-white);
}

.account-info-row {
    padding: 8px 16px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    min-height: 40px;
}

.account-info {
    font-size: var(--font-xs);
    color: var(--text-secondary);
    white-space: nowrap;
    flex-shrink: 0;
    display: flex;
    align-items: center;
}

.input-carrier-row {
    display: none;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    padding: 8px;
    background: var(--bg-lighter);
    border-radius: var(--radius-md);
}

.carrier-input,
.invoice-input {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid var(--border-light);
    border-radius: var(--radius-sm);
    font-size: var(--font-sm);
    background: var(--bg-white);
    transition: all 0.3s ease;
    color: var(--text-primary);
}

.carrier-input:focus,
.invoice-input:focus {
    outline: none;
    border-color: var(--color-primary-light);
    background: var(--bg-white);
}

.carrier-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-gradient);
    border-radius: var(--radius-md);
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    flex-shrink: 0;
    box-shadow: var(--shadow-primary);
    color: var(--text-white);
}

.carrier-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.carrier-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.input-second-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
}

.date-btn {
    flex: 1;
    height: 40px;
    border: none;
    background: var(--bg-gradient);
    border-radius: var(--radius-md);
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    color: var(--text-white);
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-primary);
}

.date-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.date-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.date-input {
    flex: 1;
    height: 40px;
    border: none;
    background: var(--bg-gradient);
    border-radius: var(--radius-md);
    font-size: var(--font-sm);
    font-weight: var(--font-medium);
    color: var(--text-white);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-primary);
    padding: 0 12px;
    text-align: center;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

.date-input:hover {
    background: var(--bg-gradient-light);
    box-shadow: var(--shadow-primary-lg);
}

.date-input:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.date-input::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
    opacity: 0.8;
}

.date-input::-webkit-datetime-edit-text {
    color: var(--text-white);
}

.date-input::-webkit-datetime-edit-month-field,
.date-input::-webkit-datetime-edit-day-field,
.date-input::-webkit-datetime-edit-year-field {
    color: var(--text-white);
}

.date-input-hidden {
    position: absolute;
    opacity: 0;
    pointer-events: none;
    width: 0;
    height: 0;
}

.check-btn {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-white);
    font-size: var(--font-lg);
    font-weight: var(--font-bold);
}

.check-btn:active {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
}

/* 金額顯示 */
.amount-display {
    text-align: center;
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--bg-gradient-light);
    border-radius: var(--radius-lg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.currency {
    font-size: var(--font-xl);
    color: var(--color-primary);
    font-weight: var(--font-semibold);
    margin-right: var(--spacing-xs);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
}

.amount {
    font-size: 36px;
    color: var(--text-primary);
    font-weight: var(--font-bold);
    font-variant-numeric: tabular-nums;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    text-rendering: optimizeLegibility;
}

/* ========== 數字鍵盤 ========== */
.keyboard {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 0;
    padding-bottom: 0;
    background: var(--bg-light-gradient, #ffffff);
    border-radius: var(--radius-lg);
    padding: 16px;
    box-shadow: 0 20px 60px var(--color-primary-rgba-08, rgba(0, 0, 0, 0.08));
}

.keyboard-row {
    display: flex;
    gap: 8px;
}

.keyboard-row .key-btn.operator {
    order: -1; /* 運算符在左側 */
}

.key-btn {
    flex: 1;
    min-height: 56px;
    border: 2px solid var(--color-primary-light-rgba-25, rgba(0, 0, 0, 0.12));
    border-radius: var(--radius-lg);
    font-size: var(--font-lg);
    font-weight: var(--font-semibold);
    cursor: pointer;
    transition: all 0.3s ease;
    background: linear-gradient(145deg,
        var(--color-primary-light-rgba-12, rgba(255, 255, 255, 0.85)) 0%,
        var(--bg-white, #ffffff) 70%,
        rgba(255, 255, 255, 0.95) 100%);
    color: var(--color-primary-dark, #222222);
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    position: relative;
    z-index: 1;
    box-shadow: 0 10px 30px var(--color-primary-rgba-10, rgba(0, 0, 0, 0.08));
}

.key-btn:hover {
    background: linear-gradient(145deg,
        var(--color-primary-light-rgba-18, rgba(255, 255, 255, 0.88)) 0%,
        var(--bg-white, #ffffff) 100%);
    border-color: var(--color-primary-light-rgba-40, rgba(0, 0, 0, 0.2));
    transform: translateY(-2px);
    box-shadow: 0 14px 36px var(--color-primary-rgba-15, rgba(0, 0, 0, 0.12));
}

.key-btn:active {
    transform: scale(0.95);
    background: linear-gradient(145deg,
        var(--color-primary-light-rgba-25, rgba(255, 255, 255, 0.9)) 0%,
        rgba(255, 255, 255, 0.92) 100%);
    box-shadow: 0 6px 18px var(--color-primary-rgba-10, rgba(0, 0, 0, 0.12));
}

.key-btn[data-key="0"] {
    flex: 2;
    font-size: var(--font-xl);
    font-weight: var(--font-bold);
    background: linear-gradient(160deg,
        var(--color-primary-light-rgba-10, rgba(255, 255, 255, 0.9)) 0%,
        var(--bg-white, #ffffff) 100%);
    border-color: var(--color-primary-light-rgba-30, rgba(0, 0, 0, 0.15));
}


:root.dark .keyboard {
    background: var(--bg-card, rgba(7, 7, 7, 0.8));
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
}

:root.dark .key-btn {
    background: linear-gradient(145deg,
        rgba(0, 0, 0, 0.75) 0%,
        rgba(0, 0, 0, 0.55) 100%);
    color: var(--text-white);
    border-color: rgba(255, 255, 255, 0.15);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
}

:root.dark .key-btn:hover {
    background: linear-gradient(145deg,
        rgba(255, 255, 255, 0.08) 0%,
        rgba(0, 0, 0, 0.7) 100%);
    border-color: rgba(255, 255, 255, 0.2);
}

:root.dark .key-btn:active {
    background: linear-gradient(145deg,
        rgba(255, 255, 255, 0.12) 0%,
        rgba(0, 0, 0, 0.65) 100%);
}

.key-btn.operator {
    background: var(--bg-gradient);
    color: var(--text-white);
}

.key-btn.clear {
    background: var(--bg-lighter);
    border-color: var(--border-light);
    color: var(--text-secondary);
    font-size: var(--font-sm);
    font-weight: var(--font-semibold);
}

.key-btn.clear:hover {
    background: var(--bg-light);
    border-color: var(--border-light);
}

.key-btn.delete {
    background: var(--color-error);
    border-color: var(--color-error);
    color: var(--text-white);
    font-size: var(--font-lg);
    border-radius: 50%;
    width: 56px;
    height: 56px;
    font-weight: var(--font-bold);
    opacity: 0.9;
}

.key-btn.delete:hover {
    background: var(--color-error);
    border-color: var(--color-error);
    opacity: 1;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.key-btn.equal {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-white);
    font-size: var(--font-xl);
    font-weight: var(--font-bold);
    flex: 2;
    box-shadow: var(--shadow-primary);
}

.key-btn.equal:hover {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
    box-shadow: var(--shadow-primary-lg);
}

.key-btn.equal:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.key-btn.save-btn {
    background: var(--color-success);
    color: var(--text-white);
    font-size: var(--font-xxl);
    font-weight: var(--font-bold);
    border-radius: var(--radius-full);
    width: 56px;
    height: 56px;
    flex: 0 0 56px;
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

.key-btn.save-btn:active {
    transform: scale(0.9);
    box-shadow: 0 1px 4px rgba(76, 175, 80, 0.2);
}

/* 響應式調整 */
@media (max-width: 375px) {
    .category-grid {
        gap: 8px;
    }
    
    .category-item {
        padding: 12px 6px;
        min-height: 70px;
    }
    
    .category-icon {
        font-size: 24px;
    }
    
    .category-name {
        font-size: 11px;
    }
    
    .amount {
        font-size: 32px;
    }
    
    .key-btn {
        min-height: 52px;
        font-size: 18px;
    }
}

/* 確保在手機上不會有滾動問題 */
@media (max-height: 800px) {
    .category-grid {
        gap: 8px;
    }
    
    .category-item {
        padding: 10px 6px;
        min-height: 65px;
    }
}

/* ========== 頁面切換 ========== */
.page-input {
    min-height: calc(100vh - 60px);
    padding-bottom: 100px;
    background: var(--bg-primary);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    box-shadow: var(--shadow-sm);
}

.page-ledger {
    min-height: calc(100vh - 60px);
    padding-bottom: 100px;
    background: var(--bg-light-gradient-reverse);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    width: 100%;
}

.page-daily-budget {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: var(--bg-light-gradient-reverse);
}

.page-next-month-bills {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: var(--bg-light-gradient-reverse);
}

.next-month-bills-page-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    gap: 12px;
}

.next-month-bills-page-title {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    text-align: center;
}

.next-month-bills-page-content {
    padding: 16px;
    padding-bottom: 100px;
}

/* 響應式：頁面內邊距調整 */
@media (min-width: 576px) {
    .page-input,
    .page-ledger {
        padding-left: 20px;
        padding-right: 20px;
    }
}

@media (min-width: 768px) {
    .page-input,
    .page-ledger {
        padding-left: 40px;
        padding-right: 40px;
    }
}

@media (min-width: 992px) {
    .page-input,
    .page-ledger {
        padding-left: 60px;
        padding-right: 60px;
    }
}

@media (min-width: 1200px) {
    .page-input,
    .page-ledger {
        padding-left: 80px;
        padding-right: 80px;
    }
}

.page-input .app-container {
    padding-bottom: 20px;
}

/* ========== 收支清單頁面 ========== */
.page-ledger {
    background: var(--bg-light-gradient-reverse);
    min-height: 100vh;
}

.ledger-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-light-gradient);
    border-bottom: 1px solid var(--color-primary-light-rgba-20);
    gap: 12px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-08);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
}

.search-btn,
.bill-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    font-size: var(--font-xl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-full);
    transition: all var(--transition-fast);
    color: var(--text-primary);
}

.search-btn:hover,
.bill-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-15) 0%, var(--color-primary-light-rgba-15) 100%);
    transform: scale(1.05);
}

.search-btn:active,
.bill-btn:active {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-25) 0%, var(--color-primary-light-rgba-25) 100%);
    transform: scale(0.95);
}

.daily-expense-display {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    margin-left: auto;
    padding: 8px 12px;
    background: var(--color-primary-rgba-10);
    border-radius: 12px;
    border: 1px solid var(--color-primary-rgba-20);
}

.daily-expense-label {
    font-size: 11px;
    color: var(--text-secondary);
    margin-bottom: 4px;
    font-weight: 500;
}

.daily-expense-amount {
    font-size: 18px;
    font-weight: 700;
    color: var(--color-primary);
    line-height: 1.2;
}

@media (max-width: 480px) {
    .daily-expense-display {
        padding: 6px 10px;
    }
    
    .daily-expense-label {
        font-size: 10px;
    }
    
    .daily-expense-amount {
        font-size: 16px;
    }
}

.ledger-title {
    font-size: var(--font-lg);
    font-weight: var(--font-semibold);
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-lighter) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
    text-rendering: optimizeLegibility;
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    text-align: center;
}

.bill-btn {
    font-size: var(--font-md);
    color: var(--text-secondary);
}

/* 記帳本類型標籤切換 */
.ledger-type-tabs {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    padding: 12px 16px;
    background: var(--bg-gradient-light);
    border-bottom: 1px solid var(--color-primary-light-rgba-20);
    box-shadow: var(--shadow-sm);
}

.ledger-type-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    border: none;
    background: transparent;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 70px;
    position: relative;
    gap: 4px;
}

.ledger-type-tab:hover {
    background: var(--color-primary-light-rgba-10);
}

.ledger-type-tab.active {
    background: var(--bg-gradient-light);
    box-shadow: var(--shadow-primary);
    transform: translateY(-1px);
    border: 2px solid var(--color-primary-lighter);
}

.ledger-tab-icon {
    font-size: 24px;
    margin-bottom: 0;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
    transition: transform 0.3s ease;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

.ledger-type-tab.active .ledger-tab-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 2px 4px var(--color-primary-rgba-30));
}

.ledger-tab-text {
    font-size: 13px;
    color: var(--text-tertiary);
    font-weight: 500;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.ledger-type-tab.active .ledger-tab-text {
    color: var(--color-primary);
    font-weight: 600;
    font-size: 13px;
}

/* 響應式：標籤調整 */
@media (max-width: 576px) {
    .ledger-type-tabs {
        gap: 8px;
        padding: 10px 12px;
    }
    
    .ledger-type-tab {
        padding: 8px 16px;
        min-width: 60px;
    }
    
    .ledger-tab-icon {
        font-size: 22px;
    }
    
    .ledger-tab-text {
        font-size: 12px;
    }
}

.ledger-summary {
    padding: var(--spacing-lg);
    background: var(--bg-light-gradient);
    border-bottom: 1px solid var(--color-primary-light-rgba-15);
    margin: 0 16px;
    border-radius: 20px;
    margin-top: 12px;
    margin-bottom: 12px;
    box-shadow: 0 4px 12px var(--color-primary-rgba-10);
}

.summary-month-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
    flex-wrap: nowrap;
}

.summary-month-nav .summary-month {
    margin-bottom: 0;
    text-align: center;
    flex: 1;
}

.month-nav-btn {
    border: 1px solid var(--border-light);
    background: var(--bg-white);
    color: var(--text-secondary);
    padding: 8px 10px;
    border-radius: 12px;
    font-size: var(--font-sm);
    font-weight: var(--font-semibold);
    cursor: pointer;
    white-space: nowrap;
}

.summary-month {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-lighter) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--spacing-md);
}

.summary-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--spacing-sm);
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 12px 16px;
    background: var(--bg-light-gradient);
    border-radius: 12px;
    border: 1px solid var(--color-primary-light-rgba-20);
    transition: all 0.3s ease;
    flex: 1;
}

.stat-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-primary-rgba-15);
    border-color: var(--color-primary-light-rgba-40);
}

.stat-label {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
    margin-bottom: var(--spacing-xs);
}

.stat-value {
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    font-variant-numeric: tabular-nums;
    font-weight: 800 !important;
    letter-spacing: 0.2px;
}

.stat-value.income {
    color: var(--color-success);
}

.stat-value.expense {
    color: var(--color-danger);
}

.stat-value.transfer {
    color: var(--color-info);
}

.transaction-amount.transfer {
    color: var(--color-info);
}

.summary-line {
    font-size: var(--font-sm);
    color: var(--text-secondary);
    margin-top: var(--spacing-sm);
}

.ledger-list {
    padding: var(--spacing-sm) 16px;
    background: transparent;
    overflow-y: auto;
    max-height: calc(100vh - 300px);
    -webkit-overflow-scrolling: touch;
}

.transaction-group {
    margin-bottom: var(--spacing-lg);
    background: var(--bg-light-gradient);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 4px 16px var(--color-primary-rgba-12);
    border: 1px solid var(--color-primary-light-rgba-20);
    transition: all 0.3s ease;
}

.transaction-group:hover {
    box-shadow: 0 6px 20px var(--color-primary-rgba-18);
    transform: translateY(-2px);
}

.group-header {
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, var(--color-primary-light-rgba-15) 0%, var(--color-primary-light-rgba-15) 100%);
    color: var(--color-primary);
    font-size: var(--font-sm);
    font-weight: var(--font-semibold);
    border-bottom: 1px solid var(--color-primary-light-rgba-20);
    position: sticky;
    top: 0;
    z-index: 5;
    backdrop-filter: blur(10px);
}

.transaction-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--color-primary-light-rgba-10);
    background: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

@media (min-width: 480px) {
    .transaction-item {
        padding: 14px 16px;
        border-radius: 16px;
        margin: 6px 12px;
        border: 1px solid color-mix(in srgb, var(--border-light) 68%, transparent);
        background: color-mix(in srgb, var(--bg-white) 88%, transparent);
        box-shadow: 0 10px 22px rgba(15, 23, 42, 0.08);
    }

    .transaction-item:last-child {
        border-bottom: 1px solid color-mix(in srgb, var(--border-light) 68%, transparent);
    }
}

.transaction-item:last-child {
    border-bottom: none;
}

.transaction-item:hover {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-08) 0%, var(--color-primary-light-rgba-08) 100%);
    transform: translateX(4px);
}

.transaction-item:active {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-15) 0%, var(--color-primary-light-rgba-15) 100%);
    transform: scale(0.98);
}

.transaction-item.has-image {
    cursor: pointer;
}

.transaction-image-indicator {
    font-size: 12px;
    color: #999;
    margin-top: 4px;
}

.transaction-image-preview {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10000;
    background: rgba(0, 0, 0, 0.9);
    padding: 20px;
    border-radius: 12px;
    max-width: 90vw;
    max-height: 90vh;
}

.transaction-image-preview img {
    max-width: 100%;
    max-height: 80vh;
    border-radius: var(--radius-sm);
}

.image-preview {
    position: relative;
    margin: 12px 0;
    padding: 8px;
    background: var(--bg-light);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.image-preview img {
    max-width: 100%;
    max-height: 150px;
    border-radius: 8px;
}

.image-remove-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 24px;
    height: 24px;
    border: none;
    background: rgba(0, 0, 0, 0.6);
    color: var(--text-white);
    border-radius: var(--radius-full);
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

.image-remove-btn:hover {
    background: rgba(0, 0, 0, 0.8);
    transform: scale(1.1);
}

.image-remove-btn:active {
    transform: scale(0.95);
}

.transaction-icon {
    width: 48px;
    height: 48px;
    margin-right: var(--spacing-md);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: var(--font-xxl);
    border-radius: 16px;
    background: linear-gradient(135deg,
        var(--color-primary-light-rgba-20, color-mix(in srgb, var(--color-primary) 15%, transparent)) 0%,
        var(--color-primary-light-rgba-08, color-mix(in srgb, var(--color-primary) 8%, transparent)) 100%);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--color-primary) 18%, transparent);
    transition: all 0.3s ease;
}

.transaction-item:hover .transaction-icon {
    transform: scale(1.1);
    box-shadow: 0 4px 12px color-mix(in srgb, var(--color-primary) 28%, transparent);
}

.transaction-icon svg {
    width: 100%;
    height: 100%;
}

.transaction-info {
    flex: 1;
    min-width: 0;
}

.transaction-category {
    font-size: var(--font-base);
    font-weight: var(--font-medium);
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.transaction-desc {
    font-size: 12px;
    color: #999;
    margin-bottom: 2px;
}

.transaction-carrier {
    font-size: 11px;
    color: #999;
    margin-top: 4px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.transaction-account {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
    margin-bottom: 2px;
}

.transaction-member {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
    margin-bottom: 2px;
}

.member-display {
    padding: 8px 12px;
    margin: 8px 0;
    background: var(--bg-light);
    border-radius: 8px;
    font-size: 14px;
    color: #666;
}

.member-select-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10004;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
}

.member-select-content {
    background: white;
    border-radius: 20px;
    padding: 24px;
    max-width: 400px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    margin: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.member-list {
    max-height: 50vh;
    overflow-y: auto;
    margin-bottom: 16px;
}

.member-item {
    display: flex;
    align-items: center;
    padding: 12px;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    margin-bottom: 8px;
    background: var(--bg-white);
    cursor: pointer;
    transition: all 0.2s ease;
}

.member-item:hover {
    border-color: #ff9ec7;
    background: var(--bg-lighter);
}

.member-item.selected {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, var(--bg-light-gradient) 0%, var(--bg-light-gradient) 100%);
}

.member-item-icon {
    font-size: 24px;
    margin-right: 12px;
    flex-shrink: 0;
}

.member-item-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

.member-item-check {
    font-size: 18px;
    color: var(--color-primary);
    font-weight: 600;
}

.transaction-member {
    font-size: 12px;
    color: #999;
    margin-bottom: 2px;
}

.member-display {
    padding: 8px 12px;
    margin: 8px 0;
    background: var(--bg-light);
    border-radius: 8px;
    font-size: 14px;
    color: #666;
}

.member-select-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10004;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
}

.member-select-content {
    background: white;
    border-radius: 20px;
    padding: 24px;
    max-width: 400px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    margin: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.member-list {
    max-height: 50vh;
    overflow-y: auto;
    margin-bottom: 16px;
}

.member-item {
    display: flex;
    align-items: center;
    padding: 12px;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    margin-bottom: 8px;
    background: var(--bg-white);
    cursor: pointer;
    transition: all 0.2s ease;
}

.member-item:hover {
    border-color: #ff9ec7;
    background: var(--bg-lighter);
}

.member-item.selected {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, var(--bg-light-gradient) 0%, var(--bg-light-gradient) 100%);
}

.member-item-icon {
    font-size: 24px;
    margin-right: 12px;
    flex-shrink: 0;
}

.member-item-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

.member-item-check {
    font-size: 18px;
    color: var(--color-primary);
    font-weight: 600;
}

/* ===============================
   交易清單：右側金額膠囊
   =============================== */

.transaction-amount-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;

  margin-left: var(--spacing-md);
  padding: 8px 14px;

  background: var(--txn-amount-bg);
  border: 1px solid var(--txn-amount-border);
  border-radius: 14px;

  box-shadow: var(--shadow-soft);
  transition:
    background 0.3s ease,
    border-color 0.3s ease,
    transform 0.2s ease;
}

/* 滑過整筆交易時的效果 */
.transaction-item:hover .transaction-amount-wrapper {
  background: var(--txn-amount-bg-hover);
  border-color: var(--txn-amount-border-hover);
  transform: scale(1.03);
}

.transaction-item:hover .transaction-amount-wrapper {
    background: linear-gradient(135deg, rgba(255, 158, 199, 0.15) 0%, rgba(255, 190, 220, 0.15) 100%);
    border-color: rgba(255, 158, 199, 0.4);
    transform: scale(1.02);
}

.transaction-amount {
    text-align: right;
    font-size: var(--font-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    font-variant-numeric: tabular-nums;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.transaction-amount.expense {
    color: var(--color-error);
}

.transaction-amount.income {
    color: var(--color-success);
}

.transaction-delete-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--color-error-light);
    border-radius: var(--radius-sm);
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    flex-shrink: 0;
    opacity: 0.7;
    color: var(--color-error);
}

.transaction-delete-btn:hover {
    background: var(--color-error-light);
    opacity: 1;
    transform: scale(1.1);
    box-shadow: var(--shadow-sm);
}

.transaction-delete-btn:active {
    background: var(--color-error-light);
    transform: scale(0.95);
}

.amount-value {
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    margin-bottom: 2px;
}

.amount-value.income {
    color: var(--color-success);
}

.amount-value.expense {
    color: var(--color-error);
}

/* ========== 查看歷史記錄按鈕 ========== */
.history-btn-container {
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
}

.daily-expense-in-history {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 20px;
    background: var(--color-primary-rgba-10);
    border-radius: 12px;
    border: 1px solid var(--color-primary-rgba-20);
    min-width: 200px;
}

.daily-expense-in-history .daily-expense-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 6px;
    font-weight: 500;
}

.daily-expense-in-history .daily-expense-amount {
    font-size: 20px;
    font-weight: 700;
    color: var(--color-primary);
    line-height: 1.2;
}

.view-history-btn {
    background: var(--bg-gradient);
    color: var(--text-white);
    border: none;
    padding: 14px 28px;
    border-radius: 16px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-primary);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
}

.view-history-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.view-history-btn:hover::before {
    left: 100%;
}

.view-history-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
}

.view-history-btn:active {
    transform: translateY(0);
    box-shadow: var(--shadow-primary);
}

.history-btn-icon {
    font-size: 18px;
    display: inline-block;
    transition: transform 0.3s ease;
}

.view-history-btn:hover .history-btn-icon {
    transform: rotate(15deg) scale(1.1);
}

.history-btn-text {
    font-weight: 600;
    letter-spacing: 0.3px;
}

.history-btn-count {
    font-size: 13px;
    opacity: 0.9;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 8px;
    border-radius: 8px;
    margin-left: 4px;
}

/* 手機端響應式 */
@media (max-width: 480px) {
    .history-btn-container {
        padding: 16px;
        gap: 12px;
    }
    
    .daily-expense-in-history {
        padding: 10px 16px;
        min-width: 180px;
        width: 100%;
        max-width: 300px;
    }
    
    .daily-expense-in-history .daily-expense-label {
        font-size: 11px;
    }
    
    .daily-expense-in-history .daily-expense-amount {
        font-size: 18px;
    }
    
    .view-history-btn {
        padding: 12px 20px;
        font-size: 14px;
        width: 100%;
        max-width: 300px;
    }
    
    .history-btn-icon {
        font-size: 16px;
    }
    
    .history-btn-count {
        font-size: 12px;
        padding: 2px 6px;
    }

    .action-buttons {
        margin-left: auto;
        flex-wrap: nowrap;
        gap: 10px;
    }

    .action-buttons .buy-action-btn-large {
        margin-left: 0;
    }

    .action-buttons .dca-action-btn-large {
        margin-left: 0;
    }
}

/* ========== 浮動添加按鈕 ========== */
.fab-btn {
    position: fixed;
    bottom: 120px;
    right: 20px;
    width: 56px;
    height: 56px;
    border: none;
    border-radius: var(--radius-full);
    background: var(--bg-gradient);
    color: var(--text-white);
    font-size: var(--font-xxl);
    cursor: pointer;
    box-shadow: var(--shadow-primary-lg);
    z-index: 99;
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 響應式：浮動按鈕位置調整 */
@media (min-width: 576px) {
    .fab-btn {
        right: 24px;
        width: 60px;
        height: 60px;
        font-size: 26px;
    }
}

@media (min-width: 768px) {
    .fab-btn {
        right: 40px;
        width: 64px;
        height: 64px;
        font-size: 28px;
    }
}

@media (min-width: 992px) {
    .fab-btn {
        right: 60px;
    }
}

@media (min-width: 1200px) {
    .fab-btn {
        right: 80px;
    }
}

.fab-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
}

.fab-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
    background: var(--color-primary-dark);
}

.page-input .fab-btn {
    display: none;
}

/* ========== 底部導航欄 ========== */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    background: var(--bg-white);
    border-top: 1px solid var(--border-light);
    padding: 10px 0;
    z-index: 3000;
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
    width: 100%;
}

/* 響應式：底部導航欄調整 */
@media (min-width: 576px) {
    .bottom-nav {
        padding: 10px 0;
    }
}

@media (min-width: 768px) {
    .bottom-nav {
        padding: 12px 0;
    }
}

@media (min-width: 992px) {
    .bottom-nav {
        padding: 14px 0;
    }
}

.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4px 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    transition: all 0.2s ease;
}

.nav-icon {
    width: 32px;
    height: 32px;
    margin-bottom: 6px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-block;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

.nav-text {
    font-size: 13px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 600;
    letter-spacing: 0.3px;
    white-space: nowrap;
}

.nav-item.active .nav-icon {
    transform: scale(1.15);
    filter: drop-shadow(0 2px 6px var(--color-primary-rgba-40));
}

.nav-item.active .nav-text {
    color: var(--color-primary);
    font-weight: 800;
    font-size: 14px;
}

/* 手機優化：增大觸控目標和字體 */
@media (max-width: 576px) {
    .nav-item {
        min-height: 68px;
        padding: 10px 4px;
    }
    
    .nav-icon {
        width: 36px;
        height: 36px;
        margin-bottom: 8px;
    }
    
    .nav-text {
        font-size: 14px;
        font-weight: 700;
    }

    .side-action-btn {
        padding: 6px 10px;
        font-size: 12px;
        gap: 6px;
        box-shadow: 0 3px 10px rgba(15, 23, 42, 0.10);
    }
    
    .nav-item.active .nav-text {
        font-size: 15px;
        font-weight: 900;
    }
}

/* ========== 圖表分析頁面 ========== */
.page-chart {
    min-height: calc(100vh - 60px);
    padding: 16px 0 80px 0;
    background: var(--bg-primary);
    width: 100%;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
}

/* 響應式：圖表頁面內邊距調整 */
@media (min-width: 576px) {
    .page-chart {
        padding-left: 20px;
        padding-right: 20px;
    }
}

@media (min-width: 768px) {
    .page-chart {
        padding-left: 40px;
        padding-right: 40px;
    }
}

@media (min-width: 992px) {
    .page-chart {
        padding-left: 60px;
        padding-right: 60px;
    }
}

@media (min-width: 1200px) {
    .page-chart {
        padding-left: 80px;
        padding-right: 80px;
    }
}

.chart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    gap: var(--spacing-md);
}

.chart-month-nav {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.chart-month-text {
    font-size: var(--font-md);
    font-weight: var(--font-semibold);
    color: var(--text-secondary);
    min-width: 72px;
    text-align: center;
    font-variant-numeric: tabular-nums;
}

.chart-title {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    color: #333;
    margin: 0;
    flex: 1;
    text-align: center;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
    text-rendering: optimizeLegibility;
}

.chart-type-tabs {
    display: none;
}

.chart-type-btn {
    flex: 1;
    padding: 10px 16px;
    border: 2px solid var(--border-light);
    border-radius: var(--radius-xl);
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
}

.chart-type-btn:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.chart-type-btn.active {
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    color: var(--text-white);
    font-weight: var(--font-semibold);
    box-shadow: var(--shadow-primary);
}

.chart-dimension-tabs {
    display: none;
}

.dimension-btn {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
}

.dimension-btn:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.dimension-btn.active {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary);
    color: var(--color-primary);
    font-weight: var(--font-semibold);
    box-shadow: var(--shadow-primary);
}

/* 圖表區塊 */
.chart-section {
    margin-bottom: var(--spacing-xxl);
    background: var(--bg-white);
    border: 1px solid var(--card-border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-xxl);
    box-shadow: var(--shadow-md);
}

.chart-section-title {
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

.chart-range-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 12px 0 4px 0;
}

.chart-range-btn {
    border: 1px solid var(--border-light);
    background: var(--bg-light);
    color: var(--text-secondary);
    padding: 6px 10px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.2px;
    transition: all 0.15s ease;
}

.chart-range-btn.active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: #fff;
    box-shadow: 0 8px 20px var(--color-primary-rgba-20);
}

.chart-range-btn:active {
    transform: translateY(1px);
}

.chart-tab-bar {
    display: flex;
    gap: 10px;
    margin: 12px 0 6px 0;
}

.chart-tab-btn {
    flex: 1;
    padding: 12px 16px;
    background: linear-gradient(180deg, color-mix(in srgb, var(--bg-white) 96%, transparent) 0%, color-mix(in srgb, var(--bg-white) 88%, transparent) 100%);
    border-radius: var(--radius-xl);
    color: var(--text-secondary);
    font-weight: var(--font-semibold);
    letter-spacing: 0.2px;
    transition: all 0.2s ease;
    border: 1px solid var(--control-border-color);
    box-shadow: var(--shadow-xs);
}

.chart-tab-btn:hover {
    color: var(--text-primary);
    border-color: color-mix(in srgb, var(--color-primary) 26%, var(--control-border-color));
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
}

.chart-tab-btn.active {
    color: var(--text-primary);
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-primary) 14%, var(--bg-white)) 0%, color-mix(in srgb, var(--color-primary) 10%, var(--bg-white)) 100%);
    border-color: color-mix(in srgb, var(--color-primary) 36%, var(--control-border-color));
    box-shadow: 0 10px 24px color-mix(in srgb, var(--color-primary) 22%, rgba(15, 23, 42, 0.16));
    transform: translateY(-1px);
}

.chart-page {
    display: none;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 180ms ease, transform 180ms ease;
}

.chart-page.chart-page--active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

@media (min-width: 768px) and (max-width: 1024px) {
    .chart-container {
        height: clamp(260px, 38vw, 420px);
    }
    .chart-container--square {
        min-height: 280px;
    }
}

@media (min-width: 1025px) {
    .chart-container {
        height: clamp(280px, 32vw, 460px);
    }
    .chart-container--square {
        min-height: 300px;
    }
}

@media (max-width: 640px) {
    .chart-section {
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
    }
    .chart-section-title {
        font-size: var(--font-sm);
    }
    .chart-range-tabs {
        gap: 6px;
    }
    .chart-range-btn {
        padding: 6px 9px;
        font-size: 11px;
    }
    .chart-container {
        padding: var(--spacing-md) var(--spacing-sm);
        min-height: 240px;
        overflow: hidden;
    }
    .chart-container--square {
        aspect-ratio: 1 / 1;
        min-height: 240px;
    }
    .chart-container--square canvas {
        height: 100% !important;
        width: 100% !important;
    }
    .chart-container canvas {
        width: 100% !important;
        height: 240px !important;
        min-width: 0;
    }
    .chart-tab-bar {
        margin: 10px var(--spacing-md) 2px;
        gap: 8px;
    }
    .chart-tab-btn {
        padding: 10px 12px;
        font-size: var(--font-sm);
        box-shadow: var(--shadow-xs);
    }
}

.chart-container {
    padding: var(--spacing-lg);
    display: flex;
    justify-content: center;
    align-items: center;
    height: clamp(240px, 40vw, 360px);
}

.chart-container--square {
    aspect-ratio: 1 / 1;
    height: auto;
    min-height: 260px;
}

.chart-container--square canvas {
    width: 100% !important;
    height: 100% !important;
    max-height: 420px;
    max-width: 420px;
}

.chart-insight {
    padding: 0 var(--spacing-lg) var(--spacing-lg);
    font-size: 13px;
    font-weight: 800;
    color: var(--text-secondary);
    text-align: center;
    line-height: 1.6;
}

.chart-container canvas {
    max-width: 100%;
    max-height: 100%;
}

.chart-legend {
    padding: var(--spacing-lg);
    background: var(--bg-white);
    max-height: calc(100vh - 500px);
    overflow-y: auto;
}

.chart-legend-header {
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border-light);
}

.legend-total {
    font-size: var(--font-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    text-align: center;
}

.chart-legend-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.legend-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-md);
    border: 2px solid var(--border-light);
    border-radius: var(--radius-md);
    background: var(--bg-light);
    transition: var(--transition-base);
}

.legend-item:hover {
    background: var(--color-primary-rgba-08);
    border-color: var(--color-primary-light);
    transform: translateX(4px);
}

.legend-color {
    width: 20px;
    height: 20px;
    border-radius: 6px;
    margin-right: 12px;
    flex-shrink: 0;
    border: 2px solid;
}

.legend-info {
    flex: 1;
    min-width: 0;
}

.legend-label {
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.legend-value {
    font-size: var(--font-sm);
    color: var(--text-secondary);
}

.legend-value {
    font-size: var(--font-md);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-left: var(--spacing-md);
}

.legend-percentage {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
    margin-left: var(--spacing-sm);
}

/* ========== 預算設定頁面 ========== */
.page-budget {
    min-height: calc(100vh - 60px);
    padding-bottom: 80px;
    background: var(--bg-primary);
}

.page-monthly-planner {
    min-height: calc(100vh - 60px);
    padding-bottom: 80px;
    background: var(--bg-primary);
}

.monthly-planner-header {
    display: flex;
    align-items: center;
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 0;
    z-index: 100;
}

.monthly-planner-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    text-align: center;
}

.monthly-planner-container {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.monthly-planner-card {
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    box-shadow: var(--shadow-soft);
    border: 1px solid var(--card-border-color);
}

.monthly-planner-card--savings {
    background: linear-gradient(135deg, var(--bg-white) 0%, rgba(52, 152, 219, 0.05) 100%);
    border-color: rgba(52, 152, 219, 0.3);
}

.monthly-planner-card-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.title-icon {
    font-size: 18px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.savings-type-tabs {
    display: flex;
    gap: 4px;
    margin-left: auto;
}

.savings-type-tab {
    padding: 4px 12px;
    border: 1px solid var(--border-light);
    border-radius: 16px;
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.savings-type-tab:hover {
    background: var(--bg-light);
    color: var(--text-primary);
}

.savings-type-tab.active {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.savings-type-tab[data-type="stock"].active {
    background: linear-gradient(135deg, #3498db, #2980b9);
}

.savings-type-tab[data-type="savings"].active {
    background: linear-gradient(135deg, #27ae60, #229954);
}

.monthly-planner-form {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
}

.monthly-planner-items {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 8px;
}

.monthly-planner-empty {
    padding: 12px;
    border-radius: var(--radius-md);
    border: 1px dashed var(--border-medium);
    background: var(--bg-light);
    color: var(--text-tertiary);
    font-size: 13px;
    text-align: center;
}

/* 儲蓄項目樣式 */
.savings-item-row {
    display: grid;
    grid-template-columns: auto 1fr 100px 1fr auto;
    gap: 8px;
    align-items: center;
    padding: 8px 12px;
    border-radius: var(--radius-sm);
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    transition: all 0.2s ease;
}

.savings-item-row:hover {
    background: var(--bg-white);
    border-color: var(--border-medium);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.savings-item-icon {
    font-size: 18px;
    width: 24px;
    text-align: center;
}

.savings-item-name {
    font-weight: 500;
}

/* 儲蓄類型顏色編碼 */
.savings-item-row[data-type="stock"] {
    border-left: 4px solid #3498db;
    background: linear-gradient(to right, rgba(52, 152, 219, 0.05), transparent);
}

.savings-item-row[data-type="savings"] {
    border-left: 4px solid #27ae60;
    background: linear-gradient(to right, rgba(39, 174, 96, 0.05), transparent);
}

.savings-item-row[data-type="stock"]:hover {
    background: linear-gradient(to right, rgba(52, 152, 219, 0.1), rgba(255, 255, 255, 0.9));
}

.savings-item-row[data-type="savings"]:hover {
    background: linear-gradient(to right, rgba(39, 174, 96, 0.1), rgba(255, 255, 255, 0.9));
}

/* 標籤懸停效果 */
.savings-type-tab:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.savings-type-tab.active:hover {
    transform: translateY(0);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
}

/* 模板按鈕懸停效果 */
.savings-template-btn:hover {
    background: white !important;
    border-color: var(--color-primary) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.monthly-planner-item-row {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr 1.4fr 44px;
    gap: 10px;
    align-items: center;
    padding: 10px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
    background: var(--bg-white);
    box-shadow: var(--shadow-sm);
}

.monthly-planner-item-name,
.monthly-planner-item-amount,
.monthly-planner-item-note {
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: 2px solid var(--border-light);
    background: var(--bg-white);
    font-size: 14px;
    color: var(--text-primary);
    outline: none;
    transition: var(--transition-fast);
}

.monthly-planner-item-name:focus,
.monthly-planner-item-amount:focus,
.monthly-planner-item-note:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10);
}

.monthly-planner-item-delete {
    height: 40px;
    width: 44px;
    border-radius: 12px;
    border: 2px solid var(--border-light);
    background: var(--bg-white);
    color: var(--text-tertiary);
    font-size: 16px;
    font-weight: 800;
    cursor: pointer;
    transition: var(--transition-fast);
}

.monthly-planner-item-delete:active {
    transform: scale(0.98);
}

.monthly-planner-subtotal {
    margin-top: 12px;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

.monthly-planner-subtotal-label {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-secondary);
}

.monthly-planner-subtotal-value {
    font-size: 16px;
    font-weight: 900;
    color: var(--text-primary);
}

.monthly-planner-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.monthly-planner-label {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 600;
}

.monthly-planner-input {
    width: 100%;
    padding: 12px 14px;
    border-radius: var(--radius-md);
    border: 2px solid var(--border-light);
    background: var(--bg-white);
    font-size: 16px;
    color: var(--text-primary);
    outline: none;
    transition: var(--transition-fast);
}

.monthly-planner-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10);
}

.monthly-planner-results {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.monthly-planner-result-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    background: var(--bg-light);
    border: 1px solid var(--border-light);
}

.monthly-planner-result-row--highlight {
    background: color-mix(in srgb, var(--color-primary-rgba-08) 100%, transparent);
    border-color: color-mix(in srgb, var(--color-primary-rgba-18) 100%, transparent);
}

.monthly-planner-result-label {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 700;
}

.monthly-planner-result-value {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
}

.monthly-planner-hint {
    margin-top: 8px;
    font-size: 13px;
    line-height: 1.4;
    color: var(--text-secondary);
}

.monthly-planner-hint--success {
    color: var(--color-success);
    font-weight: 700;
}

.monthly-planner-hint--danger {
    color: var(--color-error);
    font-weight: 700;
}

.monthly-planner-actions {
    display: flex;
    gap: 12px;
}

.monthly-planner-actions--inline {
    margin-top: 12px;
}

.monthly-planner-goal-form {
    display: grid;
    grid-template-columns: 1.4fr 1fr 1fr 1fr;
    gap: 10px;
    align-items: center;
}

.monthly-planner-goal-input {
    width: 100%;
    padding: 12px 12px;
    border-radius: 12px;
    border: 2px solid var(--border-light);
    background: var(--bg-white);
    font-size: 14px;
    color: var(--text-primary);
    outline: none;
    transition: var(--transition-fast);
}

.monthly-planner-goal-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10);
}

.monthly-planner-goal-list {
    margin-top: 14px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.monthly-planner-goal-card {
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
    background: var(--bg-white);
    box-shadow: var(--shadow-sm);
    padding: 14px;
}

.monthly-planner-goal-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 10px;
}

.monthly-planner-goal-name {
    font-size: 16px;
    font-weight: 900;
    color: var(--text-primary);
}

.monthly-planner-goal-delete {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    border: 2px solid var(--border-light);
    background: var(--bg-white);
    color: var(--text-tertiary);
    font-size: 16px;
    font-weight: 800;
    cursor: pointer;
}

.monthly-planner-goal-meta {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 10px;
    margin-bottom: 10px;
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 700;
}

.monthly-planner-goal-progress {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 12px;
}

.monthly-planner-goal-bar {
    flex: 1;
    height: 10px;
    border-radius: 999px;
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    overflow: hidden;
}

.monthly-planner-goal-bar-fill {
    height: 100%;
    border-radius: 999px;
    background: var(--bg-gradient);
}

.monthly-planner-goal-progress-text {
    font-size: 12px;
    color: var(--text-tertiary);
    font-weight: 800;
    min-width: 100px;
    text-align: right;
    white-space: nowrap;
}

.monthly-planner-goal-eta {
    margin-top: 10px;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.4;
}

.monthly-planner-goal-card.goal-completed {
    border: 2px solid var(--color-success);
    background: linear-gradient(145deg, var(--bg-white) 0%, rgba(var(--color-success-rgb), 0.05) 100%);
    box-shadow: 0 8px 24px rgba(var(--color-success-rgb), 0.15);
}

.monthly-planner-goal-card.goal-completed .monthly-planner-goal-bar-fill {
    background: var(--color-success);
}

.monthly-planner-goal-status {
    margin-top: 8px;
    font-size: 14px;
    font-weight: 800;
    color: var(--color-success);
    text-align: center;
    padding: 6px 12px;
    background: rgba(var(--color-success-rgb), 0.1);
    border-radius: 8px;
    border: 1px solid rgba(var(--color-success-rgb), 0.2);
}

/* 轉帳專用帳戶選擇區域 */
.transfer-accounts-section {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: stretch;
    gap: 12px;
    padding: 12px 16px;
    background: rgba(var(--color-primary-rgb), 0.05);
    border-radius: 12px;
    margin: 8px 0;
    border: 1px solid rgba(var(--color-primary-rgb), 0.15);
    position: relative;
    z-index: 10;
}

.transfer-account-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
}

.transfer-account-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--color-primary);
}

.transfer-account-select {
    padding: 8px 12px;
    border: 1px solid var(--border-light);
    border-radius: 8px;
    background: var(--bg-white);
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    min-height: 40px;
    width: 100%;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 16px;
    padding-right: 32px;
    position: relative;
    z-index: 1;
}

.transfer-account-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);
}

.transfer-arrow {
    font-size: 18px;
    color: var(--color-primary);
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
}

.monthly-planner-goal-actions {
    margin-top: 12px;
    display: flex;
    gap: 12px;
}

@media (max-width: 768px) {
    .monthly-planner-goal-form {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 480px) {
    .monthly-planner-goal-form {
        grid-template-columns: 1fr;
    }

    .monthly-planner-goal-meta {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 480px) {
    .monthly-planner-item-row {
        grid-template-columns: 1fr 0.7fr 42px;
        grid-template-areas:
            "name amount delete"
            "note note delete";
    }

    .monthly-planner-item-name {
        grid-area: name;
    }

    .monthly-planner-item-amount {
        grid-area: amount;
    }

    .monthly-planner-item-note {
        grid-area: note;
    }

    .monthly-planner-item-delete {
        grid-area: delete;
        height: 84px;
    }
}

.monthly-planner-btn {
    flex: 1;
    padding: 14px 16px;
    border-radius: 14px;
    border: none;
    cursor: pointer;
    font-size: 15px;
    font-weight: 800;
    background: var(--bg-gradient);
    color: var(--text-white);
    box-shadow: var(--shadow-primary);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), opacity var(--transition-fast);
}

.monthly-planner-btn:active {
    transform: scale(0.98);
}

.monthly-planner-btn--secondary {
    background: var(--bg-white);
    color: var(--text-primary);
    border: 2px solid var(--border-light);
    box-shadow: var(--shadow-sm);
}

.monthly-planner-btn--outline {
    background: transparent;
    color: var(--color-primary);
    border: 2px solid var(--color-primary);
    box-shadow: none;
}

.monthly-planner-btn--outline:hover {
    background: var(--color-primary);
    color: white;
}

.savings-item-row {
    position: relative;
}

.savings-item-row[data-type="stock"] {
    border-left: 4px solid #3498db;
    background: linear-gradient(90deg, rgba(52, 152, 219, 0.05) 0%, transparent 100%);
}

.savings-item-row[data-type="savings"] {
    border-left: 4px solid #27ae60;
    background: linear-gradient(90deg, rgba(39, 174, 96, 0.05) 0%, transparent 100%);
}

.savings-item-icon {
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    opacity: 0.7;
}

.savings-item-row[data-type="stock"] .savings-item-name,
.savings-item-row[data-type="savings"] .savings-item-name {
    padding-left: 28px;
}

/* ========== 每日預算追蹤頁面 ========== */
.page-daily-budget {
    min-height: calc(100vh - 60px);
    padding-bottom: 20px;
    background: var(--bg-primary);
}

:root.dark .page-daily-budget {
    background: var(--bg-primary-dark);
}

.daily-budget-header {
    display: flex;
    align-items: center;
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 0;
    z-index: 100;
}

:root.dark .daily-budget-header {
    background: var(--bg-dark);
    border-bottom-color: var(--border-dark);
}

.daily-budget-back-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-primary);
    cursor: pointer;
    padding: 8px;
    margin-right: 12px;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
}

.daily-budget-back-btn:hover {
    background: var(--bg-lighter);
    transform: scale(1.05);
}

:root.dark .daily-budget-back-btn:hover {
    background: var(--bg-darker);
}

.daily-budget-back-btn:active {
    transform: scale(0.95);
}

.daily-budget-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .daily-budget-title {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.daily-budget-summary {
    padding: 16px;
}

.daily-budget-summary-card {
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    box-shadow: var(--shadow-md);
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--spacing-lg);
}

:root.dark .daily-budget-summary-card {
    background: var(--bg-dark);
    box-shadow: var(--shadow-md-dark);
}

.summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.summary-item.summary-item--cta {
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
    background: var(--bg-light);
    cursor: pointer;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
}

:root.dark .summary-item.summary-item--cta {
    border-color: var(--border-dark);
    background: var(--bg-darker);
}

.summary-item.summary-item--cta:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-primary);
}

.summary-item.summary-item--cta .summary-value {
    color: var(--color-primary);
}

.summary-item.summary-item--cta .summary-cta-text {
    font-size: 11px;
    color: var(--text-tertiary);
    margin-top: 6px;
}

.summary-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-bottom: 8px;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .summary-label {
    color: var(--text-tertiary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.summary-value {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    font-variant-numeric: tabular-nums;
    text-rendering: optimizeLegibility;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .summary-value {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.summary-value.highlight {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.3);
}

:root.dark .summary-value.highlight {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.5);
}

.summary-value.over {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.3);
}

:root.dark .summary-value.over {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.5);
}

.summary-value.positive {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.3);
}

:root.dark .summary-value.positive {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.5);
}

.summary-value.negative {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.3);
}

:root.dark .summary-value.negative {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.5);
}

/* ========== 每日詳情模態 ========== */
.daily-detail-modal {
    position: fixed;
    inset: 0;
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: color-mix(in srgb, var(--bg-primary, #050816) 45%, rgba(0, 0, 0, 0.78));
    backdrop-filter: blur(18px) saturate(120%);
    z-index: 10006;
}

.daily-detail-modal__panel {
    width: min(520px, 100%);
    max-height: 80vh;
    overflow: hidden;
    background: var(--bg-white);
    border: 1px solid var(--border-light);
    border-radius: 24px;
    padding: 28px;
    box-shadow: var(--shadow-primary-lg, 0 24px 60px rgba(3, 7, 18, 0.7));
    color: var(--text-primary);
    animation: slideIn 0.3s ease-out;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.daily-detail-modal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.daily-detail-modal__title {
    margin: 0;
    font-size: 22px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
}

.daily-detail-modal__icon {
    font-size: 28px;
}

.daily-detail-close-btn {
    background: none;
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 12px;
    font-size: 24px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast, 0.2s ease);
}

.daily-detail-close-btn:hover {
    background: var(--bg-light, rgba(255, 255, 255, 0.12));
    color: var(--text-primary);
    transform: scale(1.05);
}

.daily-detail-close-btn:active {
    transform: scale(0.95);
}

.daily-detail-summary-card {
    padding: 16px;
    border-radius: 16px;
    border: 1px solid var(--border-light);
    background: var(--bg-gradient-light, var(--bg-light));
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}

.daily-detail-summary-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.daily-detail-summary-value,
.daily-detail-summary-value-wrap {
    display: flex;
    flex-direction: column;
}

.daily-detail-summary-value,
.daily-detail-summary-value-wrap .daily-detail-summary-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.daily-detail-summary-total {
    font-size: 24px;
    font-weight: 600;
    color: var(--color-error);
}

.daily-detail-records-header {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: -8px;
}

.daily-detail-records-list {
    max-height: 400px;
    overflow-y: auto;
    padding-right: 4px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.daily-detail-modal .summary-item.summary-item--cta {
    width: 100%;
    align-items: flex-start;
    text-align: left;
}

.daily-detail-quick-add-btn {
    width: 100%;
    padding: 16px 20px;
    border: none;
    border-radius: 16px;
    background: var(--bg-gradient);
    color: var(--text-white);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    box-shadow: var(--shadow-primary-lg);
    transition: transform var(--transition-fast, 0.2s), box-shadow var(--transition-fast, 0.2s);
    position: relative;
    overflow: hidden;
}

.daily-detail-quick-add-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.daily-detail-quick-add-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 30px color-mix(in srgb, var(--color-primary, #7c3aed) 25%, rgba(0, 0, 0, 0.45));
}

.daily-detail-quick-add-btn:hover::after {
    opacity: 1;
}

.daily-detail-quick-add-btn:active {
    transform: scale(0.97);
}

.daily-detail-quick-add-btn__icon {
    font-size: 20px;
}

@media (max-width: 576px) {
    .daily-detail-modal__panel {
        padding: 22px;
        border-radius: 20px;
        max-height: 85vh;
    }

    .daily-detail-summary-card {
        flex-direction: column;
        align-items: flex-start;
    }
}

.daily-budget-calendar {
    padding: 16px;
}

.daily-calendar-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 16px;
    padding: 0 4px;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .daily-calendar-title {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.daily-calendar-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 12px;
}

.daily-calendar-item {
    background: var(--bg-white);
    border-radius: 12px;
    padding: 12px;
    box-shadow: var(--shadow-sm);
    transition: all 0.2s;
}

:root.dark .daily-calendar-item {
    background: var(--bg-dark);
    box-shadow: var(--shadow-sm-dark);
}

.daily-calendar-item.today {
    border: 2px solid var(--color-primary);
    background: var(--bg-gradient-light);
}

:root.dark .daily-calendar-item.today {
    background: var(--bg-gradient-light-dark);
}

.daily-calendar-item.past {
    opacity: 0.7;
}

.daily-calendar-item.future {
    opacity: 0.5;
}

.daily-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
}

:root.dark .daily-item-header {
    border-bottom-color: var(--border-dark);
}

.daily-item-day {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .daily-item-day {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.daily-item-today-badge {
    font-size: var(--font-xs);
    padding: 2px 6px;
    background: var(--color-primary);
    color: var(--text-white);
    border-radius: var(--radius-sm);
    font-weight: var(--font-medium);
}

.daily-item-content {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.daily-item-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.daily-item-label {
    font-size: 11px;
    color: var(--text-tertiary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .daily-item-label {
    color: var(--text-tertiary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.daily-item-value {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .daily-item-value {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.daily-item-value.over {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.3);
}

:root.dark .daily-item-value.over {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.5);
}

.daily-item-value.positive {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.3);
}

:root.dark .daily-item-value.positive {
    color: var(--color-success);
    text-shadow: 0 1px 2px rgba(46, 204, 113, 0.5);
}

.daily-item-value.negative {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.3);
}

:root.dark .daily-item-value.negative {
    color: var(--color-error);
    text-shadow: 0 1px 2px rgba(231, 76, 60, 0.5);
}

.daily-budget-track-btn {
    margin-top: 10px;
    width: 100%;
    padding: 12px 16px;
    background: var(--bg-gradient);
    color: var(--text-white);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    min-height: 44px;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.2);
}

:root.dark .daily-budget-track-btn {
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.4);
}

.daily-budget-track-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
    background: var(--bg-gradient);
}

.daily-budget-track-btn:active {
    transform: scale(0.98);
    box-shadow: var(--shadow-primary);
}

.daily-budget-track-btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--color-primary-rgba-20), var(--shadow-primary);
}

.budget-add-section {
    padding: var(--spacing-lg);
    text-align: center;
    border-top: 1px solid var(--border-light);
}

:root.dark .budget-add-section {
    border-top-color: var(--border-dark);
}

.budget-add-btn-full {
    width: 100%;
    margin: 0;
}

.modal-content-standard {
    background: var(--bg-white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xxl);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    margin: var(--spacing-xl);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--card-border-color);
}

:root.dark .modal-content-standard {
    background: var(--bg-dark);
    border-color: var(--border-dark);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}

/* ========== 存股/儲蓄功能樣式 ========== */

/* 儲蓄類型標籤 */
.savings-type-tabs {
    display: flex;
    gap: 8px;
    margin-left: auto;
}

.savings-type-tab {
    padding: 6px 12px;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    background: transparent;
    color: var(--text-secondary);
    font-size: var(--font-sm);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
}

:root.dark .savings-type-tab {
    color: var(--text-secondary);
}

.savings-type-tab:hover {
    background: rgba(var(--color-primary-rgb), 0.1);
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.savings-type-tab.active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--text-white);
}


/* 儲蓄項目行 */
.savings-item-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
}

.savings-item-icon {
    font-size: 18px;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
}

.savings-item-name {
    flex: 1;
    min-width: 120px;
}

/* 類型特定樣式 */
.savings-item-row[data-type="stock"] {
    border-left: 3px solid var(--color-primary);
    padding-left: 12px;
}

.savings-item-row[data-type="savings"] {
    border-left: 3px solid var(--color-success);
    padding-left: 12px;
}

.savings-item-row[data-type="stock"] .savings-item-icon {
    color: var(--color-primary);
}

.savings-item-row[data-type="savings"] .savings-item-icon {
    color: var(--color-success);
}

/* 儲蓄卡片特殊樣式 */
.monthly-planner-card--savings {
    border-left: 4px solid var(--color-success);
}

:root.dark .monthly-planner-card--savings {
    border-left-color: var(--color-success);
}

/* 內聯操作按鈕 */
.monthly-planner-actions--inline {
    display: flex;
    gap: 8px;
    margin-top: 12px;
}

.monthly-planner-actions--inline .monthly-planner-btn {
    flex: 1;
}

/* 模板對話框樣式 */
.savings-type-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.savings-template-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border-color: var(--color-primary);
}

/* 主題適配的對話框樣式 */
.savings-type-option {
    background: var(--bg-card);
    color: var(--text-primary);
    border-color: var(--border-light);
}

:root.dark .savings-type-option {
    background: var(--bg-card);
    color: var(--text-primary);
    border-color: var(--border-light);
}

.savings-template-btn {
    background: var(--bg-card);
    color: var(--text-primary);
    border-color: var(--border-light);
}

:root.dark .savings-template-btn {
    background: var(--bg-card);
    color: var(--text-primary);
    border-color: var(--border-light);
}

/* ========== 主題選擇器 ========== */
.theme-select-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10005;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
}

.theme-custom-content {
    width: 100%;
}

.theme-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.theme-modal-title {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    letter-spacing: 0.02em;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-modal-title {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-close-btn {
    background: transparent;
    border: 1px solid transparent;
    width: 36px;
    height: 36px;
    border-radius: var(--radius-md);
    color: var(--text-tertiary);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    font-size: 18px;
}

.theme-close-btn:hover {
    background: var(--bg-light);
    border-color: var(--border-light);
    color: var(--text-secondary);
}

.theme-section {
    margin-bottom: var(--spacing-xl);
}

.theme-section--divider {
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--border-light);
}

.theme-section-title {
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-section-title {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-toolbar {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.theme-search-input {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    background: var(--bg-light);
    color: var(--text-primary);
    outline: none;
    transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
}

.theme-search-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10);
    background: var(--bg-white);
}

.theme-select-content {
    background: var(--bg-white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xxl);
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    margin: var(--spacing-xl);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.theme-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-lg);
}

.theme-grid--auto {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.theme-item {
    position: relative;
    border: 1px solid color-mix(in srgb, var(--border-light) 82%, transparent);
    border-radius: 22px;
    overflow: hidden;
    cursor: pointer;
    transition: all var(--transition-base);
    background: linear-gradient(180deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, color-mix(in srgb, var(--bg-white) 86%, transparent) 100%);
    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.10);
    transform: translateZ(0);
}

.theme-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 18px 46px rgba(15, 23, 42, 0.16);
    border-color: color-mix(in srgb, var(--color-primary) 60%, var(--border-light));
}

.theme-item.selected {
    border-color: color-mix(in srgb, var(--color-primary) 72%, white);
    box-shadow: 0 18px 52px color-mix(in srgb, var(--color-primary) 26%, rgba(15, 23, 42, 0.12));
}

.theme-item-preview {
    width: 100%;
    height: 110px;
    border-radius: 18px;
    margin: 12px;
    border: 1px solid rgba(255, 255, 255, 0.45);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55), 0 10px 22px rgba(15, 23, 42, 0.10);
    position: relative;
}

.theme-item-preview::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 18px;
    background: radial-gradient(circle at 20% 15%, rgba(255, 255, 255, 0.65), transparent 55%);
    pointer-events: none;
}

.theme-item-content {
    padding: 12px 14px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
}

.theme-item-icon {
    font-size: 22px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: color-mix(in srgb, var(--bg-light) 78%, transparent);
    border: 1px solid color-mix(in srgb, var(--border-light) 70%, transparent);
    border-radius: 14px;
}

.theme-item-name {
    flex: 1;
    font-size: 15px;
    font-weight: 800;
    color: var(--text-primary);
    letter-spacing: 0.2px;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-item-name {
    color: var(--text-primary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-item-check {
    position: absolute;
    top: 12px;
    right: 12px;
    font-size: 14px;
    color: var(--text-white);
    font-weight: 900;
    width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    border-radius: 999px;
    box-shadow: 0 12px 28px color-mix(in srgb, var(--color-primary) 35%, rgba(15, 23, 42, 0.18));
}

.theme-item-check--placeholder {
    opacity: 0;
    pointer-events: none;
}

.theme-item-content--compact {
    padding: 12px 14px 14px;
}

.theme-form {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
}

.theme-field {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.theme-label {
    font-size: var(--font-sm);
    color: var(--text-secondary);
    font-weight: var(--font-medium);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-label {
    color: var(--text-secondary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-field-row {
    display: flex;
    gap: var(--spacing-md);
    align-items: center;
}

.theme-color-picker {
    width: 56px;
    height: 44px;
    padding: 0;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    background: transparent;
    cursor: pointer;
}

.theme-text-input {
    flex: 1;
    padding: 12px 14px;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    background: var(--bg-white);
    color: var(--text-primary);
    outline: none;
    transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
}

.theme-text-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10);
}

.theme-help {
    font-size: 12px;
    color: var(--text-tertiary);
    line-height: 1.4;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-help {
    color: var(--text-tertiary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-actions {
    display: flex;
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
}

.theme-primary-btn,
.theme-secondary-btn {
    padding: 12px 14px;
    border-radius: var(--radius-lg);
    font-weight: var(--font-semibold);
    cursor: pointer;
    border: 1px solid transparent;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), border-color var(--transition-fast);
}

.theme-primary-btn {
    flex: 2;
    background: var(--color-primary);
    color: #fff;
    box-shadow: var(--shadow-primary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.2);
}

:root.dark .theme-primary-btn {
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.4);
}

.theme-primary-btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-primary-lg);
}

.theme-secondary-btn {
    flex: 1;
    background: var(--bg-light);
    border-color: var(--border-light);
    color: var(--text-secondary);
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .theme-secondary-btn {
    color: var(--text-secondary);
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.3);
}

.theme-secondary-btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.theme-image-preview {
    margin-top: var(--spacing-md);
    position: relative;
    border-radius: var(--radius-lg);
    overflow: hidden;
    border: 1px solid var(--border-light);
    box-shadow: var(--shadow-md);
}

.theme-image-preview-img {
    width: 100%;
    max-height: 220px;
    object-fit: cover;
    display: block;
}

.theme-image-remove-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 34px;
    height: 34px;
    border-radius: var(--radius-full);
    border: 1px solid rgba(255, 255, 255, 0.22);
    background: rgba(0, 0, 0, 0.55);
    color: #fff;
    cursor: pointer;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.theme-image-remove-btn:hover {
    background: rgba(0, 0, 0, 0.7);
}

@keyframes auroraSweep {
    0% {
        transform: translate(-10%, -10%) scale(1);
        filter: hue-rotate(0deg);
    }
    50% {
        transform: translate(5%, 15%) scale(1.1);
        filter: hue-rotate(40deg);
    }
    100% {
        transform: translate(15%, -5%) scale(1.05);
        filter: hue-rotate(70deg);
    }
}

@keyframes meteorTrail {
    0% {
        background-position: 0 0, 0 0, 0 0;
    }
    100% {
        background-position: -600px 400px, -300px 200px, 800px 600px;
    }
}

@keyframes cyberPulse {
    0% {
        opacity: 0.25;
        filter: blur(6px);
    }
    50% {
        opacity: 0.45;
        filter: blur(10px);
    }
    100% {
        opacity: 0.55;
        filter: blur(8px);
    }
}

@keyframes gridScroll {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 0 600px;
    }
}

@keyframes sunriseGlow {
    0% {
        filter: saturate(1) brightness(1);
    }
    50% {
        filter: saturate(1.1) brightness(1.1);
    }
    100% {
        filter: saturate(1) brightness(0.95);
    }
}

@keyframes next-month-slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes next-month-slide-down {
    from {
        transform: translateY(0);
        opacity: 1;
    }
    to {
        transform: translateY(100%);
        opacity: 0;
    }
}

 .next-month-bills-modal {
     position: fixed;
     inset: 0;
     z-index: 10005;
     display: flex;
     align-items: flex-end;
     justify-content: center;
     padding: 14px;
     background: rgba(0, 0, 0, 0.55);
 }

 .next-month-bills-panel {
     width: 100%;
     max-width: 520px;
     max-height: 86vh;
     overflow: hidden;
     border-radius: 22px;
     background: linear-gradient(180deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, color-mix(in srgb, var(--bg-white) 86%, transparent) 100%);
     border: 1px solid color-mix(in srgb, var(--color-primary) 28%, var(--border-light));
     box-shadow: 0 26px 70px rgba(15, 23, 42, 0.30);
     animation: next-month-slide-up 0.24s ease-out;
 }

 .next-month-bills-panel.closing {
     animation: next-month-slide-down 0.22s ease-in;
 }

 .next-month-bills-header {
     padding: 16px;
     background: linear-gradient(135deg, color-mix(in srgb, var(--color-primary) 18%, transparent) 0%, rgba(255, 255, 255, 0) 65%);
     border-bottom: 1px solid var(--border-light);
 }

 .next-month-bills-header-bar {
     display: flex;
     align-items: center;
     justify-content: space-between;
     gap: 12px;
 }

 .next-month-bills-title {
     display: inline-flex;
     align-items: center;
     gap: 8px;
     font-size: 18px;
     font-weight: 900;
     color: var(--text-primary);
     min-width: 0;
 }

 .next-month-close-btn {
     width: 36px;
     height: 36px;
     border-radius: 12px;
     border: 1px solid var(--border-light);
     background: color-mix(in srgb, var(--bg-white) 86%, transparent);
     color: var(--text-primary);
     cursor: pointer;
     font-size: 20px;
     line-height: 1;
 }

 .next-month-close-btn:hover {
     transform: translateY(-1px);
     box-shadow: 0 14px 34px rgba(15, 23, 42, 0.16);
     border-color: color-mix(in srgb, var(--color-primary) 38%, var(--border-light));
 }

 .next-month-close-btn:active {
     transform: scale(0.98);
 }

 .next-month-budget-card {
    position: relative;
    overflow: hidden;
    margin-top: 12px;
    padding: 16px 14px;
    border-radius: 18px;
    background: var(--bg-card);
    border: 1px solid rgba(255, 255, 255, 0.45);
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.15);
}

.next-month-budget-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.88) 0%, rgba(255, 255, 255, 0.6) 55%, rgba(255, 212, 212, 0.25) 100%);
    backdrop-filter: blur(2px);
}

.next-month-budget-card .label {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: 800;
    color: rgba(84, 34, 34, 0.85);
}

.next-month-budget-card .value {
    position: relative;
    margin-top: 6px;
    font-size: 18px;
    font-weight: 900;
    color: rgba(132, 28, 28, 0.95);
}

.next-month-budget-card .hint {
    position: relative;
    margin-top: 6px;
    font-size: 12px;
    color: rgba(84, 34, 34, 0.7);
}

 .set-next-month-budget-btn {
     width: 100%;
     margin-top: 12px;
     display: inline-flex;
     align-items: center;
     justify-content: center;
     gap: 8px;
     padding: 12px 14px;
     border: 0;
     border-radius: 16px;
     background: var(--bg-gradient);
     color: var(--text-white);
     font-weight: 800;
     cursor: pointer;
     box-shadow: var(--shadow-primary);
 }

 .set-next-month-budget-btn:hover {
     transform: translateY(-1px);
     box-shadow: var(--shadow-primary-lg);
 }

 .set-next-month-budget-btn:active {
     transform: scale(0.99);
 }

 .next-month-bills-list {
     padding: 14px 16px;
     overflow-y: auto;
     max-height: calc(86vh - 210px);
 }

 .next-month-bills-list::-webkit-scrollbar {
     width: 10px;
 }

 .next-month-bills-list::-webkit-scrollbar-track {
     background: color-mix(in srgb, var(--bg-light) 70%, transparent);
     border-radius: 999px;
 }

 .next-month-bills-list::-webkit-scrollbar-thumb {
     background: color-mix(in srgb, var(--color-primary) 25%, rgba(15, 23, 42, 0.18));
     border-radius: 999px;
     border: 2px solid color-mix(in srgb, var(--bg-white) 55%, transparent);
 }

 .next-month-bills-list::-webkit-scrollbar-thumb:hover {
     background: color-mix(in srgb, var(--color-primary) 35%, rgba(15, 23, 42, 0.20));
 }

 .next-month-bills-list-title {
     display: flex;
     align-items: center;
     gap: 8px;
     font-size: 13px;
     font-weight: 800;
     color: var(--text-secondary);
     margin-bottom: 10px;
 }

 .next-month-bills-empty {
     text-align: center;
     padding: 28px 12px;
     color: var(--text-tertiary);
 }

 .next-month-bills-footer {
     padding: 12px 16px 16px;
     border-top: 1px solid var(--border-light);
     background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 80%, transparent) 0%, color-mix(in srgb, var(--color-primary) 10%, transparent) 100%);
 }

 .next-month-bills-tip {
     display: flex;
     align-items: flex-start;
     gap: 8px;
     font-size: 12px;
     color: var(--text-secondary);
 }

 .next-month-bill-item {
     padding: 12px;
     border-radius: 18px;
     background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, color-mix(in srgb, var(--bg-white) 82%, transparent) 100%);
     border: 1px solid color-mix(in srgb, var(--border-light) 70%, transparent);
     box-shadow: 0 10px 22px rgba(15, 23, 42, 0.10);
     margin-bottom: 10px;
 }

 .next-month-bill-item:hover {
     border-color: color-mix(in srgb, var(--color-primary) 35%, var(--border-light));
     box-shadow: 0 16px 34px rgba(15, 23, 42, 0.14);
 }

 .next-month-bill-main {
     display: flex;
     align-items: center;
     justify-content: space-between;
     gap: 12px;
 }

 .next-month-bill-icon {
     flex: 0 0 auto;
 }

 .next-month-bill-info {
     flex: 1;
     min-width: 0;
 }

 .next-month-bill-amount {
     flex: 0 0 auto;
     white-space: nowrap;
     font-weight: 900;
     font-size: 18px;
     letter-spacing: 0.2px;
 }

 .next-month-bill-amount[data-record-id] {
     cursor: pointer;
     text-decoration: underline;
     text-decoration-thickness: 1px;
     text-underline-offset: 3px;
 }

 .next-month-bill-actions {
     display: flex;
     justify-content: flex-end;
     gap: 10px;
     margin-top: 8px;
 }

 .next-month-bill-btn {
     display: inline-flex;
     align-items: center;
     gap: 6px;
     border: 1px solid var(--border-light);
     background: var(--bg-gradient-light);
     padding: 8px 12px;
     border-radius: 12px;
     cursor: pointer;
     white-space: nowrap;
 }

 .next-month-bill-btn--delete {
     border-color: rgba(220, 38, 38, 0.3);
 }

 .next-month-bill-btn:active {
     transform: scale(0.98);
 }

 .nmb-hero {
     border-radius: 20px;
     padding: 16px;
     background: linear-gradient(135deg, rgba(255, 255, 255, 0.92) 0%, rgba(255, 240, 248, 0.85) 100%);
     border: 1px solid rgba(255, 182, 217, 0.35);
     box-shadow: 0 16px 40px rgba(15, 23, 42, 0.12);
     position: relative;
     overflow: hidden;
     margin-bottom: 14px;
 }

 .nmb-hero::before {
     content: '';
     position: absolute;
     inset: -2px;
     background: radial-gradient(900px circle at 10% 10%, var(--color-primary-rgba-18), transparent 55%),
                 radial-gradient(900px circle at 90% 0%, var(--color-secondary-rgba-16), transparent 50%),
                 radial-gradient(900px circle at 50% 100%, var(--color-accent-rgba-12), transparent 55%);
     pointer-events: none;
 }

 .nmb-hero > * {
     position: relative;
     z-index: 1;
 }

 .nmb-hero-top {
     display: flex;
     align-items: center;
     justify-content: space-between;
     gap: 12px;
     margin-bottom: 12px;
 }

 .nmb-hero-title {
     display: flex;
     flex-direction: column;
     gap: 6px;
     min-width: 0;
 }

 .nmb-hero-badge {
     display: inline-flex;
     align-items: center;
     width: fit-content;
     padding: 6px 12px;
     border-radius: 999px;
     font-weight: 800;
     font-size: 12px;
     letter-spacing: 0.04em;
     color: var(--text-white);
     background: var(--bg-gradient);
     box-shadow: var(--shadow-primary);
 }

 .nmb-hero-subtitle {
     font-size: 14px;
     font-weight: 700;
     color: var(--text-primary);
     white-space: nowrap;
     overflow: hidden;
     text-overflow: ellipsis;
 }

 .nmb-hero-btn {
     border: 1px solid var(--border-light);
     background: rgba(255, 255, 255, 0.85);
     color: var(--text-primary);
     border-radius: 999px;
     padding: 10px 14px;
     font-weight: 700;
     cursor: pointer;
     transition: transform 0.2s ease, box-shadow 0.2s ease;
 }

 .nmb-hero-btn:hover {
     transform: translateY(-1px);
     box-shadow: var(--shadow-sm);
 }

 .nmb-hero-btn:active {
     transform: scale(0.98);
 }

 .nmb-hero-metrics {
     display: grid;
     grid-template-columns: 1fr 1fr;
     gap: 12px;
     margin-bottom: 12px;
 }

 .nmb-metric {
     background: rgba(255, 255, 255, 0.82);
     border: 1px solid rgba(255, 182, 217, 0.25);
     border-radius: 16px;
     padding: 12px;
     box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
 }

 .nmb-metric-label {
     font-size: 12px;
     font-weight: 700;
     color: var(--text-secondary);
     margin-bottom: 6px;
 }

 .nmb-metric-value {
     font-size: 18px;
     font-weight: 900;
     color: var(--text-primary);
     letter-spacing: 0.02em;
 }

 .nmb-hero-actions {
     display: flex;
     gap: 10px;
 }

 .nmb-action {
     flex: 1;
     border: none;
     border-radius: 14px;
     padding: 12px 14px;
     font-weight: 800;
     color: var(--text-white);
     background: var(--bg-gradient);
     box-shadow: var(--shadow-primary);
     cursor: pointer;
     transition: transform 0.2s ease, box-shadow 0.2s ease;
 }

 .nmb-action:hover {
     transform: translateY(-1px);
     box-shadow: var(--shadow-primary-lg);
 }

 .nmb-action:active {
     transform: scale(0.98);
 }

 .nmb-action.nmb-action--secondary {
     background: rgba(255, 255, 255, 0.9);
     color: var(--text-primary);
     border: 1px solid var(--border-light);
     box-shadow: var(--shadow-sm);
 }

 .nmb-section-title {
     font-size: 13px;
     font-weight: 800;
     color: var(--text-secondary);
     margin: 10px 2px 8px;
     letter-spacing: 0.03em;
 }

@media (max-width: 420px) {
    .nmb-hero {
        border-radius: 18px;
        padding: 14px;
    }
    .nmb-hero-metrics {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .theme-select-modal {
        align-items: flex-start;
        padding: var(--spacing-lg) var(--spacing-md);
    }
    .theme-custom-content.modal-content-standard {
        width: 100%;
        max-width: none;
        margin: 0;
        border-radius: 0 0 var(--radius-xl) var(--radius-xl);
        min-height: calc(100vh - var(--spacing-lg));
        padding: var(--spacing-xl) var(--spacing-lg);
    }
    .theme-modal-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-sm);
    }
    .theme-modal-title {
        font-size: calc(var(--font-lg) + 2px);
    }
    .theme-grid--auto {
        grid-template-columns: repeat(2, minmax(140px, 1fr));
        gap: var(--spacing-md);
    }
    .theme-item-icon {
        font-size: var(--font-xl);
    }
    .theme-field-row {
        flex-direction: column;
        align-items: flex-start;
    }
    .theme-color-picker {
        width: 100%;
        height: 48px;
    }
    .theme-text-input {
        width: 100%;
    }
    .theme-actions {
        flex-direction: column;
    }
    .theme-primary-btn,
    .theme-secondary-btn {
        flex: unset;
        width: 100%;
    }
}

@media (max-width: 420px) {
    .theme-select-modal {
        padding: var(--spacing-md) var(--spacing-sm);
    }
    .theme-custom-content.modal-content-standard {
        padding: var(--spacing-lg) var(--spacing-md);
    }
    .theme-grid--auto {
        grid-template-columns: 1fr;
    }
    .theme-item-preview {
        height: 64px;
    }
    .theme-modal-title {
        font-size: var(--font-lg);
    }
}

.budget-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    gap: 12px;
}

.budget-title {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    text-align: center;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
    text-rendering: optimizeLegibility;
}

.budget-summary {
    display: flex;
    justify-content: space-around;
    padding: 20px 16px;
    background: var(--bg-gradient-light);
    border-bottom: 1px solid var(--border-light);
    gap: 12px;
    position: relative;
}

.budget-summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    min-width: 0;
    padding: 12px 8px;
    background: var(--bg-white);
    border-radius: var(--radius-md);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
    transition: all var(--transition-fast);
}

.budget-summary-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.budget-summary-label {
    font-size: 11px;
    color: var(--text-tertiary);
    margin-bottom: 10px;
    white-space: nowrap;
    font-weight: 600;
    letter-spacing: 0.5px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-transform: uppercase;
}

.budget-summary-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: -0.02em;
    font-variant-numeric: tabular-nums;
    line-height: 1.3;
}

.budget-summary-value.budget-total {
    color: var(--color-primary);
}

.budget-summary-value.budget-used {
    color: var(--color-error);
}

.budget-summary-value.budget-remaining {
    color: var(--color-success);
}

.budget-summary-value.over-budget {
    color: var(--color-error);
}

.budget-summary-value.expense {
    color: var(--color-error);
}

.budget-list {
    padding: 8px 0;
}

.budget-item {
    display: flex;
    align-items: flex-start;
    padding: 16px;
    margin: 0 12px 12px;
    border-radius: var(--radius-lg);
    border: none;
    background: var(--bg-white);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all var(--transition-fast);
    gap: 14px;
    position: relative;
    overflow: hidden;
}

.budget-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('./image/cc4922eb577799c3dcefb8bb3e04a5ed.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.12;
    z-index: 0;
    pointer-events: none;
}

.budget-item > * {
    position: relative;
    z-index: 1;
}

.budget-item:active {
    transform: scale(0.98);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.budget-item-icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 32px;
    background: var(--bg-gradient-light);
    border-radius: var(--radius-md);
    padding: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.budget-item-icon svg {
    width: 100%;
    height: 100%;
}

.budget-item-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.budget-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 2px;
    gap: 12px;
}

.budget-item-name {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.4;
    letter-spacing: -0.02em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

.budget-item-status {
    font-size: 12px;
    font-weight: 700;
    color: var(--color-success);
    white-space: nowrap;
    flex-shrink: 0;
    padding: 0;
    background: none;
    border-radius: 0;
    line-height: 1.2;
    border: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    box-shadow: none;
}

.budget-item-status.over-budget {
    color: var(--color-error);
    background: none;
    border-color: transparent;
    box-shadow: none;
}

.budget-progress-bar {
    width: 100%;
    height: 12px;
    background: var(--bg-lighter);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin: 6px 0;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
    position: relative;
}

.budget-progress-fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width 0.4s ease, background 0.3s ease;
    background: var(--color-primary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    position: relative;
}

.budget-progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    border-radius: var(--radius-full);
}

.budget-progress-fill.progress-success {
    background: linear-gradient(135deg, var(--color-success), #2ecc71);
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.35);
}

.budget-progress-fill.progress-error {
    background: linear-gradient(135deg, var(--color-error), #c0392b);
    box-shadow: 0 2px 8px rgba(255, 68, 68, 0.35);
}

.budget-progress-fill.progress-warning {
    background: linear-gradient(135deg, var(--color-warning), #e67e22);
    box-shadow: 0 2px 8px rgba(255, 152, 0, 0.35);
}

.budget-item-details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 4px;
    padding-top: 10px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.budget-detail-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
}

.budget-detail-label {
    font-size: 12px;
    color: var(--text-tertiary);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.budget-detail-value {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.3;
    font-variant-numeric: tabular-nums;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: -0.01em;
}

.budget-detail-value.budget-detail-total {
    color: var(--color-primary);
}

.budget-detail-value.budget-detail-used {
    color: var(--color-error);
}

.budget-detail-value.budget-detail-remaining {
    color: var(--color-success);
}

.budget-detail-value.over-budget {
    color: var(--color-error);
}

/* 預算分類選擇模態框 */
.budget-category-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10004;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
}

.budget-category-modal-content {
    background: var(--bg-white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xxl);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    margin: var(--spacing-xl);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.budget-category-section {
    margin-bottom: 24px;
}

.budget-category-section-title {
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border-light);
}

.budget-category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
}

.budget-category-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-sm);
    border: 2px solid var(--border-light);
    border-radius: var(--radius-md);
    background: var(--bg-white);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.budget-category-item:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary);
}

.budget-category-item.has-budget {
    border-color: var(--color-primary);
    background: var(--bg-gradient-light);
}

.budget-category-icon {
    font-size: 32px;
    margin-bottom: 6px;
}

.budget-category-name {
    font-size: var(--font-sm);
    color: var(--text-primary);
    font-weight: var(--font-medium);
    margin-bottom: var(--spacing-xs);
    word-break: break-word;
}

.budget-category-budget {
    font-size: var(--font-xs);
    color: var(--color-primary);
    font-weight: var(--font-semibold);
    margin-top: var(--spacing-xs);
}

.budget-edit-btn {
    padding: 12px 20px;
    border: 2px solid var(--color-primary);
    border-radius: var(--radius-md);
    background: var(--bg-white);
    color: var(--color-primary);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    flex-shrink: 0;
    min-width: 70px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    white-space: nowrap;
    letter-spacing: 0.2px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

.budget-edit-btn:hover {
    background: var(--bg-gradient-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.budget-edit-btn:active {
    background: var(--color-primary);
    color: var(--text-white);
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.budget-edit-btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--color-primary-rgba-20);
}

.stat-value.over-budget {
    color: var(--color-error);
}

/* ========== 預算設定對話框 ========== */
.budget-setting-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10005;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.budget-setting-modal-content {
    background: var(--bg-white);
    border-radius: 24px;
    padding: 28px;
    max-width: 420px;
    width: 100%;
    box-shadow: var(--shadow-primary-lg), 0 4px 16px rgba(0, 0, 0, 0.15);
    border: 1px solid var(--color-primary-rgba-20);
    animation: slideIn 0.3s ease-out;
}

.budget-setup-close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-tertiary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: all 0.2s;
}

.budget-setup-close-btn:hover {
    background: var(--bg-lighter);
    color: var(--text-primary);
}

.budget-amount-input {
    width: 100%;
    padding: 14px 16px 14px 60px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    font-size: 18px;
    font-weight: 600;
    background: var(--bg-white);
    color: var(--text-primary);
    transition: all 0.3s;
    box-sizing: border-box;
}

.budget-amount-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 4px 12px var(--color-primary-rgba-20);
}

.budget-setup-cancel-btn {
    flex: 1;
    padding: 14px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg-white);
    color: var(--text-primary);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.budget-setup-cancel-btn:hover {
    background: var(--bg-lighter);
    border-color: var(--color-primary-light);
}

.budget-setup-save-btn {
    flex: 2;
    padding: 14px;
    border: none;
    border-radius: 12px;
    background: var(--bg-gradient);
    color: var(--text-white);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: var(--shadow-primary);
}

.budget-setup-save-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.budget-setup-save-btn:active {
    transform: translateY(0);
}

/* ========== 搜索功能 ========== */
.search-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 2px solid var(--border-light);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.search-keyword-section {
    display: flex;
    align-items: center;
    gap: 12px;
}

.search-filters-section {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding-top: 12px;
    border-top: 1px solid var(--border-light);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.filter-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.filter-date-inputs,
.filter-amount-inputs {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-date-input,
.filter-amount-input {
    flex: 1;
    padding: 10px 12px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    font-size: 14px;
    background: var(--bg-white);
    color: var(--text-primary);
    transition: all 0.3s ease;
}

.filter-date-input:focus,
.filter-amount-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10);
}

.filter-date-separator,
.filter-amount-separator {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
    white-space: nowrap;
}

.filter-select {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    font-size: 14px;
    background: var(--bg-white);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10);
}

.filter-actions {
    display: flex;
    justify-content: flex-end;
    padding-top: 8px;
}

.filter-clear-btn {
    padding: 10px 20px;
    background: var(--bg-gradient-light);
    border: 2px solid var(--color-primary-lighter);
    border-radius: 12px;
    color: var(--color-primary);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-clear-btn:hover {
    background: var(--bg-gradient);
    color: var(--text-white);
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary);
}

.filter-clear-btn:active {
    transform: translateY(0);
}

@media (max-width: 480px) {
    .search-container {
        padding: 12px;
        gap: 12px;
    }
    
    .search-filters-section {
        gap: 12px;
    }
    
    .filter-date-inputs,
    .filter-amount-inputs {
        flex-direction: column;
        align-items: stretch;
    }
    
    .filter-date-separator,
    .filter-amount-separator {
        text-align: center;
        padding: 4px 0;
    }
    
    .filter-date-input,
    .filter-amount-input,
    .filter-select {
        width: 100%;
    }
    
    .filter-clear-btn {
        width: 100%;
    }
}

.search-input {
    flex: 1;
    padding: var(--spacing-md) var(--spacing-lg);
    border: 2px solid var(--border-light);
    border-radius: var(--radius-xl);
    font-size: var(--font-md);
    background: var(--bg-light);
    color: var(--text-primary);
    transition: all var(--transition-base);
}

.search-input:focus {
    outline: none;
    border-color: var(--color-primary-lighter);
    background: var(--bg-white);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10), 0 4px 12px var(--color-primary-rgba-15);
}

.search-close-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: var(--bg-lighter);
    border-radius: var(--radius-full);
    font-size: var(--font-lg);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.search-close-btn:hover {
    background: var(--bg-light);
    color: var(--text-primary);
}

.search-close-btn:active {
    background: var(--bg-light);
}

/* ========== 設置頁面 ========== */
/* 設置頁面刪除警告樣式 */
.settings-item.delete-warning {
    border: 2px solid #dc3545 !important;
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.05), rgba(255, 107, 107, 0.1)) !important;
    animation: warningPulse 3s ease-in-out infinite;
}

.settings-item.delete-warning:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3) !important;
    border-color: #c82333 !important;
}

.settings-item-warning {
    display: block;
    font-size: 12px;
    color: #dc3545;
    font-weight: 600;
    margin-top: 4px;
    animation: warningBlink 2s ease-in-out infinite;
}

@keyframes warningPulse {
    0%, 100% {
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    50% {
        box-shadow: 0 4px 20px rgba(220, 53, 69, 0.2);
    }
}

@keyframes warningBlink {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* 設置頁面樣式 */
.page-settings {
    width: 100%;
    box-shadow: var(--shadow-sm);
    min-height: calc(100vh - 60px);
    padding-bottom: 80px;
    background: var(--bg-primary);
}

/* 響應式：設置頁面內邊距調整 */
@media (min-width: 576px) {
    .page-settings {
        padding-left: 20px;
        padding-right: 20px;
    }
}

@media (min-width: 768px) {
    .page-settings {
        padding-left: 40px;
        padding-right: 40px;
    }
}

@media (min-width: 992px) {
    .page-settings {
        padding-left: 60px;
        padding-right: 60px;
    }
}

@media (min-width: 1200px) {
    .page-settings {
        padding-left: 80px;
        padding-right: 80px;
    }
}

.settings-header {
    padding: var(--spacing-lg);
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
}

.settings-title {
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
    text-align: center;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
    text-rendering: optimizeLegibility;
}

.settings-list {
    padding: 24px 16px 8px;
    display: flex;
    flex-direction: column;
    gap: 32px;
}

.settings-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.settings-section-title {
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.7);
    padding-left: 8px;
}

/* 深色主題下的群組標題顏色 */
:root.dark .settings-section-title {
    color: rgba(255, 255, 255, 0.7);
}

/* 淺色主題下的群組標題顏色 */
:root.light .settings-section-title,
.light-theme .settings-section-title {
    color: rgba(0, 0, 0, 0.7);
}

.settings-section-items {
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.settings-item {
    position: relative;
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 20px 14px 24px;
    border-radius: 18px;
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--bg-white, #ffffff) 85%, var(--color-primary-light, #ffb6d9) 15%) 0%,
        color-mix(in srgb, var(--bg-white, #ffffff) 70%, var(--color-primary-light, #ffb6d9) 30%) 100%);
    box-shadow: 0 15px 35px color-mix(in srgb, var(--color-primary, #0d2849) 12%, rgba(0, 0, 0, 0.25));
    border: none;
    cursor: pointer;
    overflow: hidden;
    min-height: 68px;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.settings-item::after {
    content: '';
    position: absolute;
    inset: 1.5px;
    border-radius: 16px;
    border: 1px solid color-mix(in srgb, var(--color-primary-light, #ffb6d9) 35%, rgba(255, 255, 255, 0.6));
    pointer-events: none;
}

.settings-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 22px 45px rgba(13, 40, 73, 0.25);
}

.settings-item:active {
    transform: translateY(0);
    box-shadow: 0 12px 30px rgba(13, 40, 73, 0.12);
}

.settings-item-accent {
    position: absolute;
    top: 0;
    left: 0;
    width: 18px;
    height: 100%;
    border-radius: 18px 0 0 18px;
}

.settings-item-icon {
    position: relative;
    z-index: 1;
    width: 56px;
    height: 56px;
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    color: #fff;
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.45);
}

.settings-item-icon img {
    width: 28px;
    height: 28px;
}

.settings-item-text-group {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    position: relative;
    z-index: 1;
}

.settings-item-text {
    font-size: 17px;
    font-weight: 700;
    color: var(--text-primary, #000000);
}

.settings-item-subtext {
    font-size: 13px;
    color: var(--text-secondary, #000000);
}

.settings-item-arrow {
    font-size: 20px;
    color: var(--text-secondary, #000000);
    font-weight: 600;
    position: relative;
    z-index: 1;
}

.settings-item-value {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
    margin-right: var(--spacing-sm);
}

/* ========== 分類管理頁面 ========== */
.page-category-manage {
    min-height: calc(100vh - 60px);
    padding-bottom: 80px;
    background: var(--bg-white);
}

.category-manage-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
}

.back-btn,
.add-category-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    font-size: var(--font-xxl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-full);
    transition: all var(--transition-fast);
    color: var(--color-primary);
}

.back-btn:active,
.add-category-btn:active {
    background: var(--color-primary-rgba-10);
}

.category-manage-title {
    font-size: var(--font-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
}

.category-type-tabs {
    display: flex;
    padding: var(--spacing-md) var(--spacing-lg);
    gap: var(--spacing-md);
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
}

.category-type-btn {
    flex: 1;
    padding: 10px 16px;
    border: 2px solid var(--border-light);
    border-radius: var(--radius-xl);
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
}

.category-type-btn:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.category-type-btn.active {
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    color: var(--text-white);
    font-weight: var(--font-semibold);
    box-shadow: var(--shadow-primary);
}

.category-manage-list {
    padding: 8px 0;
}

.category-manage-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-white);
    transition: background 0.2s ease;
}

.category-manage-item:active {
    background: var(--bg-light);
}

.category-manage-item-icon {
    width: 48px;
    height: 48px;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 28px;
}

.category-manage-item-icon-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

/* 重複定義已在上方統一 */

.category-icon-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

.category-manage-item-info {
    flex: 1;
    min-width: 0;
}

.category-manage-item-name {
    font-size: var(--font-base);
    font-weight: var(--font-medium);
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.category-manage-item-meta {
    font-size: var(--font-sm);
    color: var(--text-tertiary);
}

.category-manage-item-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.category-manage-action-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--bg-lighter);
    border-radius: var(--radius-sm);
    font-size: var(--font-lg);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.category-manage-action-btn.edit {
    color: var(--color-primary);
}

.category-manage-action-btn.delete {
    color: var(--color-error);
}

.category-manage-action-btn:active {
    transform: scale(0.95);
    opacity: 0.8;
}

.category-manage-toggle {
    width: 48px;
    height: 28px;
    border-radius: 14px;
    background: var(--border-medium);
    position: relative;
    cursor: pointer;
    transition: background 0.3s ease;
}

.category-manage-toggle.active {
    background: var(--bg-gradient);
}

.category-manage-toggle::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 24px;
    height: 24px;
    border-radius: var(--radius-full);
    background: var(--bg-white);
    transition: left 0.3s ease;
    box-shadow: var(--shadow-sm);
}

.category-manage-toggle.active::after {
    left: 22px;
}

/* 分類編輯/添加模態框 */
.category-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.category-modal-content {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 24px;
    width: 100%;
    max-width: 90%;
    max-height: 90vh;
    overflow-y: auto;
}

.category-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.category-modal-title {
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.category-modal-close {
    width: 32px;
    height: 32px;
    border: none;
    background: var(--bg-soft);
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.category-modal-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.category-modal-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.category-modal-label {
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

.category-modal-input {
    padding: 12px;
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    font-size: 14px;
    transition: all 0.3s ease;
}

.category-modal-input:focus {
    outline: none;
    border-color: #ff9ec7;
}

.category-modal-type-select {
    display: flex;
    gap: 12px;
}

.category-modal-type-option {
    flex: 1;
    padding: 12px;
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    background: var(--bg-white);
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.category-modal-type-option.active {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary-lighter) 100%);
    border-color: var(--color-primary);
    color: #ffffff;
    font-weight: 600;
}

.category-modal-actions {
    display: flex;
    gap: 12px;
    margin-top: 8px;
}

.category-modal-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.category-modal-btn.primary {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-white);
}

.category-modal-btn.secondary {
    background: var(--bg-soft);
    color: #666;
}

.category-modal-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
}

/* ========== 投資專區頁面 ========== */
.page-investment {
    min-height: calc(100vh - 60px);
    padding-bottom: 140px;
    background: var(--bg-primary);
    position: relative;
    width: 100%;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
}

/* 響應式：投資頁面內邊距調整 */
@media (min-width: 576px) {
    .page-investment {
        padding-left: 20px;
        padding-right: 20px;
    }
}

@media (min-width: 768px) {
    .page-investment {
        padding-left: 40px;
        padding-right: 40px;
    }
}

@media (min-width: 992px) {
    .page-investment {
        padding-left: 60px;
        padding-right: 60px;
    }
}

@media (min-width: 1200px) {
    .page-investment {
        padding-left: 80px;
        padding-right: 80px;
    }
}

.investment-header {
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
}

.investment-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    text-align: center;
}

.investment-summary {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    padding: 16px;
    background: var(--bg-white);
}

.summary-card {
    background: var(--bg-white);
    border-radius: 12px;
    padding: 16px;
    text-align: center;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    box-shadow: var(--color-primary-rgba-10);
    border: 2px solid transparent;
}

.summary-card.highlight {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary-lighter);
    grid-column: 1 / -1;
    box-shadow: var(--shadow-primary-lg);
}

.summary-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 500;
}

.summary-value {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    font-variant-numeric: tabular-nums;
    text-rendering: optimizeLegibility;
}

.summary-value.positive {
    color: #28a745;
}

.summary-value.negative {
    color: #dc3545;
}

.investment-type-tabs {
    display: flex;
    padding: 12px 16px;
    gap: 8px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    overflow-x: auto;
}

.investment-type-btn {
    flex: 1;
    min-width: 80px;
    padding: 10px 16px;
    border: 2px solid var(--border-light);
    border-radius: 20px;
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.investment-type-btn.active {
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    color: var(--text-white);
    font-weight: 600;
    box-shadow: var(--shadow-primary);
}

.investment-form {
    background: var(--bg-white);
    padding: 16px;
    margin: 16px;
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
}

.form-group {
    margin-bottom: 16px;
}

.form-group label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group input[type="date"],
.form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--border-light);
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-group input[type="text"]:focus,
.form-group input[type="number"]:focus,
.form-group input[type="date"]:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--color-primary);
}

.form-group input[type="checkbox"] {
    margin-right: 8px;
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.submit-btn {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: var(--radius-md);
    background: var(--bg-gradient);
    color: var(--text-white);
    font-size: var(--font-base);
    font-weight: var(--font-semibold);
    cursor: pointer;
    transition: all var(--transition-base);
    margin-top: 8px;
    box-shadow: var(--shadow-primary);
}

.submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.submit-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
    box-shadow: var(--shadow-primary);
}

.calc-result {
    padding: 12px;
    background: var(--bg-light);
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
}

.pnl-value {
    font-size: 18px;
    font-weight: 700;
}

.pnl-value.positive {
    color: #28a745;
}

.pnl-value.negative {
    color: #dc3545;
}

.portfolio-list {
    padding: 16px;
}

.portfolio-item {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 12px;
    border: 1px solid var(--border-medium);
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10), 0 4px 10px rgba(15, 23, 42, 0.05);
    transition: transform 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
    position: relative;
    overflow: hidden;
}

.portfolio-item::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    padding: 1px;
    background: linear-gradient(125deg, var(--color-primary-rgba-18), var(--color-secondary-rgba-14));
    opacity: 0;
    pointer-events: none;
    transition: opacity 240ms ease;
}

.portfolio-item > * {
    position: relative;
    z-index: 1;
}

.portfolio-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.16), 0 6px 14px rgba(15, 23, 42, 0.08);
    border-color: var(--color-primary-rgba-25);
}

.portfolio-item:hover::after {
    opacity: 1;
}

.portfolio-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.portfolio-name {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.portfolio-shares {
    font-size: 14px;
    color: var(--text-secondary);
}

.portfolio-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-top: 12px;
}

.portfolio-detail-item {
    display: flex;
    flex-direction: column;
}

.portfolio-detail-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-bottom: 4px;
}

.portfolio-detail-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.investment-records {
    padding: 16px;
}

.investment-record-item {
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.75));
    border-radius: 16px;
    padding: 20px 22px;
    margin-bottom: 14px;
    border: 1px solid var(--border-medium);
    box-shadow: 0 12px 24px rgba(15, 23, 42, 0.15);
    transition: transform 240ms ease, box-shadow 240ms ease;
    position: relative;
    overflow: hidden;
}

.investment-record-item::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    padding: 1px;
    background: linear-gradient(125deg, var(--color-primary-rgba-20), var(--color-secondary-rgba-20));
    opacity: 0;
    pointer-events: none;
    transition: opacity 240ms ease;
}

.investment-record-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 40px rgba(15, 23, 42, 0.25);
}

.investment-record-item:hover::after {
    opacity: 1;
}

.record-header-meta {
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

.record-actions {
    display: inline-flex;
    gap: 4px;
    padding: 2px 6px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 6px 14px rgba(15, 23, 42, 0.12);
    align-items: center;
}

.record-action-btn {
    border: none;
    background: transparent;
    font-size: 15px;
    cursor: pointer;
    padding: 4px 2px;
    line-height: 1;
    color: rgba(15, 23, 42, 0.7);
    transition: transform 0.2s ease, color 0.2s ease;
}

.record-action-btn:focus-visible {
    outline: 2px solid rgba(15, 23, 42, 0.2);
    border-radius: 4px;
}

.record-action-btn:hover {
    transform: translateY(-1px);
    color: rgba(15, 23, 42, 0.95);
}

.record-action-delete {
    color: #dc2626;
}

.record-action-delete:hover {
    color: #b91c1c;
}

.record-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.record-header-info {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.record-type {
    font-size: 12px;
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 500;
}

.record-type.buy {
    background: rgba(86, 180, 211, 0.2);
    color: #0c4a6e;
    border-radius: 999px;
    padding: 6px 12px;
    letter-spacing: 0.5px;
}

.record-type.sell {
    background: rgba(251, 113, 133, 0.2);
    color: #7f1d1d;
    border-radius: 999px;
    padding: 6px 12px;
    letter-spacing: 0.5px;
}

.record-type.dividend {
    background: var(--bg-warning);
    color: var(--text-warning);
}

.investment-records-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 12px;
}

.investment-records-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
}

.investment-records-summary {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-top: 2px;
}

.investment-records-pager {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    color: var(--text-secondary);
}

.investment-pager-btn {
    border: 1px solid rgba(0, 0, 0, 0.08);
    background: white;
    border-radius: 999px;
    padding: 4px 12px;
    font-size: 12px;
    color: #333;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
}

.investment-pager-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.investment-pager-btn:not(:disabled):hover {
    background: var(--bg-hover);
}

.investment-record-date {
    font-weight: 600;
    color: #486581;
    margin-top: 16px;
    margin-bottom: 8px;
    letter-spacing: 0.5px;
}

.amount-level-high {
    border-color: rgba(249, 115, 22, 0.7);
    box-shadow: 0 0 25px rgba(249, 115, 22, 0.4);
}

.amount-level-mid {
    border-color: rgba(59, 130, 246, 0.6);
    box-shadow: 0 0 25px rgba(59, 130, 246, 0.35);
}

.amount-level-low {
    border-color: rgba(34, 197, 94, 0.6);
    box-shadow: 0 0 18px rgba(34, 197, 94, 0.3);
}

.amount-level-soft {
    border-color: rgba(14, 165, 233, 0.5);
    box-shadow: 0 0 16px rgba(14, 165, 233, 0.25);
}

.record-date {
    font-size: 12px;
    color: var(--text-tertiary);
}

.record-stock {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.record-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    font-size: 14px;
    color: var(--text-secondary);
}

.record-amount {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    margin-top: 8px;
}

/* ========== 新投資專區UI樣式 ========== */

/* 投資總覽 */
.investment-overview {
    padding: 20px;
    padding-bottom: 100px;
    max-width: 100%;
    width: 100%;
    background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-white) 20%);
    min-height: 100vh;
}

/* 頁面標題 */
.investment-page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    gap: 12px;
}

.summary-toggle {
    width: 100%;
    border: 1px solid var(--border-medium);
    border-radius: 18px;
    padding: 14px 16px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.10) 0%, rgba(255, 255, 255, 0.04) 100%);
    display: flex;
    flex-direction: column;
    gap: 10px;
    text-align: left;
    color: var(--text-primary);
    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
    transition: all 0.24s ease;
    margin-bottom: 18px;
}

.summary-toggle:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 28px rgba(15, 23, 42, 0.16);
}

.summary-toggle[aria-expanded="true"] {
    border-color: var(--color-primary);
    box-shadow: 0 14px 32px rgba(15, 23, 42, 0.18);
}

.summary-toggle__top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.summary-toggle__label {
    font-weight: 900;
    letter-spacing: 0.2px;
    font-size: 15px;
}

.summary-toggle__hint {
    font-size: 12px;
    color: var(--text-secondary);
    letter-spacing: 0.18px;
}

.summary-toggle__metrics {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 8px;
}

.summary-toggle__metric {
    padding: 10px 12px;
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    display: grid;
    gap: 4px;
}

.summary-toggle__metric-label {
    font-size: 12px;
    color: var(--text-secondary);
    letter-spacing: 0.12px;
    font-weight: 700;
}

.summary-toggle__metric-value {
    font-size: 16px;
    font-weight: 900;
    letter-spacing: 0.22px;
    color: var(--text-primary);
}

.summary-toggle__metric-value.positive {
    color: #22c55e;
}

.summary-toggle__metric-value.negative {
    color: #f87171;
}

.summary-toggle__metric-value.neutral {
    color: var(--text-primary);
}

@media (max-width: 480px) {
    .summary-toggle__metrics {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

.page-title {
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.02em;
    text-rendering: optimizeLegibility;
    position: relative;
}

.page-title::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);
    border-radius: 2px;
}

.refresh-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-gradient-light);
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: var(--color-primary-rgba-10);
}

.refresh-btn:active {
    transform: rotate(180deg) scale(0.9);
}

/* 總覽摘要卡片網格 */
.overview-summary-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 32px;
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 總投入金額和未實現損益佔滿整行 */
.summary-card.full-width {
    grid-column: 1 / -1;
}

/* 響應式：小屏幕改為單列 */
@media (max-width: 480px) {
    .overview-summary-grid {
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .summary-card.full-width {
        grid-column: 1;
    }
}

.summary-card {
    background: var(--bg-card, var(--bg-white));
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 18px 44px rgba(15, 23, 42, 0.10), 0 6px 16px rgba(15, 23, 42, 0.06);
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid var(--color-primary-rgba-16);
    position: relative;
    overflow: hidden;
}

.summary-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s ease;
}

.summary-card:hover::before {
    left: 100%;
}

.summary-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 22px 56px rgba(15, 23, 42, 0.14), 0 10px 26px rgba(15, 23, 42, 0.08);
    border-color: var(--color-primary-rgba-28);
}

.summary-card.primary {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-22) 0%, var(--color-primary-lighter-rgba-12) 100%);
    border-color: var(--color-primary-rgba-22);
    box-shadow: 0 18px 44px var(--color-primary-rgba-12), 0 6px 16px rgba(15, 23, 42, 0.06);
}

.summary-card.primary:hover {
    box-shadow: 0 26px 66px var(--color-primary-rgba-18), 0 10px 26px rgba(15, 23, 42, 0.08);
}

.summary-card.highlight {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-18) 0%, var(--color-primary-lighter-rgba-10) 100%);
    border-color: var(--color-primary-rgba-20);
    box-shadow: 0 18px 44px var(--color-primary-rgba-10), 0 6px 16px rgba(15, 23, 42, 0.06);
}

.summary-card.highlight:hover {
    box-shadow: 0 24px 60px var(--color-primary-rgba-16), 0 10px 26px rgba(15, 23, 42, 0.08);
}

.summary-icon {
    font-size: 36px;
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.75) 0%, var(--color-primary-light-rgba-28) 40%, var(--color-primary-lighter-rgba-18) 100%);
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.65);
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    box-shadow: 0 14px 30px var(--color-primary-rgba-14), 0 8px 16px rgba(15, 23, 42, 0.06);
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.summary-card:hover .summary-icon {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 4px 12px var(--color-primary-rgba-25);
}

.summary-card.primary .summary-icon {
    background: linear-gradient(135deg, var(--color-primary-light-rgba-40) 0%, var(--color-primary-lighter-rgba-30) 100%);
    box-shadow: 0 3px 10px var(--color-primary-rgba-20);
}

.summary-content {
    flex: 1;
}

.summary-hint {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 6px;
    font-weight: 500;
    line-height: 1.4;
}

.summary-label {
    font-size: 11px;
    color: var(--text-secondary);
    margin-bottom: 10px;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    opacity: 0.85;
}

.summary-value {
    font-size: 22px;
    font-weight: 800;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.01em;
    font-variant-numeric: tabular-nums;
    text-rendering: optimizeLegibility;
    line-height: 1.2;
}

/* 自動調整大小的數字 */
.summary-value.auto-size {
    font-size: clamp(16px, 4vw, 24px);
    word-break: break-all;
    overflow-wrap: break-word;
    line-height: 1.2;
}

@media (min-width: 480px) {
    .summary-value.auto-size {
        font-size: clamp(18px, 3vw, 28px);
    }
}

@media (min-width: 768px) {
    .summary-value.auto-size {
        font-size: clamp(20px, 2.5vw, 32px);
    }
}

.summary-value.positive {
    color: #4caf50;
}

.summary-value.negative {
    color: #f44336;
}

/* 持股清單區域 */
.stock-list-container {
    margin-top: 8px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    gap: 12px;
    flex-wrap: wrap;
}

/* 股票搜尋框 */
.stock-search-container {
    position: relative;
    margin-bottom: 20px;
}

.stock-search-input {
    width: 100%;
    padding: 14px 48px 14px 20px;
    border: 2px solid var(--border-light);
    border-radius: 16px;
    font-size: 15px;
    background: var(--bg-white);
    color: var(--text-primary);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-sizing: border-box;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.stock-search-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10), 0 4px 12px var(--color-primary-rgba-15);
    transform: translateY(-1px);
}

.stock-search-input::placeholder {
    color: var(--text-tertiary);
}

.stock-search-clear-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 32px;
    height: 32px;
    border: none;
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.2) 0%, rgba(255, 158, 199, 0.15) 100%);
    color: var(--text-secondary);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.stock-search-clear-btn:hover {
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.3) 0%, rgba(255, 158, 199, 0.25) 100%);
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 3px 8px var(--color-primary-rgba-20);
}

.stock-search-clear-btn:hover {
    background: var(--color-primary-light);
    color: var(--color-primary);
    transform: translateY(-50%) scale(1.1);
}

.stock-search-clear-btn:active {
    transform: translateY(-50%) scale(0.95);
}

.section-title {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    flex: 0 0 auto;
    position: relative;
    padding-bottom: 8px;
}

.section-title {
    letter-spacing: 0.008em;
    line-height: 1.2;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 3px;
    background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);
    border-radius: 2px;
}

/* 投資專區操作按鈕容器 */
.action-buttons {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
}

.side-action-btn {
    padding: 6px 10px;
    border: 1px solid color-mix(in srgb, var(--action-side-bg) 60%, transparent);
    border-radius: var(--radius-lg);
    background: var(--action-side-bg);
    color: var(--action-side-text);
    font-size: 13px;
    font-weight: 750;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    /* 手機觸控優化 */
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
    user-select: none;
    -webkit-user-select: none;
}

.side-action-btn:hover {
    transform: translateY(-1px);
    border-color: color-mix(in srgb, var(--action-side-bg-hover) 70%, transparent);
    background: var(--action-side-bg-hover);
    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
}

.side-action-btn:active {
    transform: translateY(0) scale(0.98);
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.10);
}

.side-action-btn:focus {
    outline: none;
    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12), 0 0 0 3px color-mix(in srgb, var(--action-side-bg-hover) 80%, transparent);
}

/* 投資專區：小圖示按鈕（強制更新/定時更新） */
.investment-icon-btn {
    width: 40px;
    height: 40px;
    border: 1px solid var(--border-light);
    border-radius: 14px;
    color: var(--text-primary);
    font-size: 18px;
    font-weight: 800;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    position: relative;
    overflow: hidden;
    transition: all var(--transition-base);
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
    user-select: none;
    -webkit-user-select: none;
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 96%, transparent) 0%, var(--color-primary-rgba-06) 100%);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
}

.investment-icon-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.10);
    border-color: var(--color-primary-rgba-20);
}

.investment-icon-btn:active {
    transform: translateY(0);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.10);
}

.investment-icon-btn:focus {
    outline: none;
    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.10), 0 0 0 3px var(--color-primary-rgba-18);
}

.investment-icon-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.investment-icon-btn--refresh {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 96%, transparent) 0%, rgba(23, 162, 184, 0.12) 100%);
    border-color: rgba(23, 162, 184, 0.22);
    color: var(--text-primary);
}

.investment-icon-btn--refresh:hover {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, rgba(23, 162, 184, 0.18) 100%);
}

.investment-icon-btn--auto {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 96%, transparent) 0%, rgba(108, 117, 125, 0.12) 100%);
    border-color: rgba(108, 117, 125, 0.22);
    color: var(--text-primary);
}

.investment-icon-btn--auto:hover {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, rgba(108, 117, 125, 0.18) 100%);
}

.investment-icon-btn--auto.is-running {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 90%, transparent) 0%, rgba(238, 90, 90, 0.18) 100%);
    border-color: rgba(238, 90, 90, 0.35);
    box-shadow: 0 12px 26px rgba(238, 90, 90, 0.16);
}

.investment-icon-btn--auto.is-running:hover {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 86%, transparent) 0%, rgba(238, 90, 90, 0.24) 100%);
}

.buy-action-btn-large {
    padding: 10px 18px;
    border: none;
    border-radius: var(--radius-lg);
    background: var(--action-buy-bg, linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%));
    color: var(--action-buy-text, var(--text-white));
    font-size: var(--font-lg);
    font-weight: var(--font-bold);
    cursor: pointer;
    box-shadow: var(--shadow-primary);
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex: 0 0 auto;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    /* 手機觸控優化 */
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
    user-select: none;
    -webkit-user-select: none;
}

.buy-action-btn-large::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.buy-action-btn-large:hover {
    background: var(--action-buy-bg-hover, linear-gradient(135deg, var(--color-primary-lighter) 0%, var(--color-primary) 100%));
    box-shadow: var(--shadow-primary-lg), 0 6px 20px var(--color-primary-rgba-30);
    transform: translateY(-2px);
}

.buy-action-btn-large:hover::before {
    left: 100%;
}

.buy-action-btn-large:active {
    transform: translateY(0);
    box-shadow: var(--shadow-primary);
}

.buy-action-btn-large:focus {
    outline: none;
    box-shadow: var(--shadow-primary-lg), 0 0 0 3px var(--color-primary-rgba-20);
}

/* 定期定額按鈕樣式 */
.dca-action-btn-large {
    padding: 6px 12px;
    border: none;
    border-radius: var(--radius-lg);
    background: var(--action-dca-bg, linear-gradient(135deg, #667eea 0%, #764ba2 100%));
    color: var(--action-dca-text, var(--text-white));
    font-size: var(--font-md);
    font-weight: var(--font-bold);
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex: 0 0 auto;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    /* 手機觸控優化 */
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
    user-select: none;
    -webkit-user-select: none;
}

.dca-action-btn-large::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s ease;
}

.dca-action-btn-large:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
}

.dca-action-btn-large:hover::before {
    left: 100%;
}

.dca-action-btn-large:active {
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4);
}

.dca-action-btn-large:focus {
    outline: none;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4), 0 0 0 3px rgba(102, 126, 234, 0.3);
}

.stock-count {
    font-size: 14px;
    color: var(--text-tertiary);
    font-weight: 500;
    flex: 0 0 auto;
    margin-left: auto;
}

.stock-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 14px;
    padding: 10px 14px;
    animation: fadeInUp 0.6s ease-out;
}

/* 空狀態 */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-tertiary);
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 16px;
    opacity: 0.5;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.empty-text {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-secondary);
}

.empty-hint {
    font-size: 14px;
    color: var(--text-tertiary);
}

/* 持股卡片 */

.stock-item-card {
    position: relative;
    overflow: hidden;
    background: var(--bg-card);
    border-radius: 18px;
    padding: 16px 18px;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12), 0 4px 10px rgba(15, 23, 42, 0.06);
    cursor: pointer;
    transition: all 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255, 255, 255, 0.38);
    isolation: isolate;
}

.stock-item-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(125deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.82) 55%, rgba(255, 255, 255, 0.65) 85%);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: -1;
}

.stock-item-card::after {
    content: '';
    position: absolute;
    inset: 8px;
    border-radius: inherit;
    background: radial-gradient(circle at 20% 15%, rgba(255, 255, 255, 0.4), transparent 35%),
                radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.35), transparent 30%),
                linear-gradient(180deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.3) 80%);
    mix-blend-mode: screen;
    pointer-events: none;
    z-index: -1;
}


.stock-grid-card-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
}

.stock-grid-card-title {
    min-width: 0;
}

.stock-grid-card-title .stock-card-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 16px;
    font-weight: 900;
    letter-spacing: 0.15px;
    color: #1e1b2d;
    text-shadow: 0 3px 14px rgba(255, 255, 255, 0.65);
}

.stock-grid-card-price {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    flex-shrink: 0;
}

.stock-grid-card-price-value {
    display: inline-flex;
    align-items: center;
    justify-content: flex-end;
    gap: 6px;
    font-size: 18px;
    font-weight: 900;
    color: #0a0a0a;
    letter-spacing: 0.32px;
    line-height: 1.1;
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.7);
}

.stock-grid-card-price-sub {
    margin-top: 4px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.85);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
    color: rgba(57, 48, 81, 0.8);
}

 .stock-grid-card-price-number {
    font-size: 24px;
    font-weight: 900;
    letter-spacing: 0.25px;
    color: #fdfefe;
    text-shadow: 0 2px 14px rgba(255, 255, 255, 0.55);
}

.stock-grid-card-price-unit {
    font-size: 10px;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.85);
    letter-spacing: 0.15px;
}

.stock-grid-card-price-prev-label {
    font-size: 11px;
    font-weight: 800;
    color: #332a4b;
    letter-spacing: 0.18px;
}

 .stock-grid-card-price-prev {
    font-size: 16px;
    font-weight: 800;
    color: #111827;
    letter-spacing: 0.24px;
}

.stock-grid-card-price-arrow {
    font-size: 16px;
    line-height: 1;
    font-weight: 900;
    transform: translateY(-0.5px);
}

.stock-grid-card-price-arrow.up {
    color: #f44336; /* 紅色表示漲 */
}

.stock-grid-card-price-arrow.down {
    color: #4caf50; /* 綠色表示跌 */
}

.stock-grid-card-price-arrow:empty {
    display: none;
}

.stock-grid-card-change-arrow {
    font-size: 14px;
    line-height: 1;
}

.stock-item-card .stock-grid-card-price-arrow {
    font-size: 18px !important;
    font-weight: 900 !important;
}

.stock-item-card .stock-grid-card-change-arrow {
    font-size: 16px !important;
    font-weight: 900 !important;
}

.stock-grid-card-change {
    margin-top: 8px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.2;
    letter-spacing: 0.3px;
    text-align: center;
    white-space: nowrap;
    transition: all 0.2s ease;
    cursor: pointer;
    user-select: none;
    border: 1px solid transparent;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    background: rgba(255, 255, 255, 0.85);
    color: #1b1f2e;
}

.stock-grid-card-change.positive {
    color: #ffffff !important;
    background: linear-gradient(135deg, #f44336 0%, #e53935 100%) !important;
    border: 1px solid #d32f2f !important;
    box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
    font-weight: 700 !important;
    letter-spacing: 0.4px !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
}

.stock-grid-card-change.positive:hover {
    background: linear-gradient(135deg, #e53935 0%, #d32f2f 100%) !important;
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(244, 67, 54, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

.stock-grid-card-change.negative {
    color: #ffffff !important;
    background: linear-gradient(135deg, #4caf50 0%, #43a047 100%) !important;
    border: 1px solid #388e3c !important;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
    font-weight: 700 !important;
    letter-spacing: 0.4px !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
}

.stock-grid-card-change.negative:hover {
    background: linear-gradient(135deg, #43a047 0%, #388e3c 100%) !important;
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

.stock-grid-card-change-arrow {
    font-size: 12px;
    line-height: 1;
    font-weight: 900;
    margin-right: 2px;
    display: inline-block;
    vertical-align: middle;
}

.stock-grid-card-tags {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

 .stock-grid-card-tag {
    font-size: 11px;
    font-weight: 800;
    color: #1b1f2e;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.85);
    padding: 5px 11px;
    border-radius: 999px;
    letter-spacing: 0.22px;
    box-shadow: 0 14px 30px rgba(15, 23, 42, 0.1), 0 3px 8px rgba(15, 23, 42, 0.06);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.stock-grid-card-tag--shares {
    font-size: 13px;
    font-weight: 900;
    color: #1b1f2e;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 248, 255, 0.8) 100%);
    border: 1px solid rgba(148, 163, 184, 0.4);
    box-shadow: 0 16px 34px rgba(59, 130, 246, 0.25), 0 4px 12px rgba(59, 130, 246, 0.16);
    padding: 7px 14px;
    letter-spacing: 0.32px;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.stock-grid-card-tag--shares::before {
    content: '⧉';
    font-size: 12px;
    color: rgba(15, 23, 42, 0.6);
}

.stock-grid-card-tag.positive {
    color: var(--text-strong, #0f172a);
    background: rgba(239, 68, 68, 0.25);
    border: 1px solid rgba(239, 68, 68, 0.35);
    box-shadow: 0 16px 34px rgba(239, 68, 68, 0.24);
}

.stock-grid-card-tag.negative {
    color: var(--text-strong, #0f172a);
    background: rgba(16, 185, 129, 0.28);
    border: 1px solid rgba(16, 185, 129, 0.38);
    box-shadow: 0 16px 34px rgba(16, 185, 129, 0.24);
}

.stock-item-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background-image: url('./image/7be0d95a7ebaa0d920e4c045a8b89ec7.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.06;
    z-index: 0;
    pointer-events: none;
    border-radius: 16px;
    transition: opacity 0.3s ease;
}

.stock-item-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
    z-index: 1;
}

.stock-item-card:hover::after {
    left: 100%;
}

.stock-item-card:hover::before {
    opacity: 0.12;
}

.stock-item-card > * {
    position: relative;
    z-index: 2;
}

.stock-item-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
    border-color: var(--color-primary-lighter);
}

.stock-item-card:active {
    transform: scale(0.98) translateY(-1px);
    border-color: var(--color-primary);
    box-shadow: 0 2px 8px var(--color-primary-rgba-25);
}

.stock-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.stock-card-icon {
    font-size: 14px;
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.3) 0%, rgba(255, 158, 199, 0.25) 100%);
    border-radius: 6px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    box-shadow: 0 1px 5px var(--color-primary-rgba-15);
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.stock-item-card:hover .stock-card-icon {
    transform: scale(1.05) rotate(3deg);
    box-shadow: 0 2px 8px var(--color-primary-rgba-25);
}

.stock-card-info {
    flex: 1;
}

.stock-card-name {
    font-size: 12px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 2px;
    letter-spacing: 0.15px;
}

.stock-card-code {
    font-size: 10px;
    color: var(--text-primary);
    font-weight: 700;
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.15) 0%, rgba(255, 158, 199, 0.1) 100%);
    padding: 1px 4px;
    border-radius: 3px;
    display: inline-block;
    letter-spacing: 0.25px;
}

.stock-card-status {
    font-size: 12px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.stock-card-body {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stock-card-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 3px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.03);
}

.stock-card-row:last-child {
    border-bottom: none;
}

.stock-card-row.highlight {
    padding: 4px;
    background: var(--bg-gradient-light);
    border-radius: 3px;
    margin-top: 1px;
}

.stock-card-label {
    font-size: 10px;
    color: var(--text-secondary);
    font-weight: 600;
    letter-spacing: 0.1px;
}

.stock-card-value {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
    text-align: right;
    letter-spacing: 0.3px;
}

.stock-card-value.positive {
    color: #4caf50;
}

.stock-card-value.negative {
    color: #f44336;
}

.pnl-percent {
    font-size: 12px;
    margin-left: 4px;
    opacity: 0.8;
}

.stock-card-value.positive .pnl-percent {
    opacity: 1;
    color: #14532d;
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.22) 0%, rgba(16, 185, 129, 0.18) 100%);
    border: 1px solid rgba(34, 197, 94, 0.28);
    padding: 2px 8px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    text-shadow: none;
}
:root {
  /* ===============================
     交易清單：金額膠囊（跟著主題色）
     =============================== */

  --txn-amount-bg: linear-gradient(
    135deg,
    color-mix(in srgb, var(--bg-white) 88%, var(--color-primary) 12%) 0%,
    color-mix(in srgb, var(--bg-white) 88%, var(--color-primary-light) 12%) 100%
  );

  --txn-amount-border: color-mix(
    in srgb,
    var(--color-primary) 26%,
    transparent
  );

  --txn-amount-bg-hover: linear-gradient(
    135deg,
    color-mix(in srgb, var(--bg-white) 82%, var(--color-primary) 18%) 0%,
    color-mix(in srgb, var(--bg-white) 82%, var(--color-primary-light) 18%) 100%
  );

  --txn-amount-border-hover: color-mix(
    in srgb,
    var(--color-primary) 42%,
    transparent
  );
}

:root[data-theme="star"] .stock-card-value.positive .pnl-percent,
:root[data-theme="firefly"] .stock-card-value.positive .pnl-percent,
:root[data-theme="neon"] .stock-card-value.positive .pnl-percent,
:root[data-theme="ocean"] .stock-card-value.positive .pnl-percent,
:root[data-theme="galaxy"] .stock-card-value.positive .pnl-percent,
:root[data-theme="lava"] .stock-card-value.positive .pnl-percent,
:root[data-theme="coffee"] .stock-card-value.positive .pnl-percent,
:root[data-theme="mono"] .stock-card-value.positive .pnl-percent,
:root[data-theme="aurora"] .stock-card-value.positive .pnl-percent {
    opacity: 1;
    color: rgba(240, 255, 244, 0.96);
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.28) 0%, rgba(16, 185, 129, 0.20) 100%);
    border: none;
    padding: 2px 8px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    backdrop-filter: blur(6px);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
}

.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 16px 0;
    padding-left: 4px;
}

.stock-list-container {
    margin-top: 24px;
}

.allocation-card {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    margin-top: 16px;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10), 0 4px 10px rgba(15, 23, 42, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.06);
    position: relative;
    overflow: hidden;
    transition: transform 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
}

.allocation-card::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    padding: 1px;
    background: linear-gradient(125deg, var(--color-primary-rgba-18), rgba(0, 169, 255, 0.14));
    opacity: 0;
    pointer-events: none;
    transition: opacity 240ms ease;
}

.allocation-card > * {
    position: relative;
    z-index: 1;
}

.allocation-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.16), 0 6px 14px rgba(15, 23, 42, 0.08);
    border-color: var(--color-primary-rgba-25);
}

.allocation-card:hover::after {
    opacity: 1;
}

.allocation-card-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 12px;
}

.allocation-card-title {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
}

.allocation-card-sub {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-tertiary);
    text-align: right;
}

.allocation-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.allocation-field {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.allocation-label {
    font-size: 12px;
    font-weight: 700;
    color: var(--text-secondary);
}

.allocation-inline {
    display: flex;
    align-items: center;
    gap: 8px;
}

.allocation-input {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    font-size: 14px;
    background: var(--bg-white);
    color: var(--text-primary);
    box-sizing: border-box;
    transition: all 0.25s ease;
}

.allocation-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10);
}

.allocation-sep {
    font-weight: 800;
    color: var(--text-tertiary);
}

.allocation-actions {
    display: flex;
    gap: 10px;
    margin-top: 14px;
}

.allocation-btn {
    flex: 1;
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid var(--border-light);
    background: var(--bg-white);
    color: var(--text-primary);
    font-weight: 800;
    cursor: pointer;
    transition: all 0.25s ease;
}

.allocation-btn.primary {
    border: none;
    color: #fff;
    background: var(--bg-gradient);
    box-shadow: var(--shadow-primary);
}

.allocation-btn:hover {
    transform: translateY(-1px);
}

.allocation-btn:active {
    transform: scale(0.98);
}

.stock-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 14px;
}

/* 統一的股票卡片樣式已在上面定義 */

.stock-item-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.stock-item-icon-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
}

.stock-item-icon {
    font-size: 32px;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-gradient);
    border-radius: 12px;
    box-shadow: var(--shadow-primary);
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.stock-item-info {
    flex: 1;
}

.stock-item-name {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.stock-item-code {
    font-size: 14px;
    color: var(--text-tertiary);
}

.stock-item-status {
    font-size: 24px;
}

.stock-item-metrics {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-top: 12px;
}

.stock-metric {
    display: flex;
    flex-direction: column;
}

.stock-metric-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-bottom: 4px;
}

.stock-metric-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.stock-metric-value.positive {
    color: #28a745;
}

.stock-metric-value.negative {
    color: #dc3545;
}

/* 個股詳情頁面 */
.stock-detail-page {
    padding: 0;
    padding-bottom: 100px;
    background: var(--bg-lighter);
    max-width: 100%;
    width: 100%;
}

.detail-back-btn {
    position: absolute;
    top: 16px;
    left: 16px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    color: var(--text-primary);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    padding: 10px 16px;
    border-radius: 20px;
    z-index: 10;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
}

.detail-back-btn:hover {
    background: var(--bg-white);
    transform: translateX(-2px);
}

.stock-info-header {
    background: var(--bg-gradient);
    padding: 60px 20px 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    border-radius: 0 0 24px 24px;
    box-shadow: var(--shadow-primary-lg);
    position: relative;
}

.stock-icon-large {
    font-size: 56px;
    width: 72px;
    height: 72px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.stock-name-section {
    flex: 1;
}

.stock-name {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    margin-bottom: 4px;
}

.stock-code {
    font-size: 16px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
}

.stock-status-badge {
    background: rgba(255, 255, 255, 0.9);
    padding: 6px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--color-primary);
}

.stock-metrics-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    padding: 20px;
}

.metric-card {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 20px;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 8px;
    transition: all 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.metric-card.highlight {
    background: var(--bg-gradient-light);
    border: 2px solid var(--color-primary-lighter);
}

.metric-label {
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 500;
}

.metric-value-large {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
}

.metric-value-large.positive {
    color: #4caf50;
}

.metric-value-large.negative {
    color: #f44336;
}

.metric-input-large {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--border-medium);
    border-radius: 8px;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    background: var(--bg-white);
    transition: all 0.3s ease;
}

.metric-input-large:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-10);
}

.stock-icon-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
}

.stock-icon {
    font-size: 48px;
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.stock-type-badge {
    font-size: 12px;
    padding: 4px 8px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 12px;
    color: var(--color-primary);
    font-weight: 600;
}

.stock-name-code {
    flex: 1;
    margin-left: 16px;
}

.stock-name {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    margin-bottom: 4px;
}

.stock-code {
    font-size: 16px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
}

.stock-status-sticker {
    font-size: 32px;
    animation: bounce 2s infinite;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* 關鍵數據 */
.stock-key-metrics {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    padding: 20px;
    background: var(--bg-white);
    margin: 20px;
    border-radius: 12px;
    box-shadow: var(--color-primary-rgba-10);
    border: 2px solid transparent;
}

.metric-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    background: var(--bg-gradient-light);
    border-radius: 12px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.metric-item:hover {
    border-color: var(--color-primary-lighter);
    box-shadow: var(--color-primary-rgba-15);
}

.metric-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-bottom: 8px;
    font-weight: 500;
}

.metric-value {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
}

.metric-value.pnl.positive {
    color: #28a745;
}

.metric-value.pnl.negative {
    color: #dc3545;
}

.metric-input {
    width: 100%;
    padding: 8px;
    border: 2px solid var(--color-primary-lighter);
    border-radius: 12px;
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    background: var(--bg-white);
    transition: all 0.3s ease;
}

.metric-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: var(--shadow-primary);
}

/* 分頁切換 */
.record-tabs-container {
    margin-top: 24px;
}

.record-tabs {
    display: flex;
    padding: 0 20px;
    gap: 12px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    margin-bottom: 20px;
}

.record-tab {
    flex: 1;
    min-width: 100px;
    padding: 14px 24px;
    border: 2px solid var(--border-light);
    border-radius: 16px;
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    scroll-snap-align: start;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.record-tab::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.record-tab:hover::before {
    left: 100%;
}

.record-tab:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: var(--color-primary-lighter);
}

.record-tab.active {
    background: var(--bg-gradient);
    color: var(--text-white);
    font-weight: 700;
    box-shadow: 0 4px 16px var(--color-primary-rgba-35), 0 2px 8px var(--color-primary-rgba-20);
    border-color: var(--color-primary);
    transform: translateY(-2px);
}

.record-tab.active::before {
    display: none;
}

.record-content {
    padding: 20px;
    overflow-x: hidden;
    animation: fadeInUp 0.4s ease-out;
}

#dividendRecordList .record-search {
    display: flex;
    margin-bottom: 12px;
}

.record-search-input {
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid var(--border-subtle, #e5e7eb);
    background: rgba(255, 255, 255, 0.82);
    color: var(--text-primary);
    font-size: 14px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    transition: all 0.2s ease;
}

.record-search-input:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

.record-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

 .record-card {
    background: var(--bg-card, var(--bg-white));
    border-radius: 20px;
    padding: 20px;
    position: relative;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    border: 2px solid transparent;
    transition: all 0.3s ease;
    margin-bottom: 16px;
     transition: all 0.3s ease;
     margin-bottom: 16px;
 }

 .record-card .record-menu {
     top: 8px;
     right: 6px;
     z-index: 10;
 }

.record-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('./image/d3461d247dcf178c1e2fced254701716.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.08;
    z-index: 0;
    pointer-events: none;
    border-radius: 20px;
    transition: opacity 0.3s ease;
}

.record-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s ease;
    z-index: 1;
}

.record-card:hover::after {
    left: 100%;
}

.record-card:hover::before {
    opacity: 0.12;
}

.record-card > * {
    position: relative;
    z-index: 2;
}

:root[data-theme="midnight"] .record-card,
:root[data-theme="obsidian"] .record-card {
    background: var(--bg-card);
    border: 1px solid var(--card-border-color);
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35), var(--shadow-md);
    color: var(--text-primary);
}

:root[data-theme="forest"] .record-card {
    color: #0f2a1c;
}

:root[data-theme="forest"] .record-card .record-card-details > div,
:root[data-theme="forest"] .record-card-type,
:root[data-theme="forest"] .record-card-amount,
:root[data-theme="forest"] .record-card-date {
    color: #0f2a1c;
}

:root[data-theme="midnight"] .record-card::before,
:root[data-theme="obsidian"] .record-card::before {
    background-image: none;
    background: rgba(0, 0, 0, 0.32);
    opacity: 0.15;
}

:root[data-theme="midnight"] .record-card .record-card-details > div,
:root[data-theme="obsidian"] .record-card .record-card-details > div {
    border: 1px solid var(--card-border-color);
    box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.35);
}

.record-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08);
    border-color: var(--color-primary-lighter);
}

.record-card:active {
    transform: scale(0.98) translateY(-2px);
    border-color: var(--color-primary);
    box-shadow: 0 4px 16px var(--color-primary-rgba-25);
}

.record-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    align-items: center;
    margin-bottom: 16px;
    position: relative;
    padding-right: 90px; /* 為按鈕留出空間 */
    padding-bottom: 12px;
    border-bottom: 2px solid var(--border-light);
}

.record-card-type {
    font-size: 13px;
    padding: 8px 16px;
    border-radius: 14px;
    font-weight: 700;
    letter-spacing: 0.3px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.record-card:hover .record-card-type {
    transform: scale(1.05);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
}

.record-card-type.buy {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
    color: var(--text-white);
    box-shadow: 0 3px 10px var(--color-primary-rgba-30);
}

.record-card-type.sell {
    background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-secondary-light) 100%);
    color: var(--text-white);
    box-shadow: 0 3px 10px var(--color-secondary-rgba-30);
}

.record-card-type.dividend {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
    color: var(--text-white);
    box-shadow: 0 3px 10px var(--color-accent-rgba-30);
}

/* 買入卡片框線 */
.record-card:has(.record-card-type.buy) {
    border: 2px solid var(--color-primary-rgba-40);
}

/* 賣出卡片框線 */
.record-card:has(.record-card-type.sell) {
    border: 2px solid var(--color-secondary-rgba-40);
}

/* 股息卡片框線 */
.record-card:has(.record-card-type.dividend) {
    border: 2px solid var(--color-accent-rgba-40);
}

/* 懸停效果 */
.record-card:has(.record-card-type.buy):hover {
    border-color: var(--color-primary-rgba-60);
    box-shadow: 0 6px 20px var(--color-primary-rgba-20);
}

.record-card:has(.record-card-type.sell):hover {
    border-color: var(--color-secondary-rgba-60);
    box-shadow: 0 6px 20px var(--color-secondary-rgba-20);
}

.record-card:has(.record-card-type.dividend):hover {
    border-color: var(--color-accent-rgba-60);
    box-shadow: 0 6px 20px var(--color-accent-rgba-20);
}

.record-card-type.dividend-reinvest-badge {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%) !important;
    color: #856404 !important;
    font-weight: 800;
    box-shadow: 0 3px 10px rgba(255, 215, 0, 0.5) !important;
    border: 2px solid rgba(255, 215, 0, 0.6) !important;
    animation: badgeShine 2s infinite, badgePulse 3s ease-in-out infinite alternate;
    position: relative;
    overflow: hidden;
}

/* 強制所有主題下的股利購買按鈕保持一致 */
:root[data-theme="pink"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="blue"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="green"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="purple"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="red"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="yellow"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="indigo"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="teal"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="auroraflow"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="meteor"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="cyber"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="midnight"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="neon"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="ocean"] .record-card-type.dividend-reinvest-badge,
:root[data-theme="galaxy"] .record-card-type.dividend-reinvest-badge {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%) !important;
    color: #856404 !important;
    border: 2px solid rgba(255, 215, 0, 0.6) !important;
    box-shadow: 0 3px 10px rgba(255, 215, 0, 0.5) !important;
}

.record-card-type.dividend-reinvest-badge::before {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: badgeSweep 3s infinite;
    pointer-events: none;
}

.record-card.dividend-reinvest {
    background: linear-gradient(135deg, #fff9e6 0%, #fff3cc 100%);
    border: 2px solid #ffd700;
    animation: dividendGlow 3s ease-in-out infinite alternate;
    position: relative;
    overflow: hidden;
}

.record-card.dividend-reinvest::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
    animation: dividendRotate 8s linear infinite;
    pointer-events: none;
}

.record-card.dividend-reinvest::after {
    content: '💰';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    opacity: 0.3;
    animation: float 3s ease-in-out infinite;
    pointer-events: none;
}

@keyframes dividendGlow {
    0%, 100% {
        box-shadow: 0 3px 10px rgba(255, 215, 0, 0.5);
    }
    50% {
        box-shadow: 0 3px 15px rgba(255, 215, 0, 0.7);
    }
}

@keyframes dividendRotate {
    0% {
        transform: rotate(0deg) scale(1);
    }
    50% {
        transform: rotate(180deg) scale(1.1);
    }
    100% {
        transform: rotate(360deg) scale(1);
    }
}

@keyframes shimmer {
    0%, 100% {
        box-shadow: 0 3px 10px rgba(255, 215, 0, 0.5);
    }
    50% {
        box-shadow: 0 3px 15px rgba(255, 215, 0, 0.7);
    }
}

@keyframes badgeShine {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes badgePulse {
    0%, 100% {
        box-shadow: 0 3px 10px rgba(255, 215, 0, 0.5);
    }
    50% {
        box-shadow: 0 5px 20px rgba(255, 215, 0, 0.8);
    }
}

@keyframes badgeSweep {
    0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
    }
    50% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
    }
    100% {
        transform: translateX(200%) translateY(200%) rotate(45deg);
    }
}

.dividend-reinvest-label {
    grid-column: 1 / -1;
    background: var(--bg-white);
    padding: 10px 16px;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    font-size: 13px;
    font-weight: 600;
    color: #856404;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.08);
    animation: dividendPulse 2s ease-in-out infinite alternate;
}

@keyframes dividendPulse {
    0%, 100% {
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.08);
    }
    50% {
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.12);
    }
}

.dark .dividend-reinvest-label {
    background: #000000;
    color: #ffffff;
    border-color: rgba(255, 255, 255, 0.25);
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.15);
}

:root[data-theme="neon"] .dividend-reinvest-label {
    background: linear-gradient(135deg, rgba(12, 10, 30, 0.92), rgba(23, 18, 52, 0.9));
    color: #ffffff;
    border-color: rgba(0, 212, 255, 0.35);
    box-shadow: inset 0 1px 2px rgba(0, 212, 255, 0.2);
}

:root[data-theme="star"] .dividend-reinvest-label,
:root[data-theme="firefly"] .dividend-reinvest-label,
:root[data-theme="galaxy"] .dividend-reinvest-label,
:root[data-theme="mono"] .dividend-reinvest-label,
:root[data-theme="meteor"] .dividend-reinvest-label {
    color: #ffffff;
}

/* 定期定額購買卡片特殊樣式 */
.record-card.dca-invest {
    border: 3px solid var(--color-primary);
    background: linear-gradient(135deg, var(--color-primary-rgba-10, rgba(0, 0, 0, 0.06)) 0%, var(--color-primary-rgba-20, rgba(0, 0, 0, 0.1)) 100%);
    box-shadow: 0 6px 20px var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18)), 0 2px 8px var(--color-primary-rgba-18, rgba(0, 0, 0, 0.12));
    position: relative;
}

.record-card.dca-invest::before {
    opacity: 0.15;
}

.record-card.dca-invest::after {
    background: linear-gradient(90deg, transparent, var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18)), transparent);
}

.record-card.dca-invest:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px var(--color-primary-rgba-40, rgba(0, 0, 0, 0.24)), 0 4px 12px var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18));
    border-color: var(--color-primary-light);
}

.record-card-type.dca-badge {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
    color: var(--text-white);
    font-weight: 800;
    box-shadow: 0 3px 10px var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18));
    border: 2px solid var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18));
    animation: dca-pulse 2s infinite;
}

@keyframes dca-pulse {
    0%, 100% {
        box-shadow: 0 3px 10px var(--color-primary-rgba-30, rgba(0, 0, 0, 0.18));
    }
    50% {
        box-shadow: 0 3px 15px var(--color-primary-rgba-40, rgba(0, 0, 0, 0.24));
    }
}

.dca-label {
    grid-column: 1 / -1;
    background: linear-gradient(135deg, var(--color-primary-rgba-20, rgba(0, 0, 0, 0.1)) 0%, var(--color-primary-rgba-10, rgba(0, 0, 0, 0.06)) 100%);
    padding: 10px 16px;
    border-radius: 12px;
    font-weight: 700;
    color: var(--text-primary);
    border: 2px solid var(--color-primary-rgba-25, rgba(0, 0, 0, 0.14));
    margin-top: 8px;
    text-align: center;
    font-size: 13px;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-20, rgba(0, 0, 0, 0.1));
}

.record-card-date {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 600;
    padding: 6px 12px;
    background: color-mix(in srgb, var(--color-primary-rgba-08), var(--bg-card, var(--bg-white)));
    border: 1px solid var(--color-primary-rgba-15);
    border-radius: 10px;
}

:root[data-theme="midnight"] .record-card-date,
:root[data-theme="obsidian"] .record-card-date {
    background: rgba(0, 0, 0, 0.65);
    border: 1px solid var(--card-border-color);
    color: var(--text-primary);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
}

:root[data-theme="galaxy"] .record-card-date {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.25), rgba(37, 99, 235, 0.35));
    color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(139, 92, 246, 0.35);
    box-shadow: 0 4px 14px rgba(15, 23, 42, 0.55);
}

:root[data-theme="money"] .record-card-date {
    color: var(--color-secondary);
    border-color: var(--color-secondary-rgba-25);
    background: color-mix(in srgb, var(--color-secondary-rgba-10), rgba(255, 255, 255, 0.65));
}

:root[data-theme="meteor"] .record-card-date {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.25), rgba(15, 23, 42, 0.35));
    color: rgba(226, 232, 240, 0.95);
    border: 1px solid rgba(96, 165, 250, 0.4);
    box-shadow: 0 4px 14px rgba(2, 6, 23, 0.5);
}

:root[data-theme="mono"] .record-card-date {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(51, 65, 85, 0.65));
    color: rgba(248, 250, 252, 0.9);
    border: 1px solid rgba(248, 250, 252, 0.18);
    box-shadow: 0 4px 14px rgba(15, 23, 42, 0.6);
}

.record-card-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.record-card-details > div {
    padding: 10px;
    background: var(--bg-gradient-light);
    border-radius: 12px;
    border: 1px solid var(--border-light);
    transition: all 0.3s ease;
}

:root[data-theme="ocean"] .record-card-details > div {
    border: 1px solid rgba(14, 165, 233, 0.25);
    box-shadow: 0 2px 8px rgba(14, 165, 233, 0.15);
    color: #0c4a6e;
}

.record-card:hover .record-card-details > div {
    transform: translateY(-1px);
}

.dark .record-card .record-card-details > div {
    color: var(--text-primary) !important;
}

.record-card-amount {
    font-size: 20px;
    font-weight: 800;
    color: var(--text-primary);
    margin-top: 12px;
    padding: 12px;
    border-radius: 14px;
    text-align: center;
    letter-spacing: 0.5px;
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary-light) 28%, var(--bg-card, var(--bg-white))) 0%,
        color-mix(in srgb, var(--color-primary) 20%, var(--bg-card, var(--bg-white))) 100%);
    border: 2px solid color-mix(in srgb, var(--color-primary-light) 60%, transparent);
    box-shadow: 0 10px 26px color-mix(in srgb, var(--color-primary) 30%, transparent);
}

/* 記錄編輯懸浮按鈕 */
.record-quick-buy-fab {
    position: absolute;
    top: 12px;
    right: 108px;
    width: 42px;
    height: 42px;
    border: none;
    border-radius: 50%;
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
    color: white;
    font-size: 13px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.35);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    z-index: 10;
    pointer-events: auto;
}

.record-quick-buy-fab:hover {
    transform: scale(1.12);
    box-shadow: 0 6px 18px rgba(76, 175, 80, 0.45);
}

.record-quick-buy-fab:active {
    transform: scale(0.92);
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

/* ========== 投資輸入頁面 - 融合網頁風格 ========== */
.investment-input-page {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-primary);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    padding-bottom: 100px;
    width: 100%;
}

/* 響應式設計：不同屏幕尺寸的適配 */
@media (min-width: 576px) {
    .investment-input-page {
        padding-left: 20px;
        padding-right: 20px;
    }
}

@media (min-width: 768px) {
    .investment-input-page {
        padding-left: 40px;
        padding-right: 40px;
    }
}

@media (min-width: 992px) {
    .investment-input-page {
        padding-left: 60px;
        padding-right: 60px;
    }
}

@media (min-width: 1200px) {
    .investment-input-page {
        padding-left: 80px;
        padding-right: 80px;
    }
}

/* 頁面標題區 */
.investment-form-header {
    padding: 24px 20px 20px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    width: 100%;
    box-sizing: border-box;
    position: relative;
    box-shadow: var(--color-primary-rgba-10);
}

/* 響應式：標題區內邊距調整 */
@media (min-width: 576px) {
    .investment-form-header {
        padding: 28px 24px 24px;
    }
}

@media (min-width: 768px) {
    .investment-form-header {
        padding: 32px 30px 28px;
        max-width: 600px;
        margin: 0 auto;
    }
}

@media (min-width: 992px) {
    .investment-form-header {
        padding: 40px 40px 32px;
        max-width: 700px;
    }
}

.form-header-icon {
    font-size: 32px;
    margin-bottom: 12px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    text-align: center;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

.form-header-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 8px 0;
}

.form-header-subtitle {
    font-size: 14px;
    color: var(--text-tertiary);
    margin: 0;
    line-height: 1.5;
}

/* 返回按鈕 */
.investment-form-back-btn {
    position: absolute;
    left: 20px;
    top: 24px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary-light) 35%, var(--bg-white)) 0%,
        color-mix(in srgb, var(--color-primary-light) 15%, var(--bg-white)) 100%);
    border: 2px solid color-mix(in srgb, var(--color-primary-light) 55%, transparent);
    border-radius: 12px;
    color: var(--color-primary);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10;
    box-shadow: 0 2px 4px color-mix(in srgb, var(--color-primary) 25%, transparent);
}

.investment-form-back-btn:hover {
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary) 40%, var(--bg-white)) 0%,
        color-mix(in srgb, var(--color-primary-dark) 35%, var(--bg-white)) 100%);
    color: #ffffff;
    transform: translateX(-2px);
    box-shadow: 0 4px 8px color-mix(in srgb, var(--color-primary) 35%, transparent);
}

.investment-form-back-btn:active {
    transform: translateX(0) scale(0.98);
}

.back-btn-icon {
    font-size: 18px;
    font-weight: 600;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.investment-form-back-btn::before {
    content: '👈';
    font-size: 16px;
    margin-right: 2px;
}

.investment-form-back-btn .back-btn-icon {
    display: none;
}

.back-btn-text {
    font-size: 14px;
}

/* 響應式：返回按鈕調整 */
@media (min-width: 576px) {
    .investment-form-back-btn {
        left: 24px;
        top: 28px;
        padding: 10px 14px;
    }
}

@media (min-width: 768px) {
    .investment-form-back-btn {
        left: 30px;
        top: 32px;
        padding: 12px 16px;
        font-size: 15px;
    }
    
    .back-btn-icon {
        font-size: 20px;
    }
    
    .back-btn-text {
        font-size: 15px;
    }
}

@media (min-width: 992px) {
    .investment-form-back-btn {
        left: 40px;
        top: 40px;
        padding: 14px 18px;
        font-size: 16px;
    }
    
    .back-btn-icon {
        font-size: 22px;
    }
    
    .back-btn-text {
        font-size: 16px;
    }
}

.nav-back-btn {
    width: 44px;
    height: 44px;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px var(--color-primary-rgba-35);
    z-index: 100;
    pointer-events: auto;
}

.nav-back-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateX(-4px);
}

.nav-back-btn:active {
    transform: translateX(-2px) scale(0.95);
}

.nav-title {
    flex: 1;
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    margin: 0;
    text-align: center;
    letter-spacing: 0.5px;
}

.nav-spacer {
    width: 44px;
}

/* 表單容器 */
.investment-form-container {
    flex: 1;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 100%;
    width: 100%;
    box-sizing: border-box;
}

/* 響應式：不同屏幕尺寸的內邊距調整 */
@media (min-width: 576px) {
    .investment-form-container {
        padding: 24px;
        gap: 24px;
    }
}

@media (min-width: 768px) {
    .investment-form-container {
        padding: 30px;
        gap: 28px;
        max-width: 600px;
        margin: 0 auto;
    }
}

@media (min-width: 992px) {
    .investment-form-container {
        padding: 40px;
        gap: 32px;
        max-width: 700px;
    }
}

.stock-picker-card {
    background: var(--bg-gradient);
    border-radius: 16px;
    padding: 16px;
    box-shadow: var(--shadow-primary-lg);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
}

.stock-picker-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
    animation: pickerShine 4s ease-in-out infinite;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes pickerShine {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.stock-picker-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-primary-lg);
}

.stock-picker-card:active {
    transform: scale(0.98);
}

.picker-label {
    font-size: 13px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    margin-bottom: 16px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.picker-content {
    display: flex;
    align-items: center;
    gap: 16px;
}

.picker-icon {
    width: 64px;
    height: 64px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.input-stock-icon {
    font-size: 36px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.picker-info {
    flex: 1;
}

.picker-name {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    margin-bottom: 6px;
}

.picker-code {
    font-size: 15px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    font-weight: 500;
}

.picker-arrow {
    font-size: 24px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    font-weight: 300;
}

/* 表單欄位 */
.form-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-hint {
    font-size: 13px;
    color: var(--text-tertiary);
    min-height: 18px;
    line-height: 1.4;
    transition: color 0.2s ease, opacity 0.2s ease;
}

.form-hint.hint-success {
    color: var(--color-success, #2dd4bf);
}

.form-hint.hint-error {
    color: var(--color-danger, #ff6b6b);
}

.price-input-field .form-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.price-input-field .form-input {
    padding-right: 42px;
}

.price-input-field .form-input.is-loading {
    background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.4) 50%, rgba(255, 255, 255, 0) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

.input-loading-indicator {
    position: absolute;
    right: 14px;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.price-input-field .form-input.is-loading + .input-loading-indicator {
    opacity: 1;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* 投資類型按鈕組 */
.investment-type-buttons {
    display: flex;
    gap: 12px;
    width: 100%;
}

.type-btn {
    flex: 1;
    padding: 12px 16px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg-white);
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    box-shadow: var(--shadow-sm);
}

.type-btn:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.type-btn.active {
    background: var(--bg-gradient);
    border-color: var(--color-primary);
    color: var(--text-white);
    font-weight: 600;
    box-shadow: var(--shadow-primary-lg);
}

.type-icon {
    font-size: 24px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.type-text {
    font-size: 13px;
    font-weight: 500;
}

/* 響應式：投資類型按鈕調整 */
@media (min-width: 576px) {
    .type-btn {
        padding: 14px 18px;
    }
    
    .type-icon {
        font-size: 26px;
    }
    
    .type-text {
        font-size: 14px;
    }
}

@media (min-width: 768px) {
    .type-btn {
        padding: 16px 20px;
    }
    
    .type-icon {
        font-size: 28px;
    }
}

.form-label {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

/* 為不同標籤添加可愛圖標 */
/* 代碼欄位 */
.form-field:has(#calcStockCodeInput) .form-label::before {
    content: '🏢';
    font-size: 16px;
    margin-right: 2px;
}

/* 股票名稱欄位 */
.form-field:has(#calcStockNameInput) .form-label::before {
    content: '📈';
    font-size: 16px;
    margin-right: 2px;
}

/* 日期欄位 */
.form-field:has(#calcDateInput) .form-label::before {
    content: '📅';
    font-size: 16px;
    margin-right: 2px;
}

/* 價格欄位 */
.form-field:has(#calcPriceInput) .form-label::before {
    content: '💰';
    font-size: 16px;
    margin-right: 2px;
}

/* 股數欄位 */
.form-field:has(#calcSharesInput) .form-label::before {
    content: '📊';
    font-size: 16px;
    margin-right: 2px;
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    font-size: 16px;
    color: var(--text-primary);
    background: var(--bg-white);
    transition: all 0.3s ease;
    box-sizing: border-box;
    appearance: none;
    -webkit-appearance: none;
    box-shadow: var(--shadow-sm);
}

/* 響應式：輸入框大小調整 */
@media (min-width: 576px) {
    .form-input {
        padding: 14px 18px;
        font-size: 16px;
    }
}

@media (min-width: 768px) {
    .form-input {
        padding: 16px 20px;
        font-size: 17px;
    }
    
    .form-label {
        font-size: 15px;
    }
}

@media (min-width: 992px) {
    .form-input {
        padding: 18px 22px;
        font-size: 18px;
    }
    
    .form-label {
        font-size: 16px;
    }
}

.form-input:focus {
    outline: none;
    border-color: var(--color-primary-lighter);
    background: var(--bg-white);
    box-shadow: 0 0 0 3px var(--color-primary-light-rgba-15), var(--shadow-primary);
    transform: translateY(-2px);
}

.form-field:focus-within .form-label {
    color: var(--color-primary);
    font-weight: 600;
}

.form-field:focus-within .form-label::before {
    transform: scale(1.2);
    transition: transform 0.3s ease;
}

.form-input::placeholder {
    color: #ccc;
}

/* 股數自動填入按鈕 */
.shares-auto-fill-btn {
    padding: 10px 16px;
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.2) 0%, rgba(255, 158, 199, 0.15) 100%);
    border: 2px solid var(--color-primary-lighter);
    border-radius: 12px;
    color: var(--color-primary);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 80px;
    box-shadow: 0 2px 6px var(--color-primary-rgba-15);
}

.shares-auto-fill-btn:hover {
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.3) 0%, rgba(255, 158, 199, 0.25) 100%);
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-primary-rgba-25);
}

.shares-auto-fill-btn:active {
    transform: translateY(0) scale(0.98);
    box-shadow: 0 2px 6px var(--color-primary-rgba-20);
}

@media (max-width: 480px) {
    .shares-auto-fill-btn {
        padding: 8px 12px;
        font-size: 12px;
        min-width: 70px;
    }
}

/* 定期定額 checkbox 樣式 */
.form-checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 12px 16px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg-white);
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    user-select: none;
}

.form-checkbox-label:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.form-checkbox-label:active {
    transform: translateY(0);
}

.form-checkbox {
    width: 20px;
    height: 20px;
    margin: 0;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    border: 2px solid color-mix(in srgb, var(--color-primary) 18%, #d1d5db 82%);
    border-radius: 6px;
    background: var(--bg-white, #ffffff);
    position: relative;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.form-checkbox:checked {
    background: linear-gradient(135deg,
        var(--color-primary-light) 0%,
        var(--color-primary) 100%);
    border-color: var(--color-primary);
}

.form-checkbox:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 14px;
    font-weight: bold;
}

.form-checkbox-text {
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary, #333);
    flex: 1;
}

.form-checkbox-label:has(.form-checkbox:checked) {
    border-color: var(--color-primary);
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--color-primary-light) 25%, transparent) 0%,
        color-mix(in srgb, var(--color-primary-light) 45%, transparent) 100%);
}

.form-checkbox-label:has(.form-checkbox:checked) .form-checkbox-text {
    color: var(--color-primary);
    font-weight: 600;
}

/* 日期輸入框容器 */
.form-date-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.form-date-input {
    padding-right: 45px;
}

.form-date-icon {
    position: absolute;
    right: 16px;
    font-size: 20px;
    color: var(--color-primary);
    pointer-events: none;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    transition: transform 0.3s ease;
}

.form-date-wrapper:hover .form-date-icon {
    transform: scale(1.2) rotate(5deg);
}

/* 查詢股價按鈕 */
.form-query-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg,
        var(--color-primary-light) 0%,
        var(--color-primary) 100%);
    border-radius: 16px;
    border: none;
    color: #fff;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: -4px;
    box-sizing: border-box;
    box-shadow: 0 2px 8px var(--color-primary-rgba-25);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.form-query-btn::before {
    content: '🔍';
    font-size: 18px;
}

/* 響應式：按鈕大小調整 */
@media (min-width: 576px) {
    .form-query-btn {
        padding: 16px;
        font-size: 16px;
    }
}

@media (min-width: 768px) {
    .form-query-btn {
        padding: 18px;
        font-size: 17px;
    }
}

@media (min-width: 992px) {
    .form-query-btn {
        padding: 20px;
        font-size: 18px;
    }
}

.form-query-btn:hover {
    background: linear-gradient(135deg,
        var(--color-primary) 0%,
        var(--color-primary-dark) 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px color-mix(in srgb, var(--color-primary) 35%, transparent);
}

.form-query-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px color-mix(in srgb, var(--color-primary) 24%, transparent);
}

.input-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    width: 100%;
    max-width: 100%;
}

/* 小屏幕時改為單列 */
@media (max-width: 360px) {
    .input-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
}

/* 電腦端：保持兩列，但調整間距 */
@media (min-width: 768px) {
    .input-grid {
        gap: 20px;
    }
}

.input-group {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    gap: 12px;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.input-group:focus-within {
    border-color: #667eea;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);
    transform: translateY(-4px);
}

.input-header {
    display: flex;
    align-items: center;
    gap: 8px;
}

.input-icon {
    font-size: 20px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.input-title {
    font-size: 14px;
    color: #666;
    font-weight: 600;
}

.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.input-number {
    flex: 1;
    padding: 14px 50px 14px 14px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 28px;
    font-weight: 700;
    color: #333;
    background: var(--bg-white);
    transition: all 0.3s ease;
    text-align: right;
    cursor: text;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: textfield;
}

/* 電腦端：調整輸入框大小 */
@media (min-width: 768px) {
    .input-number {
        padding: 16px 55px 16px 16px;
        font-size: 30px;
    }
}

.input-number::-webkit-inner-spin-button,
.input-number::-webkit-outer-spin-button {
    appearance: none;
    -webkit-appearance: none;
    margin: 0;
}

.input-number:hover {
    border-color: #667eea;
    background: var(--bg-input-focus);
}

.input-number:focus {
    outline: none;
    border-color: #667eea;
    background: var(--bg-white);
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), 0 4px 12px rgba(102, 126, 234, 0.2);
    transform: scale(1.02);
}

.input-number::placeholder {
    color: #ccc;
    font-weight: 400;
}

.input-unit {
    position: absolute;
    right: 12px;
    font-size: 12px;
    color: #999;
    font-weight: 600;
    pointer-events: none;
}

.input-preview {
    font-size: 13px;
    color: #999;
    text-align: right;
    font-weight: 500;
}

/* 快捷股數按鈕 */
.quick-shares-section {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    border: 2px dashed #e0e0e0;
}

.quick-title {
    font-size: 13px;
    color: #999;
    font-weight: 500;
    margin-bottom: 12px;
    text-align: center;
}

.quick-title::before {
    content: '💡 或快速選擇：';
    margin-right: 4px;
}

.quick-buttons {
    display: flex;
    gap: 10px;
}

/* 電腦端：調整快捷按鈕間距 */
@media (min-width: 768px) {
    .quick-buttons {
        gap: 12px;
    }
}

.quick-btn {
    flex: 1;
    padding: 10px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    background: var(--bg-input-focus);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
}

.quick-btn:hover {
    border-color: #667eea;
    background: var(--bg-white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.quick-btn:active {
    transform: translateY(0) scale(0.98);
}

.quick-number {
    font-size: 18px;
    font-weight: 700;
    color: #667eea;
    transition: color 0.3s ease;
}

.quick-unit {
    font-size: 11px;
    font-weight: 600;
    color: #999;
    transition: color 0.3s ease;
}

.quick-btn:hover .quick-number {
    color: #764ba2;
}

/* 計算結果卡片 */
.calc-summary-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);
    color: #ffffff;
}

.summary-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.summary-icon {
    font-size: 24px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.summary-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
}

.summary-items {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
}

.summary-item.highlight {
    padding: 12px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    margin: -2px 0;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.item-label {
    font-size: 15px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    font-weight: 500;
}

.item-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
}

.item-value-large {
    font-size: 26px;
    font-weight: 800;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
}

/* 舊的響應式規則已移除，使用新的響應式設計 */

/* 底部操作區 */
.investment-form-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 16px 20px;
    background: var(--bg-white);
    border-top: 1px solid #f0f0f0;
    z-index: 2001;
    max-width: 100%;
    width: 100%;
    box-shadow: 0 -2px 12px var(--color-primary-rgba-10);
}

/* 響應式：底部操作區調整 */
@media (min-width: 576px) {
    .investment-form-footer {
        padding: 18px 24px;
    }
}

@media (min-width: 768px) {
    .investment-form-footer {
        padding: 20px 40px;
    }
}

@media (min-width: 992px) {
    .investment-form-footer {
        padding: 24px 60px;
    }
}

@media (min-width: 1200px) {
    .investment-form-footer {
        padding: 28px 80px;
    }
}

.form-submit-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    border: none;
    border-radius: 12px;
    color: var(--text-white);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-sizing: border-box;
    box-shadow: var(--shadow-primary-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    position: relative;
    overflow: hidden;
}

.form-submit-btn::before {
    content: '✨';
    font-size: 18px;
    animation: sparkle 2s ease-in-out infinite;
}

@keyframes sparkle {
    0%, 100% { 
        transform: scale(1) rotate(0deg);
        opacity: 0.7;
    }
    50% { 
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
    }
}

/* 響應式：提交按鈕大小調整 */
@media (min-width: 576px) {
    .form-submit-btn {
        padding: 16px;
        font-size: 16px;
    }
}

@media (min-width: 768px) {
    .form-submit-btn {
        padding: 18px;
        font-size: 17px;
        max-width: 600px;
        margin: 0 auto;
        display: block;
    }
}

@media (min-width: 992px) {
    .form-submit-btn {
        padding: 20px;
        font-size: 18px;
        max-width: 700px;
    }
}

.form-submit-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%);
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.form-submit-btn:active {
    transform: translateY(0);
    box-shadow: var(--shadow-primary);
}

/* 計算結果（隱藏但保留用於計算） */
.form-calc-results {
    display: none;
}

/* 頁面標題 */
.input-page-header {
    background: var(--bg-gradient);
    padding: 60px 20px 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    position: relative;
    box-shadow: var(--shadow-primary-lg);
    border-radius: 0 0 30px 30px;
}

.input-page-header::before {
    content: '✨';
    position: absolute;
    top: 20px;
    right: 60px;
    font-size: 20px;
    animation: sparkle 2s ease-in-out infinite;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.input-page-header::after {
    content: '💕';
    position: absolute;
    top: 20px;
    right: 100px;
    font-size: 18px;
    animation: sparkle 2s ease-in-out infinite 0.5s;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

@keyframes sparkle {
    0%, 100% { 
        transform: scale(1) rotate(0deg);
        opacity: 0.7;
    }
    50% { 
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
    }
}

.input-page-title {
    font-size: 26px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    flex: 1;
    text-align: center;
    
    letter-spacing: 0.5px;
}

/* 股票選擇卡片 */
.stock-select-card {
    margin: 20px;
    background: var(--bg-gradient);
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 6px 20px var(--color-primary-rgba-30), 0 0 0 3px rgba(255, 255, 255, 0.3) inset;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
}

.stock-select-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.stock-select-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 8px 24px var(--color-primary-rgba-40), 0 0 0 3px rgba(255, 255, 255, 0.4) inset;
}

.stock-select-card:active {
    transform: scale(0.96);
}

.stock-select-hint {
    font-size: 13px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
    margin-bottom: 12px;
    font-weight: 500;
}

.stock-select-content {
    display: flex;
    align-items: center;
    gap: 16px;
}

.stock-select-icon-wrapper {
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3) inset, 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.stock-select-card:hover .stock-select-icon-wrapper {
    transform: rotate(5deg) scale(1.1);
    background: rgba(255, 255, 255, 0.5);
}

.input-stock-icon {
    font-size: 32px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.stock-select-info {
    flex: 1;
}

.input-stock-name {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
    margin-bottom: 4px;
}

.input-stock-code {
    font-size: 14px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
}

.stock-select-arrow {
    font-size: 16px;
    color: var(--text-secondary);
    text-shadow: var(--text-shadow-soft);
}

.investment-back-btn {
    background: var(--bg-gradient-light);
    border: 2px solid var(--color-primary);
    color: var(--color-primary);
    border-radius: 25px;
    z-index: 10;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 4px 12px var(--color-primary-rgba-20);
    display: flex;
    align-items: center;
    gap: 6px;
    position: absolute;
    left: 16px;
    top: 16px;
}

.investment-back-btn::before {
    content: '👈';
    font-size: 16px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.investment-back-btn:hover {
    background: var(--bg-white);
    transform: translateX(-4px) scale(1.05);
    box-shadow: 0 6px 16px var(--color-primary-rgba-30);
}

.investment-back-btn:active {
    transform: translateX(-2px) scale(0.95);
}

/* 輸入主區域 */
.input-main-area {
    flex: 1;
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* 輸入欄位卡片 */
.input-field-card {
    background: linear-gradient(135deg, #ffffff 0%, #fff9fc 100%);
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 4px 16px var(--color-primary-rgba-15), 0 0 0 2px rgba(255, 182, 217, 0.2) inset;
    display: flex;
    flex-direction: column;
    gap: 16px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.input-field-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 182, 217, 0.1), transparent);
    transition: left 0.5s ease;
}

.input-field-card:focus-within::before {
    left: 100%;
}

.input-field-card:focus-within {
    box-shadow: 0 6px 20px var(--color-primary-rgba-25), 0 0 0 3px rgba(255, 182, 217, 0.3) inset;
    transform: translateY(-2px);
}

.input-field-label {
    font-size: 15px;
    color: var(--color-primary);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
}

.input-field-label::before {
    content: '💖';
    font-size: 16px;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
}

.input-field-large {
    width: 100%;
    padding: 24px;
    border: 3px solid #ffd0e8;
    border-radius: 20px;
    font-size: 36px;
    font-weight: 700;
    color: var(--color-primary);
    background: linear-gradient(135deg, #ffffff 0%, #fff9fc 100%);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-sizing: border-box;
    text-align: right;
}

.input-field-large:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--color-primary) 15%, transparent), 0 4px 12px color-mix(in srgb, var(--color-primary) 20%, transparent);
    transform: scale(1.02);
    background: var(--bg-white);
}

.input-field-large::placeholder {
    color: #ccc;
    font-weight: 400;
}

.input-display-value {
    font-size: 16px;
    color: #999;
    text-align: right;
    font-weight: 500;
}

.calc-instruction {
    text-align: center;
    padding: 12px;
    background: var(--bg-gradient-light);
    border-radius: 12px;
    border: 1px dashed var(--color-primary-lighter);
}

.instruction-text {
    font-size: 14px;
    color: var(--color-primary);
    font-weight: 600;
}

.calc-input-section {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 20px;
}

.calc-input-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.calc-input {
    width: 100%;
    padding: 16px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 20px;
    font-weight: 600;
    color: #333;
    background: var(--bg-white);
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.calc-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 10%, transparent);
}

.calc-input::placeholder {
    color: #ccc;
    font-weight: 400;
}

.calc-display-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 16px;
    background: #f9f9f9;
    border-radius: 12px;
    margin-top: 12px;
}

.calc-display-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
}

.calc-value-display {
    font-size: 18px;
    font-weight: 600;
    color: #666;
}

.calc-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: var(--bg-white);
    border-radius: 12px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-10);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.calc-row:hover {
    border-color: #ff9ec7;
    box-shadow: 0 4px 12px var(--color-primary-rgba-15);
}

.calc-label {
    font-size: 14px;
    color: #999;
    font-weight: 500;
}

.calc-value {
    font-size: 28px;
    font-weight: 700;
    color: #333;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
    min-width: 120px;
    text-align: right;
}

.calc-value:hover {
    opacity: 0.7;
}

.calc-value.active {
    color: var(--color-primary);
    transform: scale(1.05);
}

.calc-row.active {
    border-color: var(--color-primary);
    background: var(--bg-light-gradient);
}

.calc-result-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.calc-symbol {
    text-align: center;
    font-size: 32px;
    font-weight: 700;
    color: var(--color-primary-lighter);
}

.calc-equals {
    text-align: center;
    font-size: 24px;
    font-weight: 700;
    color: var(--text-tertiary);
}

.calc-result {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-gradient-light);
    border-radius: 12px;
    border: 2px solid var(--color-primary);
    box-shadow: var(--shadow-primary);
}

.calc-total {
    font-size: 32px;
    font-weight: 700;
    color: var(--color-primary);
}

.calc-fee-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-lighter);
    border-radius: 12px;
    font-size: 14px;
}

.calc-final {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-gradient);
    border-radius: 12px;
    margin-top: 8px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-25);
}

.calc-final-amount {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow-strong);
}

.quick-actions {
    padding: 0 20px 16px;
}

.quick-actions-label {
    font-size: 12px;
    color: #999;
    margin-bottom: 8px;
    font-weight: 600;
}

.quick-actions-buttons {
    display: flex;
    gap: 12px;
}

/* 投資輸入頁面確認按鈕 */
.investment-save-container {
    padding: 20px;
    display: flex;
    justify-content: center;
}

.investment-save-btn {
    width: 100%;
    max-width: 300px;
    padding: 16px 32px;
    border: none;
    border-radius: 16px;
    background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
    color: #fff;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.investment-save-btn:hover {
    background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);
    box-shadow: 0 6px 16px rgba(76, 175, 80, 0.5);
    transform: translateY(-2px);
}

.investment-save-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

.quick-btn {
    flex: 1;
    padding: 12px;
    border: 2px solid var(--color-primary-lighter);
    border-radius: var(--radius-md);
    background: var(--bg-white);
    color: var(--color-primary);
    font-size: var(--font-md);
    font-weight: var(--font-semibold);
    cursor: pointer;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
}

.quick-btn:hover {
    background: var(--bg-gradient-light);
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.quick-btn:active {
    background: var(--bg-gradient);
    color: var(--text-white);
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}


/* 確認按鈕已整合到鍵盤中，使用 .key-btn.save-btn 樣式 */

/* 股息畫面 */
.dividend-page {
    padding: 20px;
    padding-bottom: 100px;
}

/* 股息月曆 */
.dividend-calendar-section {
    margin-top: 32px;
    margin-bottom: 32px;
}

.dividend-calendar-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 16px;
}

.dividend-calendar-item {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.dividend-calendar-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.dividend-calendar-item.current-month {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.1) 0%, rgba(255, 158, 199, 0.05) 100%);
    box-shadow: 0 4px 12px var(--color-primary-rgba-20);
}

.dividend-calendar-item.has-dividend {
    border-color: #ffb74d;
    background: linear-gradient(135deg, rgba(255, 183, 77, 0.1) 0%, rgba(255, 183, 77, 0.05) 100%);
}

.dividend-calendar-month {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.dividend-calendar-amount {
    font-size: 18px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 6px;
}

.dividend-calendar-item.has-dividend .dividend-calendar-amount {
    color: #ff9800;
}

.dividend-calendar-count {
    font-size: 11px;
    color: var(--text-secondary);
    font-weight: 600;
}

.dividend-calendar-count.empty {
    color: var(--text-tertiary);
    opacity: 0.6;
}

/* 年股息統計 */
.dividend-year-stats-section {
    margin-top: 32px;
    margin-bottom: 32px;
}

.dividend-year-stats-container {
    margin-top: 16px;
}

.dividend-year-stat-item {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 18px;
    margin-bottom: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.dividend-year-stat-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: var(--color-primary-lighter);
}

.dividend-year-stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.dividend-year-stat-year {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
}

.dividend-year-stat-amount {
    font-size: 20px;
    font-weight: 800;
    color: #ff9800;
}

.dividend-year-stat-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 12px;
    color: var(--text-secondary);
}

.dividend-year-stat-count {
    font-weight: 600;
}

.dividend-year-stat-percentage {
    font-weight: 600;
    color: var(--color-primary);
}

.dividend-year-stat-bar {
    height: 8px;
    background: var(--bg-gradient-light);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
}

.dividend-year-stat-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #ffb74d 0%, #ff9800 100%);
    border-radius: 4px;
    transition: width 0.5s ease;
    box-shadow: 0 2px 4px rgba(255, 183, 77, 0.3);
}

.dividend-year-stat-total {
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.15) 0%, rgba(255, 158, 199, 0.1) 100%);
    border-radius: 16px;
    padding: 20px;
    margin-top: 16px;
    text-align: center;
    border: 2px solid var(--color-primary-lighter);
    box-shadow: 0 4px 12px var(--color-primary-rgba-15);
}

.dividend-year-stat-total-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dividend-year-stat-total-amount {
    font-size: 28px;
    font-weight: 800;
    color: var(--color-primary);
    margin-bottom: 6px;
}

.dividend-year-stat-total-count {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 600;
}

.dividend-year-stats-empty {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-tertiary);
}

@media (max-width: 480px) {
    .dividend-calendar-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }
    
    .dividend-calendar-item {
        padding: 14px;
    }
    
    .dividend-calendar-amount {
        font-size: 16px;
    }
    
    .dividend-year-stat-item {
        padding: 16px;
    }
    
    .dividend-year-stat-amount {
        font-size: 18px;
    }
    
    .dividend-year-stat-total-amount {
        font-size: 24px;
    }
}

.dividend-header {
    text-align: center;
    margin-bottom: 32px;
}

.dividend-icon {
    font-size: 64px;
    margin-bottom: 12px;
    animation: float 3s ease-in-out infinite;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', sans-serif;
    display: inline-block;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.dividend-title {
    font-size: 24px;
    font-weight: 700;
    color: #333;
    margin: 0;
}

.dividend-summary-large {
    text-align: center;
    padding: 32px;
    background: var(--bg-gradient-light);
    border-radius: 12px;
    margin-bottom: 24px;
    box-shadow: var(--shadow-primary);
}

.dividend-label {
    font-size: 14px;
    color: var(--color-primary);
    margin-bottom: 8px;
    font-weight: 500;
}

.dividend-amount-large {
    font-size: 48px;
    font-weight: 700;
    color: var(--color-primary);
}

.dividend-month-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-white);
    border-radius: 12px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-10);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.dividend-month-summary:hover {
    border-color: #ff9ec7;
    box-shadow: 0 4px 12px var(--color-primary-rgba-15);
}

.dividend-amount {
    font-size: 24px;
    font-weight: 700;
    color: var(--color-primary);
}

.reinvest-toggle-container {
    padding: 20px;
    background: var(--bg-white);
    border-radius: 12px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px var(--color-primary-rgba-10);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.reinvest-toggle-container:hover {
    border-color: #ff9ec7;
    box-shadow: 0 4px 12px var(--color-primary-rgba-15);
}

.reinvest-toggle-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 16px;
    font-weight: 500;
    color: #333;
    cursor: pointer;
}

.reinvest-toggle {
    display: none;
}

.toggle-slider {
    width: 48px;
    height: 28px;
    background: #ccc;
    border-radius: 14px;
    position: relative;
    transition: all 0.3s ease;
}

.toggle-slider::after {
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    background: var(--bg-white);
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.reinvest-toggle:checked + .toggle-slider {
    background: var(--bg-gradient);
}

.reinvest-toggle:checked + .toggle-slider::after {
    left: 22px;
}

/* 表單切換開關樣式 */
.form-toggle-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
}

.form-toggle {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
}

.form-toggle input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

.form-toggle .toggle-slider {
    position: relative;
    width: 50px;
    height: 28px;
    background: var(--bg-toggle);
    border-radius: 28px;
    transition: all 0.3s ease;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.form-toggle .toggle-slider::after {
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    background: var(--bg-white);
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.form-toggle input[type="checkbox"]:checked + .toggle-slider {
    background: var(--bg-gradient);
}

.form-toggle input[type="checkbox"]:checked + .toggle-slider::after {
    left: 24px;
}

.toggle-label {
    font-size: 14px;
    color: #333;
    font-weight: 500;
    user-select: none;
}

.dividend-records-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* 股息空狀態 */
.dividend-empty-state {
    text-align: center;
    padding: 60px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 300px;
}

.dividend-empty-icon {
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dividend-empty-icon img {
    width: 83px;
    height: 83px;
    opacity: 0.5;
    object-fit: contain;
}

.dividend-empty-text {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-secondary);
}

.dividend-empty-hint {
    font-size: 14px;
    color: var(--text-tertiary);
    margin-bottom: 24px;
}

/* 股息新增按鈕容器 */
.dividend-add-btn-container {
    margin-bottom: 16px;
    display: flex;
    justify-content: center;
    width: 100%;
}

/* 股息快捷新增按鈕 */
.dividend-quick-add-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 28px;
    background: var(--bg-gradient);
    color: var(--text-white);
    border: none;
    border-radius: 16px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-primary-lg);
    position: relative;
    overflow: hidden;
    z-index: 1;
    max-width: 280px;
    width: 100%;
}

.dividend-quick-add-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: all 0.6s;
    z-index: 0;
}

.dividend-quick-add-btn:hover::before {
    left: 100%;
}

.dividend-quick-add-btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px var(--color-primary-rgba-30);
}

.dividend-quick-add-btn:active {
    transform: translateY(-1px) scale(0.98);
    box-shadow: var(--shadow-primary);
}

.dividend-quick-add-icon {
    font-size: 20px;
    position: relative;
    z-index: 1;
    transition: transform 0.3s ease;
}

.dividend-quick-add-btn:hover .dividend-quick-add-icon {
    transform: rotate(90deg) scale(1.1);
}

.dividend-quick-add-text {
    position: relative;
    z-index: 1;
}

/* 響應式調整：股息空狀態 */
@media (max-width: 480px) {
    .dividend-empty-state {
        padding: 40px 16px;
        min-height: 250px;
    }
    
    .dividend-empty-icon {
        margin-bottom: 12px;
    }
    
    .dividend-empty-icon img {
        width: 62px;
        height: 62px;
    }
    
    .dividend-empty-text {
        font-size: 16px;
    }
    
    .dividend-empty-hint {
        font-size: 13px;
        margin-bottom: 20px;
    }
    
    .dividend-add-btn-container {
        margin-bottom: 12px;
    }
    
    .dividend-quick-add-btn {
        width: 100%;
        max-width: 100%;
        padding: 12px 24px;
        font-size: 15px;
        gap: 8px;
    }
    
    .dividend-quick-add-icon {
        font-size: 18px;
    }
}

/* 操作按鈕區（已隱藏） */
.investment-actions {
    position: fixed;
    bottom: 91px; /* 放在底部導覽欄上方（往上移動30%） */
    left: 0;
    right: 0;
    display: none !important; /* 隱藏操作按鈕 */
    gap: 8px;
    padding: 12px 16px;
    background: var(--bg-white);
    border-top: 2px solid var(--border-light);
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
    z-index: 3100; /* 確保在底部導覽欄上方 */
    width: 100%;
    box-sizing: border-box;
    flex-wrap: nowrap; /* 強制不換行 */
}

/* 確保在個股詳情頁面中也隱藏投資操作按鈕 */
.stock-detail-page ~ .investment-actions,
.stock-detail-page .investment-actions,
#stockDetailPage ~ .investment-actions {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: hidden !important;
}

/* 響應式：投資操作按鈕區調整 */
@media (max-width: 480px) {
    .investment-actions {
        padding: 10px 8px;
        gap: 6px;
        bottom: 98px; /* 放在底部導覽欄上方（往上移動30%） */
        flex-wrap: nowrap !important; /* 強制不換行 */
    }
    
    .action-btn {
        min-width: 0; /* 移除最小寬度限制 */
        padding: 12px 6px;
        font-size: 13px;
        flex: 1 1 0; /* 平均分配空間 */
    }
    
    /* 確保所有按鈕都顯示 */
    .dividend-btn,
    .dca-btn {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .dividend-btn {
        background: var(--bg-gradient) !important;
        box-shadow: var(--shadow-primary) !important;
    }
    
    .dca-btn {
        background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%) !important;
        box-shadow: var(--shadow-primary) !important;
    }
}

@media (min-width: 576px) {
    .investment-actions {
        padding: 14px 24px;
        gap: 14px;
    }
    
    .action-btn {
        min-width: auto;
        padding: 16px;
        font-size: 16px;
    }
}

@media (min-width: 768px) {
    .investment-actions {
        padding: 16px 40px;
        gap: 16px;
        bottom: 104px; /* 放在底部導覽欄上方（往上移動30%） */
    }
}

@media (min-width: 992px) {
    .investment-actions {
        padding: 18px 60px;
        gap: 18px;
        bottom: 111px; /* 放在底部導覽欄上方（往上移動30%） */
    }
}

@media (min-width: 1200px) {
    .investment-actions {
        padding: 20px 80px;
        gap: 20px;
        bottom: 117px; /* 放在底部導覽欄上方（往上移動30%） */
    }
}

/* 當投資輸入頁面顯示時，隱藏操作按鈕 */
.investment-input-page[style*="flex"] ~ .investment-actions {
    display: none !important;
}

.action-btn {
    flex: 1 1 0; /* 平均分配空間，不換行 */
    min-width: 0; /* 移除最小寬度限制 */
    padding: 14px 12px;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #ffffff;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    user-select: none;
    -webkit-user-select: none;
}

/* 可拖動的按鈕 */
.action-btn.draggable {
    cursor: move;
    cursor: grab;
}

.action-btn.draggable:active {
    cursor: grabbing;
}

.action-btn.dragging {
    opacity: 0.5;
    transform: scale(0.95);
}

.action-btn.drag-over {
    border: 2px dashed rgba(255, 255, 255, 0.8);
    background: rgba(255, 255, 255, 0.2) !important;
}

.buy-btn {
    background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
}

.sell-btn {
    background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
}

.dividend-btn {
    background: var(--bg-gradient) !important;
    box-shadow: var(--shadow-primary) !important;
    color: var(--text-white) !important;
}

.dividend-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%) !important;
    box-shadow: var(--shadow-primary-lg) !important;
}

.dividend-btn:active {
    transform: scale(0.95) !important;
    opacity: 0.9 !important;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
}

.action-btn:active {
    transform: scale(0.95);
    opacity: 0.9;
}

/* 成功動畫 */
@keyframes celebrate {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-5deg); }
    75% { transform: scale(1.1) rotate(5deg); }
}

.celebrate-animation {
    animation: celebrate 0.6s ease;
}

/* 慶祝動畫 */
@keyframes confetti {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
}

.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background: var(--color-primary);
    animation: confetti 2s ease-out forwards;
    pointer-events: none;
    z-index: 10000;
}

/* ========== 定期定額執行對話框 ========== */
.dca-execute-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}

/* DCA 執行對話框：專用版面（避免被通用 modal 規則影響造成留白） */
.dca-execute-modal .modal-content {
    padding: 0 !important;
    overflow: hidden !important;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    max-height: 90vh;
}

.dca-execute-modal .modal-header {
    padding: 16px 18px;
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-white);
}

.dca-execute-modal .modal-title {
    color: var(--text-primary);
    text-align: center;
    flex: 1;
}

.dca-execute-modal .modal-close-btn {
    color: var(--text-tertiary);
    border-radius: 10px;
}

.dca-execute-modal .modal-body {
    padding: 16px 18px 18px;
    background: var(--bg-white);
    flex: 1 1 auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.dca-execute-modal .modal-stock-info {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 10px;
    padding: 12px 14px;
    border-radius: 14px;
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.10) 0%, rgba(255, 105, 180, 0.05) 60%, rgba(102, 126, 234, 0.06) 100%);
    border: 1px solid rgba(255, 105, 180, 0.16);
    margin-bottom: 10px;
}

.dca-execute-modal .modal-stock-name {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.dca-execute-modal .modal-stock-code {
    font-size: 13px;
    font-weight: 800;
    color: var(--text-tertiary);
    flex-shrink: 0;
}

.dca-execute-modal .modal-reference-price {
    margin: 10px 0 12px;
    padding: 10px 12px;
    border-radius: 12px;
    background: linear-gradient(135deg, rgba(255, 152, 0, 0.10) 0%, rgba(255, 152, 0, 0.05) 100%);
    border: 1px solid rgba(255, 152, 0, 0.18);
    color: var(--text-secondary);
    font-size: 13px;
}

.dca-execute-modal .modal-preview {
    margin-top: 12px;
    padding: 12px;
    border-radius: 14px;
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.08) 0%, rgba(255, 105, 180, 0.04) 60%, rgba(102, 126, 234, 0.05) 100%);
    border: 1px solid rgba(255, 105, 180, 0.14);
}

.dca-execute-modal .preview-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

.dca-execute-modal .preview-item:last-child {
    border-bottom: none;
}

.dca-execute-modal .preview-label {
    font-size: 13px;
    color: var(--text-secondary);
}

.dca-execute-modal .preview-value {
    font-size: 14px;
    font-weight: 800;
    color: var(--text-primary);
}

.dca-execute-modal .preview-item.highlight .preview-value {
    color: var(--color-primary);
}

.dca-execute-modal .modal-footer {
    padding: 14px 18px 18px;
    display: flex;
    gap: 12px;
    background: var(--bg-white);
    border-top: 1px solid var(--border-light);
    flex: 0 0 auto;
}

.dca-execute-modal .modal-btn {
    flex: 1;
    padding: 12px 14px;
    border-radius: 14px;
    font-size: 15px;
    font-weight: 800;
    min-height: 48px;
    cursor: pointer;
}

.dca-execute-modal .modal-btn.cancel-btn {
    border: 1px solid rgba(0, 0, 0, 0.10);
    background: var(--bg-white);
    color: var(--text-primary);
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.08);
}

.dca-execute-modal .modal-btn.confirm-btn {
    border: none;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: #ffffff;
    box-shadow: 0 14px 30px var(--color-primary-rgba-28);
}

@media (max-width: 480px) {
    .dca-execute-modal {
        align-items: flex-end;
    }

    .dca-execute-modal .modal-content {
        width: 100%;
        max-width: 100%;
        border-radius: 18px 18px 0 0;
        max-height: 92vh;
    }

    .dca-execute-modal .modal-footer {
        padding-bottom: calc(18px + env(safe-area-inset-bottom));
    }

    .dca-execute-modal .modal-btn {
        min-height: 52px;
    }
}

.modal-overlay {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    align-items: center;
    justify-content: center;
    padding: 20px;
    z-index: 10000;
}

.modal-content {
    position: relative;
    background: var(--bg-white);
    border-radius: 20px;
    width: 90%;
    max-width: 400px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    z-index: 10001;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #f0f0f0;
}

.modal-title {
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.modal-close-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: #999;
    cursor: pointer;
    padding: 4px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.modal-close-btn:hover {
    background: var(--bg-soft);
    color: #333;
}

.app-modal-root {
    position: fixed;
    inset: 0;
    z-index: 10020;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 18px;
}

.app-modal-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}

.app-modal {
    position: relative;
    width: min(92vw, 640px);
    background: linear-gradient(180deg, color-mix(in srgb, var(--bg-white) 96%, transparent) 0%, color-mix(in srgb, var(--bg-white) 90%, transparent) 100%);
    border-radius: 18px;
    box-shadow: 0 24px 70px rgba(15, 23, 42, 0.28);
    overflow: hidden;
    z-index: 10021;
}

.app-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 18px;
    background: linear-gradient(135deg, rgba(255, 182, 217, 0.25) 0%, rgba(0, 169, 255, 0.12) 100%);
    border-bottom: 1px solid var(--border-light);
}

.app-modal-title {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
    letter-spacing: 0.02em;
}

.app-modal-close {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, 0.08);
    background: rgba(255, 255, 255, 0.75);
    color: rgba(15, 23, 42, 0.7);
    cursor: pointer;
    font-size: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.18s ease, background 0.18s ease;
}

.app-modal-close:hover {
    background: color-mix(in srgb, var(--bg-light) 70%, transparent);
}

.app-modal-close:active {
    transform: scale(0.96);
}

.app-modal-body {
    padding: 16px 18px;
    max-height: min(70vh, 520px);
    overflow: auto;
}

.app-modal-footer {
    padding: 14px 18px 16px;
    background: color-mix(in srgb, var(--bg-light) 72%, transparent);
    border-top: 1px solid var(--border-light);
}

.app-modal-footer-inner {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.app-modal-footer-inner--grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    width: 100%;
}

.app-modal-footer-inner--grid .app-modal-btn {
    width: 100%;
    min-height: 48px;
    border-radius: 999px;
    font-weight: 800;
}

.app-modal-btn {
    border: 1px solid var(--border-light);
    background: color-mix(in srgb, var(--bg-white) 92%, transparent);
    border-radius: 12px;
    padding: 10px 14px;
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
    cursor: pointer;
    transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
}

.app-modal-btn:active {
    transform: scale(0.98);
}

.app-modal-btn--primary {
    border: none;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-white);
    box-shadow: 0 10px 24px var(--color-primary-rgba-22);
}

.app-modal-pre {
    margin: 0;
    white-space: pre-wrap;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    font-size: 14px;
    line-height: 1.55;
    color: var(--text-primary);
}

.app-modal-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.app-modal-label {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-secondary);
}

.app-modal-input {
    width: 100%;
    padding: 12px 12px;
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.12);
    font-size: 15px;
    font-weight: 700;
    outline: none;
}

.app-modal-input:focus {
    border-color: var(--color-primary-rgba-55);
    box-shadow: 0 0 0 4px var(--color-primary-rgba-16);
}

/* ========== 問價彈窗（查價連結 + 輸入現價） ========== */
.price-query-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10006;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.price-query-modal__content {
    width: 92%;
    max-width: 480px;
    border-radius: 22px;
    overflow: hidden;
    box-shadow: 0 18px 60px rgba(0, 0, 0, 0.25);
}

.price-query-modal__body {
    padding: 18px 22px 22px;
}

.price-query-modal__hint {
    color: var(--text-secondary);
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 14px;
}

.price-query-modal__links {
    display: grid;
    gap: 10px;
    margin-bottom: 16px;
}

.price-query-modal__action {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #fff;
    border-radius: var(--radius-lg);
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
    transition: background var(--transition-fast), border-color var(--transition-fast);
}

.price-query-modal__action:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.6);
}

.price-query-modal__link {
    display: block;
    padding: 12px 12px;
    border-radius: 16px;
    border: 1px solid rgba(0, 0, 0, 0.06);
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.10) 0%, rgba(255, 105, 180, 0.04) 60%, rgba(102, 126, 234, 0.06) 100%);
    color: #1a73e8;
    text-decoration: none;
    font-size: 13px;
    line-height: 1.4;
    word-break: break-all;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.price-query-modal__link:hover {
    transform: translateY(-1px);
    border-color: var(--color-primary-rgba-28);
    box-shadow: 0 10px 24px var(--color-primary-rgba-16);
}

.price-query-modal__label {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.price-query-modal__input {
    width: 100%;
    padding: 12px 14px;
    border-radius: 16px;
    border: 1px solid var(--color-primary-rgba-25);
    background: #fff;
    font-size: 16px;
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.price-query-modal__input:focus {
    border-color: var(--color-primary-rgba-60);
    box-shadow: 0 0 0 3px var(--color-primary-rgba-18);
}

.price-query-modal__footer {
    display: flex;
    gap: 12px;
    margin-top: 16px;
}

.price-query-modal__btn {
flex: 1;
padding: 12px;
border-radius: 16px;
font-size: 16px;
font-weight: 800;
cursor: pointer;
transition: transform 0.15s ease, box-shadow 0.2s ease;
}

.price-query-modal__btn:active {
transform: scale(0.99);
}

.price-query-modal__btn--cancel {
    border: 1px solid rgba(0, 0, 0, 0.08);
    background: var(--bg-white);
    color: var(--text-primary);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.06);
}

.price-query-modal__btn--cancel:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.10);
}

.price-query-modal__btn--ok {
    border: none;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: #ffffff;
    box-shadow: 0 12px 28px var(--color-primary-rgba-32);
}

.price-query-modal__btn--ok:hover {
    box-shadow: 0 16px 34px var(--color-primary-rgba-42);
}

/* ========== 帳戶選擇對話框 ========== */
.account-select-modal,
.account-manage-modal,
.account-detail-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10003;
}

.account-modal-content {
    max-height: 80vh;
}

.account-list {
    max-height: 400px;
    overflow-y: auto;
    margin-bottom: 16px;
}

.account-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: var(--bg-white);
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.account-item:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-lighter);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--color-primary-rgba-15);
}

.account-item.selected {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, var(--bg-light-gradient) 0%, var(--bg-light-gradient) 100%);
    box-shadow: 0 2px 8px var(--color-primary-rgba-20);
}

.account-item-icon {
    font-size: 40px;
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-gradient-light);
    border-radius: 14px;
    flex-shrink: 0;
}

.account-item-info {
    flex: 1;
    min-width: 0;
}

.account-item-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.account-item-currency {
    font-size: 13px;
    color: #999;
}

.account-item-balance {
    text-align: right;
}

.account-balance-value {
    font-size: 15px;
    font-weight: 600;
    color: #333;
}

.account-detail-btn,
.account-edit-btn {
    background: none;
    border: none;
    font-size: 20px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
    position: relative;
    z-index: 10;
    pointer-events: auto;
}

.account-detail-btn:hover,
.account-edit-btn:hover {
    background: var(--bg-soft);
}

.account-detail-btn:active,
.account-edit-btn:active {
    background: var(--bg-toggle);
    transform: scale(0.95);
}

.account-add-btn {
    width: 100%;
    padding: 14px 24px;
    border: 2px dashed var(--color-primary);
    border-radius: 12px;
    background: var(--bg-gradient-light);
    color: var(--color-primary);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.account-add-btn:active {
    background: var(--bg-gradient);
    color: var(--text-white);
    border-color: var(--color-primary);
    transform: scale(0.98);
}

.account-manage-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 24px;
}

.modal-back-btn {
    background: none;
    border: none;
    font-size: 18px;
    color: #333;
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
    transition: all 0.2s ease;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-back-btn:hover {
    background: var(--bg-soft);
}

.modal-header {
    display: flex;
    align-items: center;
    gap: 12px;
}

.modal-header .modal-title {
    flex: 1;
    text-align: center;
    margin: 0;
}

/* ========== 定期定額管理頁面 ========== */
.dca-management-page,
.dca-setup-page {
    width: 100%;
    min-height: calc(100vh - 60px);
    padding-bottom: 80px;
    background: var(--bg-gradient-light);
}

.dca-page-header,
.dca-setup-header {
    padding: 16px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 20;
    box-shadow: 0 8px 22px rgba(0, 0, 0, 0.06);
}

.dca-back-btn,
.dca-setup-back-btn {
    background: none;
    border: none;
    font-size: 18px;
    color: var(--text-primary);
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
    transition: all 0.2s ease;
}

.dca-back-btn:hover,
.dca-setup-back-btn:hover {
    background: var(--bg-soft);
}

.dca-page-title,
.dca-setup-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    text-align: center;
}

.dca-add-btn {
    background: var(--bg-gradient);
    border: none;
    color: var(--text-white);
    font-size: 20px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px var(--color-primary-rgba-30);
}

.dca-add-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 22px var(--color-primary-rgba-28);
}

.dca-add-btn:active {
    transform: scale(0.95);
}

.dca-list-container {
    padding: 16px;
    max-width: 760px;
    margin: 0 auto;
}

.dca-item-card {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(0, 0, 0, 0.06);
    transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.dca-item-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 16px 34px rgba(0, 0, 0, 0.08);
}

/* 定期定額：可愛版進度條 + 成就徽章 */
.dca-progress {
    margin-top: 14px;
    padding: 12px 12px 10px;
    border-radius: 14px;
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.10) 0%, rgba(255, 105, 180, 0.05) 55%, rgba(102, 126, 234, 0.06) 100%);
    border: 1px solid rgba(255, 105, 180, 0.16);
}

.dca-progress-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 8px;
}

.dca-progress-text {
    font-size: 12px;
    font-weight: 800;
    color: var(--text-primary, #6b4b5a);
}

:root[data-theme="star"] .dca-progress-text,
:root[data-theme="firefly"] .dca-progress-text,
:root[data-theme="neon"] .dca-progress-text,
:root[data-theme="galaxy"] .dca-progress-text,
:root[data-theme="mono"] .dca-progress-text,
:root[data-theme="meteor"] .dca-progress-text {
    color: #ffffff;
}

.dca-progress-bar {
    width: 100%;
    height: 12px;
    background: var(--color-primary-rgba-12);
    border-radius: 999px;
    overflow: hidden;
    position: relative;
}

.dca-progress-fill {
    height: 100%;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-lighter) 45%, var(--color-accent) 100%);
    box-shadow: 0 2px 10px var(--color-primary-rgba-35);
    transition: width 0.4s ease;
    position: relative;
}

.dca-progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.35), transparent);
    transform: translateX(-100%);
    animation: dcaProgressShine 1.8s ease-in-out infinite;
}

@keyframes dcaProgressShine {
    0% { transform: translateX(-100%); }
    60% { transform: translateX(100%); }
    100% { transform: translateX(100%); }
}

.dca-achievement-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 999px;
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    border: 1px solid rgba(255, 215, 0, 0.45);
    box-shadow: 0 8px 18px rgba(255, 215, 0, 0.25);
    font-size: 16px;
}

.dca-item-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.dca-item-icon {
    font-size: 32px;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-gradient-light);
    border-radius: 12px;
}

.dca-item-info {
    flex: 1;
}

.dca-item-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.dca-item-code {
    font-size: 13px;
    color: var(--text-tertiary);
}

.dca-item-status {
    padding: 6px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.dca-item-status.active {
    background: #e8f5e9;
    color: #4caf50;
}

.dca-item-status.inactive {
    background: var(--bg-soft);
    color: #999;
}

.dca-item-body {
    margin-bottom: 12px;
}

.dca-item-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #f5f5f5;
}

.dca-item-row:last-child {
    border-bottom: none;
}

.dca-item-label {
    font-size: 14px;
    color: var(--text-secondary);
}

.dca-item-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.dca-item-actions {
    display: flex;
    gap: 8px;
    margin-top: 12px;
}

.dca-edit-btn,
.dca-execute-btn {
    flex: 1;
    padding: 10px 16px;
    border: 2px solid var(--color-primary);
    border-radius: var(--radius-md);
    background: var(--bg-white);
    color: var(--color-primary);
    font-size: var(--font-md);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

.dca-edit-btn:hover {
    background: var(--bg-gradient-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.dca-edit-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-sm);
}

.dca-execute-btn {
    background: var(--bg-gradient);
    color: var(--text-white);
    border-color: var(--color-primary);
    box-shadow: var(--shadow-primary);
}

.dca-execute-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-primary-lg);
}

.dca-execute-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-primary);
}

.dca-setup-form {
    padding: 16px;
    max-width: 760px;
    margin: 0 auto;
}

.dca-setup-form {
    background: var(--bg-white);
    border-radius: 18px;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(0, 0, 0, 0.06);
    margin-top: 16px;
}

.dca-setup-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 24px;
}

@media (max-width: 576px) {
    .dca-page-header,
    .dca-setup-header {
        padding: 12px;
    }

    .dca-page-title,
    .dca-setup-title {
        font-size: 18px;
    }

    .dca-list-container {
        padding: 12px;
    }

    .dca-item-card {
        padding: 14px;
        border-radius: 14px;
    }

    .dca-item-actions {
        flex-direction: column;
    }

    .dca-edit-btn,
    .dca-execute-btn {
        min-height: 48px;
    }

    .dca-setup-form {
        margin-top: 12px;
        padding: 14px;
        border-radius: 16px;
    }
}

.form-delete-btn {
    padding: 12px 24px;
    border: 2px solid var(--color-error);
    border-radius: var(--radius-md);
    background: var(--bg-white);
    color: var(--color-error);
    font-size: var(--font-base);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

.form-delete-btn:hover {
    background: var(--color-error-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.form-delete-btn:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-sm);
}

.action-btn.dca-btn {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%) !important;
    color: var(--text-white) !important;
    border: none !important;
    box-shadow: var(--shadow-primary) !important;
}

.action-btn.dca-btn:hover {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%) !important;
    box-shadow: var(--shadow-primary-lg) !important;
}

.action-btn.dca-btn:active {
    background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-primary) 100%) !important;
    transform: scale(0.95) !important;
    opacity: 0.9 !important;
}

/* ========== 表情選擇對話框 ========== */
.emoji-select-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
}

.emoji-modal-content {
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
}

.emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 8px;
    padding: 16px;
}

/* 快速圖標按鈕 */
.quick-icon-btn {
    width: 100%;
    aspect-ratio: 1;
    border: 2px solid var(--border-light);
    border-radius: 8px;
    background: var(--bg-white);
    font-size: 24px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    box-shadow: var(--shadow-sm);
}

.quick-icon-btn:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: scale(1.1);
    box-shadow: var(--shadow-primary);
}

.quick-icon-btn:active {
    transform: scale(1.05);
    box-shadow: var(--shadow-sm);
}

.emoji-item {
    width: 100%;
    aspect-ratio: 1;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg-white);
    font-size: 28px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    box-shadow: var(--shadow-sm);
}

.emoji-item:hover {
    border-color: var(--color-primary-light);
    background: var(--bg-gradient-light);
    transform: scale(1.1);
    box-shadow: var(--shadow-primary);
}

.emoji-item:active {
    transform: scale(0.95);
    box-shadow: var(--shadow-sm);
    border-color: var(--color-primary);
    background: var(--color-primary-light-rgba-10);
}

.image-emoji-item {
    padding: 4px;
}

.emoji-preview-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

.emoji-section {
    padding: 16px;
    border-top: 1px solid #f0f0f0;
}

.emoji-section-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 12px;
}

.image-emoji-grid {
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
}

.emoji-upload-btn {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border: 2px dashed #ffb6d9;
    border-radius: 12px;
    background: var(--bg-lighter);
    color: var(--color-primary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.emoji-upload-btn:hover {
    background: #ffb6d9;
    color: #ffffff;
    border-color: #ff69b4;
}

.emoji-btn-image {
    width: 24px;
    height: 24px;
    object-fit: contain;
    border-radius: 4px;
}

.transaction-emoji-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

/* 響應式：表情網格調整 */
@media (min-width: 576px) {
    .emoji-grid {
        grid-template-columns: repeat(10, 1fr);
    }
    
    .image-emoji-grid {
        grid-template-columns: repeat(8, 1fr);
    }
}

@media (min-width: 768px) {
    .emoji-grid {
        grid-template-columns: repeat(12, 1fr);
    }
    
    .image-emoji-grid {
        grid-template-columns: repeat(10, 1fr);
    }
}

/* ========== 帳戶詳情對話框 ========== */
.account-detail-section {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid #f0f0f0;
}

.account-detail-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.account-detail-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
}

.account-detail-icon {
    font-size: 64px;
    width: 96px;
    height: 96px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-gradient-light);
    border-radius: 20px;
}

.account-detail-name {
    font-size: 24px;
    font-weight: 600;
    color: #333;
}

.account-detail-icon-image {
    width: 96px;
    height: 96px;
    border-radius: 20px;
    object-fit: cover;
}

.account-detail-balance {
    text-align: center;
    padding: 20px;
    background: var(--bg-gradient-light);
    border-radius: 16px;
    margin-bottom: 20px;
}

.balance-label {
    font-size: 14px;
    color: #666;
    margin-bottom: 8px;
}

.balance-value {
    font-size: 32px;
    font-weight: 700;
    color: var(--color-primary);
}

.detail-section-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 2px solid #f0f0f0;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #f8f8f8;
}

.detail-item:last-child {
    border-bottom: none;
}

.detail-label {
    font-size: 14px;
    color: #666;
}

.detail-value {
    font-size: 14px;
    font-weight: 500;
    color: #333;
    text-align: right;
}

.detail-value.income {
    color: #4caf50;
}

.detail-value.expense {
    color: #ff4444;
}

.account-detail-actions {
    margin-top: 24px;
    padding-top: 20px;
    border-top: 2px solid #f0f0f0;
}

.account-detail-edit-btn {
    width: 100%;
    padding: 14px;
    border: 2px solid var(--color-primary-light);
    border-radius: 12px;
    background: var(--bg-gradient);
    color: var(--text-white);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.account-detail-edit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
}

.account-detail-edit-btn:active {
    transform: translateY(0);
}

/* ========== 帳戶圖片上傳 ========== */
.account-image-upload {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.account-image-preview {
    width: 160px;
    height: 160px;
    border-radius: 20px;
    border: 2px dashed #ffb6d9;
    background: var(--bg-lighter);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
}

.account-image-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 14px;
}

.account-image-placeholder {
    font-size: 48px;
    color: #ffb6d9;
}

.account-image-actions {
    display: flex;
    gap: 8px;
    width: 100%;
}

.account-image-upload-btn,
.account-image-remove-btn {
    flex: 1;
    padding: 10px 16px;
    border: 2px solid var(--color-primary-light);
    border-radius: 12px;
    background: var(--bg-gradient-light);
    color: var(--color-primary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.account-image-upload-btn:hover,
.account-image-remove-btn:hover {
    background: var(--bg-gradient);
    color: var(--text-white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-primary-rgba-30);
}

.account-image-upload-btn:active,
.account-image-remove-btn:active {
    transform: translateY(0);
}

.account-item-icon-image {
    width: 64px;
    height: 64px;
    border-radius: 14px;
    object-fit: cover;
    flex-shrink: 0;
}

/* ========== 圖片裁切對話框 ========== */
.image-crop-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10001;
}

.crop-modal-content {
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
}

.crop-container {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 0 auto 20px;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    overflow: hidden;
    background: #fafafa;
}

#cropCanvas {
    display: block;
    width: 100%;
    height: 100%;
}

.crop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    cursor: move;
}

.crop-box {
    position: absolute;
    border: 3px solid var(--color-primary);
    background: transparent;
    cursor: move;
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    z-index: 10;
}

.crop-box::before,
.crop-box::after {
    content: '';
    position: absolute;
    background: var(--color-primary);
}

.crop-box::before {
    width: 20px;
    height: 3px;
    top: -3px;
    left: 50%;
    transform: translateX(-50%);
}

.crop-box::after {
    width: 3px;
    height: 20px;
    left: -3px;
    top: 50%;
    transform: translateY(-50%);
}

.crop-controls {
    padding: 16px;
    background: var(--bg-white);
    border-radius: 12px;
}

.crop-size-inputs {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    justify-content: center;
}

.crop-size-inputs label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #666;
}

.crop-size-inputs input {
    width: 80px;
    padding: 6px 10px;
    border: 2px solid #f0f0f0;
    border-radius: 8px;
    font-size: 14px;
    text-align: center;
}

.crop-size-inputs input:focus {
    outline: none;
    border-color: #ffb6d9;
}

.crop-actions {
    display: flex;
    gap: 12px;
}

.crop-cancel-btn,
.crop-confirm-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.crop-cancel-btn {
    background: var(--bg-hover);
    color: #666;
}

.crop-cancel-btn:hover {
    background: var(--bg-toggle);
}

.crop-confirm-btn {
    background: var(--bg-gradient);
    color: var(--text-white);
    box-shadow: 0 2px 8px var(--color-primary-rgba-30);
}

.crop-confirm-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 105, 180, 0.4);
}

.crop-confirm-btn:active {
    transform: translateY(0);
}

/* ========== 主題自訂頁面樣式 ========== */
.theme-custom-content {
    background: var(--bg-white) !important;
    border-radius: var(--radius-xl);
    padding: var(--spacing-xxl);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}



.theme-custom-content button {
    transition: all var(--transition-fast);
}

.theme-custom-content button:active {
    transform: scale(0.98);
    opacity: 0.9;
}

#imagePreviewContainer {
    position: relative;
    margin-top: 12px;
}

#imagePreviewContainer img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: var(--radius-md);
    border: 2px solid var(--border-light);
}

#removeImageBtn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: var(--radius-full);
    width: 32px;
    height: 32px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

#removeImageBtn:hover {
    background: rgba(255, 0, 0, 0.8);
    transform: scale(1.1);
}

.theme-custom-content .theme-item {
    transition: all var(--transition-base);
}

.theme-custom-content .theme-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.theme-custom-content .theme-item.selected {
    border-color: var(--color-primary);
    border-width: 3px;
    box-shadow: var(--shadow-primary);
}

/* ========== 響應式設計 ========== */

/* 手機端（小於 480px） */
@media (max-width: 480px) {
    /* 投資專區 */
    .investment-overview {
        padding: 12px;
        padding-bottom: 100px;
    }
    
    .summary-card {
        padding: 16px;
        gap: 12px;
    }
    
    .summary-icon {
        font-size: 24px;
    }
    
    .summary-value {
        font-size: 18px;
    }
    
    .summary-label {
        font-size: 12px;
    }
    
    /* 持股卡片 */
    .stock-item-card {
        padding: 16px;
    }
    
    .stock-card-name {
        font-size: 16px;
    }
    
    .stock-card-code {
        font-size: 12px;
    }
    
    /* 股票搜尋框 */
    .stock-search-container {
        margin-bottom: 12px;
    }
    
    .stock-search-input {
        padding: 10px 36px 10px 14px;
        font-size: 14px;
    }
    
    .stock-search-clear-btn {
        width: 24px;
        height: 24px;
        font-size: 12px;
        right: 6px;
    }
    
    /* 投資操作按鈕 */
    .investment-actions {
        padding: 12px;
        gap: 8px;
    }
    
    .action-btn {
        padding: 12px 16px;
        font-size: 14px;
    }
    
    /* 表單 */
    .form-field {
        margin-bottom: 16px;
    }
    
    .form-input {
        padding: 12px;
        font-size: 16px;
    }
    
    /* 底部導航 */
    .nav-icon {
        font-size: 20px;
    }
    
    .nav-text {
        font-size: 15px;
    }
    
    /* 圖表 */
    .chart-container {
        padding: 12px;
    }

    .chart-container--compare {
        height: 360px;
    }

    .chart-insight {
        padding: 0 16px 16px;
        font-size: 12px;
        line-height: 1.55;
    }

    .dca-progress {
        padding: 10px 10px 8px;
        border-radius: 12px;
    }

    .dca-progress-text {
        font-size: 11px;
    }

    .dca-progress-bar {
        height: 10px;
    }

    .dca-achievement-badge {
        width: 26px;
        height: 26px;
        font-size: 15px;
    }
    
    /* 預算頁面手機優化 */
    .budget-summary {
        padding: 16px 12px;
        gap: 8px;
        flex-wrap: wrap;
    }
    
    .budget-summary-item {
        flex: 1 1 calc(33.333% - 6px);
        min-width: calc(33.333% - 6px);
        padding: 14px 6px;
        margin-bottom: 0;
    }
    
    .budget-summary-label {
        font-size: 10px;
        margin-bottom: 8px;
        letter-spacing: 0.3px;
    }
    
    .budget-summary-value {
        font-size: 15px;
        letter-spacing: -0.01em;
    }
    
    .budget-item {
        padding: 16px;
        margin: 0 12px 12px;
        flex-direction: column;
        gap: 14px;
        border-radius: var(--radius-lg);
    }
    
    .budget-item-icon {
        width: 52px;
        height: 52px;
        font-size: 28px;
        align-self: center;
    }
    
    .budget-item-info {
        width: 100%;
    }
    
    .budget-item-header {
        margin-bottom: 8px;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .budget-item-name {
        font-size: 18px;
        width: 100%;
        white-space: normal;
        line-height: 1.4;
    }
    
    .budget-item-status {
        font-size: 12px;
        padding: 5px 12px;
        align-self: flex-start;
    }
    
    .budget-progress-bar {
        height: 14px;
        margin: 8px 0;
    }
    
    .budget-item-details {
        grid-template-columns: 1fr;
        gap: 10px;
        padding-top: 12px;
    }
    
    .budget-detail-item {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.03);
    }
    
    .budget-detail-item:last-child {
        border-bottom: none;
    }
    
    .budget-detail-label {
        font-size: 13px;
    }
    
    .budget-detail-value {
        font-size: 16px;
    }
    
    .budget-edit-btn {
        width: 100%;
        margin-left: 0;
        margin-top: 8px;
        padding: 14px;
        min-height: 48px;
        font-size: 16px;
        border-radius: var(--radius-md);
    }
    
    .daily-budget-track-btn {
        margin-top: 12px;
        padding: 14px 16px;
        min-height: 48px;
    }
    
    .budget-add-section {
        padding: 16px;
    }
    
    .budget-add-btn-full {
        padding: 14px;
        min-height: 48px;
        font-size: 15px;
    }
    
    /* 設定項目 */
    .settings-item {
        padding: 12px;
    }
    
    /* 分類網格 */
    .category-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }
    
    /* 金額顯示 */
    .amount {
        font-size: 36px;
    }
}

/* 平板端（481px - 768px） */
@media (min-width: 481px) and (max-width: 768px) {
    .investment-overview {
        padding: 16px;
    }
    
    .overview-summary-grid {
        gap: 14px;
    }
    
    .summary-card {
        padding: 18px;
    }
    
    .category-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }
}

/* 桌面端（大於 768px） */
@media (min-width: 769px) {
    .investment-overview {
        padding: 24px;
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .overview-summary-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }
    
    .summary-card {
        padding: 24px;
    }
    
    .stock-item-card {
        padding: 24px;
    }
    
    .investment-actions {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .category-grid {
        grid-template-columns: repeat(6, 1fr);
        gap: 16px;
    }
    
    /* 底部導航居中顯示 */
    .bottom-nav {
        max-width: 1200px;
        left: 50%;
        transform: translateX(-50%);
    }
}

/* 大桌面端（大於 1200px） */
@media (min-width: 1200px) {
    .investment-overview {
        padding: 32px;
    }
    
    .overview-summary-grid {
        gap: 24px;
    }
    
    .category-grid {
        grid-template-columns: repeat(8, 1fr);
    }
}

/* 響應式：持股列表 */
@media (max-width: 480px) {
    .stock-list {
        grid-template-columns: 1fr;
        gap: 14px;
    }

    .allocation-grid {
        grid-template-columns: 1fr;
    }
    
    .stock-item-card {
        padding: 18px;
        border-radius: 18px;
    }
    
    .stock-card-body {
        gap: 10px;
    }
    
    .stock-card-row {
        font-size: 14px;
        padding: 10px 0;
    }
    
    .section-title {
        font-size: 20px;
        font-weight: 800;
    }
    
    /* 手機版：投資操作按鈕縮小 */
    .buy-action-btn-large,
    .dca-action-btn-large {
        padding: 6px 10px;
        font-size: 13px;
        gap: 6px;
        border-radius: 12px;
        min-height: 36px;
        font-weight: 700;
    }

    .buy-action-btn-large {
        box-shadow: 0 3px 10px var(--color-primary-rgba-25);
    }

    .dca-action-btn-large {
        box-shadow: 0 3px 10px rgba(102, 126, 234, 0.25);
    }
    
    .buy-action-btn-large:active,
    .dca-action-btn-large:active {
        transform: translateY(0) scale(0.96);
    }
    
    /* 手機版：section-header 布局優化 */
    .section-header {
        flex-wrap: nowrap;
        gap: 10px;
        align-items: center;
        justify-content: flex-start;
    }
    
    .section-title {
        flex: 0 0 auto;
        margin: 0;
        font-size: 18px;
    }
    
    .buy-action-btn-large {
        flex: 0 0 auto;
        margin-left: auto;
    }
    
    .stock-count {
        flex: 0 0 auto;
        margin-left: 8px;
        font-size: 13px;
        white-space: nowrap;
    }
    
    /* 確保按鈕在手機上足夠大，易於點擊 */
    .buy-action-btn-large {
        min-height: 44px;
        min-width: 80px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(255, 105, 180, 0.2);
    }
}

/* 響應式：投資操作按鈕 */
@media (max-width: 480px) {
    .investment-actions {
        flex-wrap: nowrap !important; /* 強制不換行 */
        gap: 6px !important;
        display: flex !important;
        padding: 10px 8px !important;
    }
    
    .action-btn {
        flex: 1 1 0 !important; /* 平均分配空間 */
        min-width: 0 !important; /* 移除最小寬度限制 */
        padding: 12px 6px !important;
        font-size: 13px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* 確保股息和定期定額按鈕可見 */
    .dividend-btn,
    .dca-btn {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .dividend-btn {
        background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
        color: var(--text-white) !important;
    }
    
    .dca-btn {
        background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%) !important;
        color: var(--text-white) !important;
        font-size: 14px;
    }
}

/* 響應式：表單輸入 */
@media (max-width: 480px) {
    .form-field {
        margin-bottom: 14px;
    }
    
    .form-label {
        font-size: 13px;
        margin-bottom: 6px;
    }
    
    .form-input {
        padding: 14px;
        font-size: 16px; /* 防止 iOS 自動縮放 */
    }
    
    .form-date-input {
        font-size: 16px;
    }
    
    .form-submit-btn {
        padding: 16px;
        font-size: 16px;
    }
}

/* 響應式：模態框 */
@media (max-width: 480px) {
    .modal-content-standard {
        padding: 20px;
        margin: 10px;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .theme-custom-content {
        padding: 16px;
        max-height: 85vh;
    }
    
    .theme-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }
}

/* 響應式：預算頁面 */
@media (max-width: 480px) {
    .budget-summary {
        padding: 12px;
        gap: 12px;
    }
    
    .budget-summary-item {
        padding: 12px;
    }
    
    .budget-item {
        flex-direction: column;
        gap: 12px;
    }
    
    .budget-progress {
        width: 100%;
    }
}

/* 響應式：圖表頁面 */
@media (max-width: 480px) {
    .chart-container {
        padding: 12px;
        height: 300px;
    }
    
    .chart-legend {
        padding: 12px;
    }
    
    .legend-item {
        padding: 8px;
        font-size: 12px;
    }
}

/* 響應式：設定頁面 */
@media (max-width: 480px) {
    .settings-list {
        padding: 0;
    }
    
    .settings-item {
        padding: 14px 12px;
    }
    
    .settings-item-title {
        font-size: 15px;
    }
    
    .settings-item-desc {
        font-size: 12px;
    }
}

/* 響應式：個股詳情頁面 */
@media (max-width: 480px) {
    .stock-info-header {
        padding: 16px;
    }
    
    .stock-metrics-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        padding: 12px;
    }
    
    .metric-card {
        padding: 16px;
    }
    
    .metric-value-large {
        font-size: 20px;
    }
    
    .metric-input-large {
        font-size: 18px;
        padding: 12px;
    }
}

/* 響應式：記錄卡片 */
@media (max-width: 480px) {
    .record-card {
        padding: 18px;
        border-radius: 18px;
    }
    
    :root[data-theme="midnight"] .record-card,
    :root[data-theme="obsidian"] .record-card {
        background: var(--bg-card);
        border: 1px solid var(--card-border-color);
        box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35), var(--shadow-md);
        color: var(--text-primary);
    }
    
    :root[data-theme="midnight"] .record-card::before,
    :root[data-theme="obsidian"] .record-card::before {
        background-image: none;
        background: rgba(0, 0, 0, 0.32);
        opacity: 0.15;
    }
    
    :root[data-theme="midnight"] .record-card .record-card-details > div,
    :root[data-theme="obsidian"] .record-card .record-card-details > div {
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid var(--card-border-color);
        box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.35);
    }
    
    .record-card-header {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 14px;
        padding-bottom: 12px;
        padding-right: 90px;
        flex-wrap: wrap;
    }
    
    .record-card-type {
        font-size: 12px;
        padding: 7px 14px;
        border-radius: 12px;
        white-space: nowrap;
    }
    
    .record-card-date {
        font-size: 12px;
        white-space: nowrap;
        padding: 5px 10px;
        border-radius: 10px;
    }

    :root[data-theme="midnight"] .record-card-date,
    :root[data-theme="obsidian"] .record-card-date {
        background: rgba(0, 0, 0, 0.75);
        border: 1px solid var(--card-border-color);
        color: var(--text-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }
    
    .record-card-details {
        grid-template-columns: 1fr;
        gap: 10px;
        font-size: 13px;
        margin-bottom: 10px;
    }
    
    .record-card-details > div {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px;
        border-bottom: 1px solid var(--border-light);
        background: var(--bg-gradient-light);
        border-radius: 10px;
        border-bottom: none;
    }
    
    .record-card-details > div:last-child {
        border-bottom: none;
    }
    
    .record-card-amount {
        font-size: 18px;
        font-weight: 800;
        padding: 10px;
        border-radius: 12px;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 2px solid var(--border-light);
        text-align: center;
    }
    
    .record-quick-buy-fab {
        width: 36px;
        height: 36px;
        font-size: 14px;
        top: 10px;
    }
    
    .record-quick-buy-fab {
        font-size: 12px;
        right: 74px;
    }
    
    .dividend-reinvest-label {
        padding: 5px 10px;
        font-size: 12px;
        margin-top: 6px;
    }
    
    .dca-label {
        padding: 5px 10px;
        font-size: 12px;
        margin-top: 6px;
    }
}

/* 響應式：每日預算追蹤 */
@media (max-width: 480px) {
    .daily-budget-summary-card {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        padding: 16px;
    }
    
    .daily-calendar-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .daily-calendar-item {
        padding: 10px;
    }
}

/* 響應式：鍵盤 */
@media (max-width: 480px) {
    .keyboard {
        padding: 14px;
        gap: 10px;
        background: var(--bg-white);
        border-radius: 20px 20px 0 0;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
    }
    
    .keyboard-row {
        gap: 10px;
    }
    
    .key-btn {
        min-height: 52px;
        font-size: 19px;
        font-weight: 600;
        border-radius: 14px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transition: all 0.2s ease;
    }
    
    .key-btn:active {
        transform: scale(0.95);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
    }
    
    .key-btn.equal {
        font-size: 21px;
        font-weight: 700;
        box-shadow: 0 3px 12px rgba(255, 105, 180, 0.3);
    }
    
    .key-btn.equal:active {
        box-shadow: 0 2px 8px var(--color-primary-rgba-25);
    }
    
    .key-btn.save-btn {
        box-shadow: 0 4px 14px var(--color-primary-rgba-35);
    }
    
    .key-btn.save-btn:active {
        box-shadow: 0 2px 10px rgba(255, 105, 180, 0.3);
    }
}

/* 響應式：頁面標題 */
@media (max-width: 480px) {
    .page-title {
        font-size: 20px;
    }
    
    .budget-title,
    .chart-title,
    .settings-title {
        font-size: 18px;
    }
    
    .investment-page-header {
        margin-bottom: 16px;
    }
}

/* 響應式：文字大小調整 */
@media (max-width: 480px) {
    .summary-value {
        font-size: 20px;
        font-weight: 800;
    }
    
    .summary-label {
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 0.4px;
    }
    
    .stock-card-value {
        font-size: 15px;
        font-weight: 800;
    }
    
    .stock-card-label {
        font-size: 13px;
        font-weight: 600;
    }
    
    /* 改進頁面標題 */
    .page-title {
        font-size: 24px;
        font-weight: 800;
    }
    
    .ledger-title {
        font-size: 22px;
        font-weight: 800;
    }
    
    .budget-title,
    .chart-title,
    .settings-title {
        font-size: 20px;
        font-weight: 800;
    }
    
    /* 改進按鈕文字 */
    .view-history-btn {
        font-size: 16px;
        font-weight: 600;
        padding: 14px 24px;
        border-radius: 14px;
        min-height: 48px;
    }
    
    .fab-btn {
        width: 56px;
        height: 56px;
        font-size: 24px;
        box-shadow: 0 6px 20px rgba(255, 105, 180, 0.4);
    }
}

/* 橫向手機（landscape） */
@media (max-width: 768px) and (orientation: landscape) {
    .category-section {
        max-height: calc(100vh - 200px);
    }
    
    .investment-overview {
        padding-bottom: 80px;
    }
}

/* 觸控設備優化 */
@media (hover: none) and (pointer: coarse) {
    .summary-card:hover,
    .stock-item-card:hover,
    .category-item:hover {
        transform: none;
    }
    
    .action-btn,
    .form-submit-btn,
    .key-btn {
        min-height: 48px;
        min-width: 48px;
    }
}

/* 高解析度屏幕優化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .summary-card,
    .stock-item-card,
    .budget-item {
        border-width: 0.5px;
    }
}

/* ========== 全面手機端優化 ========== */

/* 記帳本頁面手機端優化 */
@media (max-width: 480px) {
    .page-ledger {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .ledger-header {
        padding: 12px 16px;
        position: sticky;
        top: 0;
        z-index: 100;
        background: var(--bg-white);
    }
    
    .ledger-header {
        gap: 8px;
    }
    
    .ledger-title {
        font-size: 18px;
        flex: 1;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    
    .search-btn,
    .bill-btn {
        width: 36px;
        height: 36px;
        font-size: 18px;
    }
    
    .ledger-summary {
        padding: 16px;
    }
    
    .summary-month {
        font-size: 18px;
        margin-bottom: 12px;
    }
    
    .summary-stats {
        flex-direction: column;
        gap: 12px;
    }
    
    .stat-item {
        width: 100%;
        padding: 12px;
        background: var(--bg-lighter);
        border-radius: 12px;
    }
    
    .stat-label {
        font-size: 12px;
    }
    
    .stat-value {
        font-size: 18px;
    }
    
    .summary-line {
        font-size: 13px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border-light);
    }
    
    .ledger-list {
        padding: 8px 0;
    }
    
    .transaction-group {
        margin: 0 12px 12px 12px;
        border-radius: 12px;
    }
    
    .group-header {
        padding: 10px 14px;
        font-size: 13px;
    }
    
    .transaction-item {
        padding: 14px;
    }
    
    .transaction-icon {
        width: 44px;
        height: 44px;
        font-size: 20px;
        margin-right: 12px;
    }
    
    .transaction-category {
        font-size: 15px;
    }
    
    .transaction-account,
    .transaction-member {
        font-size: 12px;
    }
    
    .transaction-note {
        font-size: 12px;
    }
    
    .transaction-amount {
        font-size: 16px;
    }
    
    .transaction-delete-btn {
        width: 32px;
        height: 32px;
        font-size: 14px;
    }
    
    .transaction-amount-wrapper {
        gap: 6px;
    }
}

/* 記帳輸入頁面手機端優化 */
@media (max-width: 480px) {
    .page-input {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .app-container {
        padding: 12px;
    }
    
    .tab-section {
        padding: 8px 12px;
    }
    
    .tab-btn {
        padding: 10px 16px;
        font-size: 14px;
    }
    
    .category-section {
        padding: 12px;
    }
    
    .category-item {
        padding: 14px 8px;
        min-height: 80px;
    }
    
    .category-icon {
        font-size: 28px;
        margin-bottom: 6px;
    }
    
    .category-name {
        font-size: 12px;
    }
    
    .input-section {
        padding: 16px;
    }
    
    .input-top-row {
        margin-bottom: 6px;
        padding: 10px 12px;
        gap: 6px;
    }
    
    .account-info-row {
        padding: 6px 12px;
        min-height: 36px;
    }
    
    .account-info {
        font-size: 11px;
    }
    
    .input-second-row {
        gap: 8px;
    }
    
    .input-btn {
        width: 44px;
        height: 44px;
        font-size: 18px;
    }
    
    .note-input {
        padding: 10px 12px;
        font-size: 14px;
        min-width: 0;
    }
    
    .quick-notes-container {
        padding: 8px 12px;
    }
    
    .quick-notes-label {
        font-size: 11px;
        margin-bottom: 6px;
    }
    
    .quick-notes-buttons {
        gap: 5px;
    }
    
    .quick-note-btn {
        padding: 5px 10px;
        font-size: 12px;
        border-radius: 14px;
        gap: 3px;
    }
    
    .date-input {
        font-size: 13px;
        padding: 0 8px;
    }
    
    .amount-display {
        padding: 20px 0;
    }
    
    .amount {
        font-size: 40px;
    }
    
    .currency {
        font-size: 20px;
    }
    
    .keyboard {
        padding: 12px;
        gap: 10px;
    }
    
    .keyboard-row {
        gap: 10px;
    }
    
    .key-btn {
        min-height: 60px;
        font-size: 22px;
        border-radius: 14px;
    }
    
    .key-btn[data-key="0"] {
        font-size: 24px;
    }
    
    .key-btn.delete {
        width: 60px;
        height: 60px;
        flex: 0 0 60px;
    }
    
    .key-btn.clear {
        font-size: 15px;
    }
    
    .key-btn.equal {
        font-size: 22px;
    }
    
    .fab-btn {
        width: 56px;
        height: 56px;
        font-size: 24px;
        bottom: 80px;
        right: 16px;
    }
}

/* 圖表分析頁面手機端優化 */
@media (max-width: 480px) {
    .page-chart {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .chart-header {
        padding: 16px;
    }
    
    .chart-title {
        font-size: 20px;
    }
    
    .chart-type-tabs {
        padding: 12px 16px;
        gap: 8px;
    }
    
    .chart-type-btn {
        padding: 10px 16px;
        font-size: 14px;
    }
    
    .chart-dimension-tabs {
        padding: 12px 16px;
        gap: 8px;
    }
    
    .dimension-btn {
        padding: 8px 14px;
        font-size: 13px;
    }
    
    .chart-container {
        padding: 16px;
        height: 280px;
    }
    
    .chart-legend {
        padding: 16px;
        gap: 12px;
    }
    
    .legend-item {
        padding: 10px;
        font-size: 13px;
    }
}

/* 預算設定頁面手機端優化 */
@media (max-width: 480px) {
    .page-budget {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .budget-header {
        padding: 16px;
    }
    
    .budget-title {
        font-size: 20px;
    }
    
    .budget-summary {
        margin: 16px;
        padding: 16px;
        border-radius: 16px;
    }
    
    .budget-summary-item {
        padding: 12px;
    }
    
    .budget-summary-label {
        font-size: 12px;
    }
    
    .budget-summary-value {
        font-size: 18px;
    }
    
    .budget-list {
        padding: 0 16px;
    }
    
    .budget-item {
        padding: 16px;
        margin-bottom: 12px;
        border-radius: 12px;
    }
    
    .budget-item-header {
        margin-bottom: 12px;
    }
    
    .budget-item-name {
        font-size: 16px;
    }
    
    .budget-item-amount {
        font-size: 18px;
    }
    
    .budget-progress {
        height: 8px;
    }
}

/* 設定頁面手機端優化 */
@media (max-width: 480px) {
    .page-settings {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .settings-header {
        padding: 16px;
    }
    
    .settings-title {
        font-size: 20px;
    }
    
    .settings-list {
        padding: 0;
    }
    
    .settings-item {
        padding: 16px;
        margin: 0 16px 0 16px;
        border-radius: 12px;
        margin-bottom: 8px;
    }
    
    .settings-item-icon {
        font-size: 22px;
        width: 28px;
        margin-right: 12px;
    }
    
    .settings-item-text {
        font-size: 15px;
    }
    
    .settings-item-arrow {
        font-size: 18px;
    }
}

/* 分類管理頁面手機端優化 */
@media (max-width: 480px) {
    .page-category-manage {
        padding: 0;
        padding-bottom: 100px;
    }
    
    .category-manage-header {
        padding: 12px 16px;
    }
    
    .category-manage-title {
        font-size: 18px;
    }
    
    .back-btn,
    .add-category-btn {
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
    
    .category-type-tabs {
        padding: 12px 16px;
        gap: 8px;
    }
    
    .category-type-btn {
        padding: 10px 16px;
        font-size: 14px;
    }
    
    .category-manage-list {
        padding: 0 16px;
    }
    
    .category-manage-item {
        padding: 14px;
        margin-bottom: 12px;
        border-radius: 12px;
    }
    
    .category-manage-item-icon {
        width: 44px;
        height: 44px;
        font-size: 22px;
    }
    
    .category-manage-item-name {
        font-size: 15px;
    }
}

/* 帳戶管理頁面手機端優化 */
@media (max-width: 480px) {
    .account-select-modal .modal-content,
    .account-detail-modal .modal-content,
    .account-manage-modal .modal-content {
        margin: 10px;
        padding: 20px;
        max-height: 90vh;
        border-radius: 16px;
    }
    
    .account-list {
        max-height: 60vh;
        overflow-y: auto;
    }
    
    .account-item {
        padding: 14px;
        margin-bottom: 10px;
        border-radius: 12px;
    }
    
    .account-item-icon {
        width: 56px;
        height: 56px;
        font-size: 28px;
    }
    
    .account-item-name {
        font-size: 16px;
    }
    
    .account-item-balance {
        font-size: 18px;
    }
    
    .form-field {
        margin-bottom: 16px;
    }
    
    .form-label {
        font-size: 14px;
        margin-bottom: 8px;
    }
    
    .form-input {
        padding: 14px;
        font-size: 16px;
        border-radius: 12px;
    }
    
    .form-submit-btn,
    .form-delete-btn {
        padding: 14px;
        font-size: 16px;
        border-radius: 12px;
    }
}

/* 投資專區頁面手機端優化（補充） */
@media (max-width: 480px) {
    .investment-form-header {
        padding: 16px;
    }
    
    .form-header-title {
        font-size: 20px;
    }
    
    .form-header-subtitle {
        font-size: 13px;
    }
    
    .investment-form-container {
        padding: 16px;
    }
    
    .investment-type-buttons {
        gap: 8px;
    }
    
    .type-btn {
        padding: 12px;
        font-size: 13px;
    }
    
    .type-icon {
        font-size: 20px;
    }
    
    .investment-form-footer {
        padding: 16px;
    }
    
    .form-query-btn {
        padding: 12px;
        font-size: 14px;
        margin: 12px 0;
    }
}

/* 搜索框手機端優化 */
@media (max-width: 480px) {
    .search-container {
        padding: 12px 16px;
    }
    
    .search-input {
        padding: 12px 40px 12px 16px;
        font-size: 16px;
        border-radius: 12px;
    }
    
    .search-close-btn {
        width: 32px;
        height: 32px;
        font-size: 18px;
    }
}

/* 模態框手機端優化（補充） */
@media (max-width: 480px) {
    .modal-overlay {
        padding: 10px;
    }
    
    .modal-content {
        margin: 10px;
        padding: 20px;
        max-height: 90vh;
        border-radius: 16px;
    }
    
    .modal-header {
        margin-bottom: 16px;
    }
    
    .modal-title {
        font-size: 18px;
    }
    
    .modal-close-btn {
        width: 32px;
        height: 32px;
        font-size: 18px;
    }
    
    .modal-body {
        max-height: calc(90vh - 120px);
        overflow-y: auto;
    }
}

/* 小屏幕手機優化（≤375px） */
@media (max-width: 375px) {
    .category-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }
    
    .category-item {
        padding: 14px 6px;
        min-height: 80px;
        border-radius: 14px;
    }
    
    .category-icon {
        font-size: 26px;
    }
    
    .category-name {
        font-size: 12px;
        font-weight: 600;
    }
    
    .key-btn {
        min-height: 50px;
        font-size: 18px;
        border-radius: 12px;
    }
    
    .transaction-item {
        padding: 14px;
        border-radius: 14px;
        margin-bottom: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    .transaction-item:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .transaction-icon {
        width: 44px;
        height: 44px;
        font-size: 20px;
        border-radius: 12px;
    }
    
    .transaction-category {
        font-size: 15px;
        font-weight: 700;
    }
    
    .transaction-amount {
        font-size: 16px;
        font-weight: 800;
    }
    
    .summary-stats {
        gap: 10px;
    }
    
    .stat-item {
        padding: 12px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    .stat-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    /* 小屏幕：+買入按鈕進一步優化 */
    .buy-action-btn-large {
        padding: 10px 16px;
        font-size: 15px;
        gap: 6px;
        min-height: 44px;
        min-width: 80px;
        border-radius: 14px;
    }
    
    .section-title {
        font-size: 18px;
        font-weight: 800;
    }
    
    .section-header {
        gap: 10px;
    }
    
    .stock-count {
        font-size: 13px;
        font-weight: 600;
    }
}

/* 防止iOS自動縮放輸入框 */
@media (max-width: 480px) {
    input[type="text"],
    input[type="number"],
    input[type="date"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
        font-size: 16px !important;
    }
}

/* 防止輸入框focus時視口自動滾動（手機適配，防止數字鍵盤移位） */
@media (max-width: 768px) {
    input[type="text"],
    input[type="number"],
    input[type="date"],
    input[type="email"],
    input[type="tel"],
    textarea {
        /* 防止focus時自動滾動 */
        scroll-margin: 0;
        scroll-padding: 0;
    }
    
    /* 確保輸入區域在鍵盤彈出時不會移位 */
    .input-section {
        /* 使用固定定位，避免鍵盤彈出時移位 */
        position: fixed;
        /* 確保在鍵盤彈出時保持位置 */
        will-change: transform;
    }
    
    /* 防止body在鍵盤彈出時滾動 */
    body {
        /* 防止鍵盤彈出時body滾動 */
        overflow-x: hidden;
        /* 允許垂直滾動，但防止自動滾動到輸入框 */
        position: relative;
    }
}

/* 觸控優化 */
@media (hover: none) and (pointer: coarse) {
    /* 增大觸控目標（符合Apple和Google的44x44px最小觸控目標） */
    button,
    .category-item,
    .transaction-item,
    .settings-item,
    .nav-item,
    .tab-btn,
    .ledger-type-tab,
    .key-btn,
    .input-btn,
    .action-btn {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* 移除懸停效果 */
    .category-item:hover,
    .transaction-item:hover,
    .settings-item:hover,
    .summary-card:hover,
    .stock-item-card:hover {
        transform: none !important;
        box-shadow: inherit !important;
    }
    
    /* 增強點擊反饋 */
    .category-item:active,
    .transaction-item:active,
    .settings-item:active,
    button:active,
    .key-btn:active {
        transform: scale(0.96);
        opacity: 0.85;
        transition: transform 0.1s ease, opacity 0.1s ease;
    }
    
    /* 手機上減少動畫以提高性能 */
    * {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
    }
    
    /* 減少陰影以提升性能 */
    .category-item,
    .transaction-item,
    .summary-card,
    .stock-item-card,
    .budget-item {
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* 禁用模糊效果 */
    .mori-dialog-box,
    .modal-overlay,
    .ledger-header {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
    
    /* 優化滾動性能 */
    * {
        -webkit-overflow-scrolling: touch;
    }
    
    /* 防止雙擊縮放 */
    button,
    a,
    .category-item,
    .transaction-item {
        touch-action: manipulation;
    }
}

/* 額外手機端優化 */
@media (max-width: 480px) {
    /* 確保安全區域（iPhone X等有劉海的設備） */
    body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }
    
    /* 確保所有頁面都有適當的底部間距 */
    .page-ledger,
    .page-input,
    .page-chart,
    .page-budget,
    .page-monthly-planner,
    .page-settings,
    .page-category-manage,
    .page-investment {
        padding-bottom: calc(100px + env(safe-area-inset-bottom));
    }
    
    /* 優化滾動性能 */
    .ledger-list,
    .category-section,
    .stock-list,
    .budget-list {
        -webkit-overflow-scrolling: touch;
        will-change: scroll-position;
        transform: translateZ(0); /* 啟用GPU加速 */
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
    }
    
    /* 優化卡片陰影（手機上減少陰影以提升性能） */
    .transaction-group,
    .summary-card,
    .stock-item-card,
    .budget-item {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transform: translateZ(0); /* 啟用GPU加速 */
        will-change: transform;
    }
    
    /* 性能優化：減少重繪 */
    .category-item,
    .transaction-item,
    .key-btn,
    .tab-btn {
        transform: translateZ(0);
        will-change: transform;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
    }
    
    /* 減少動畫以提高性能 */
    .category-item,
    .transaction-item,
    .key-btn,
    .tab-btn,
    .input-btn {
        transition: transform 0.15s ease, opacity 0.15s ease !important;
    }
    
    /* 禁用複雜的hover效果 */
    .category-item:hover,
    .transaction-item:hover {
        transform: none !important;
    }
    
    /* 優化圖片渲染 */
    img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        transform: translateZ(0);
    }
    
    /* 減少模糊效果以提升性能 */
    .mori-dialog-box {
        backdrop-filter: blur(5px) !important;
        -webkit-backdrop-filter: blur(5px) !important;
    }
    
    /* 優化輸入區域 */
    .input-section {
        transform: translateZ(0);
        will-change: transform;
    }
    
    /* 優化文字換行 */
    .transaction-category,
    .transaction-note,
    .category-name {
        word-break: break-word;
        overflow-wrap: break-word;
    }
    
    /* 確保按鈕文字不會被截斷 */
    .action-btn,
    .form-submit-btn,
    .key-btn {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    /* 優化輸入框在手機上的顯示 */
    input[type="text"],
    input[type="number"],
    input[type="date"],
    textarea {
        -webkit-appearance: none;
        appearance: none;
        border-radius: 12px;
        /* 防止iOS自動縮放 */
        font-size: 16px !important;
        /* 優化觸控體驗 */
        touch-action: manipulation;
    }
    
    /* 優化搜索框 */
    .search-input,
    .stock-search-input {
        font-size: 16px !important;
        padding: 12px 16px;
        min-height: 44px;
    }
    
    /* 優化選擇框 */
    select {
        -webkit-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center;
        padding-right: 36px;
    }
    
    /* 優化浮動按鈕位置 */
    .fab-btn {
        box-shadow: 0 4px 12px rgba(255, 105, 180, 0.4);
        /* 考慮安全區域 */
        bottom: calc(80px + env(safe-area-inset-bottom));
        right: calc(20px + env(safe-area-inset-right));
    }
    
    /* 優化底部導航欄 */
    .bottom-nav {
        padding-bottom: calc(8px + env(safe-area-inset-bottom));
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }
    
    /* 優化模態框在手機上的顯示 */
    .modal-content {
        width: calc(100% - 20px);
        max-width: none;
    }
    
    /* 優化表格在手機上的顯示 */
    table {
        font-size: 14px;
    }
    
    th, td {
        padding: 8px 4px;
    }
}

/* 超小屏幕優化（≤320px） */
@media (max-width: 320px) {
    .category-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
    }
    
    .category-item {
        padding: 10px 4px;
        min-height: 70px;
    }
    
    .category-icon {
        font-size: 20px;
    }
    
    .category-name {
        font-size: 10px;
    }
    
    .key-btn {
        min-height: 52px;
        font-size: 18px;
    }
    
    .transaction-item {
        padding: 10px;
    }
    
    .transaction-icon {
        width: 36px;
        height: 36px;
        font-size: 16px;
        margin-right: 8px;
    }
    
    .transaction-category {
        font-size: 13px;
    }
    
    .transaction-amount {
        font-size: 14px;
    }
    
    .summary-stats {
        flex-direction: column;
        gap: 8px;
    }
    
    .stat-item {
        padding: 8px;
    }
    
    .stat-value {
        font-size: 16px;
    }
}

/* 橫向手機優化 */
@media (max-width: 768px) and (orientation: landscape) {
    .category-section {
        max-height: calc(100vh - 250px);
        overflow-y: auto;
    }
    
    .input-section {
        max-height: calc(100vh - 200px);
        overflow-y: auto;
    }
    
    .ledger-list {
        max-height: calc(100vh - 250px);
    }
    
    .chart-container {
        height: 250px;
    }
    
    .investment-overview {
        padding-bottom: 100px;
    }
}

/* 安全區域適配（iPhone X 等有劉海的設備） */
@supports (padding: max(0px)) {
    .bottom-nav {
        padding-bottom: max(8px, env(safe-area-inset-bottom));
    }
    
    .page-ledger,
    .page-input,
    .page-chart,
    .page-budget,
    .page-settings,
    .page-category-manage,
    .page-investment {
        padding-bottom: max(100px, calc(100px + env(safe-area-inset-bottom)));
    }
    
    .fab-btn {
        bottom: max(90px, calc(90px + env(safe-area-inset-bottom)));
    }
}

/* ========== 星空主題動畫 ========== */
:root[data-theme="star"] body {
    position: relative;
    overflow-x: hidden;
}

:root[data-theme="star"] body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(2px 2px at 20% 30%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(2px 2px at 60% 70%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(1px 1px at 50% 50%, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(1px 1px at 80% 10%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(2px 2px at 90% 60%, rgba(255, 255, 255, 0.5), transparent),
        radial-gradient(1px 1px at 33% 80%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1px 1px at 15% 50%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(2px 2px at 70% 20%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(1px 1px at 40% 90%, rgba(255, 255, 255, 0.5), transparent),
        radial-gradient(2px 2px at 10% 80%, rgba(255, 255, 255, 0.6), transparent);
    background-size: 200% 200%;
    animation: starMove 20s linear infinite;
    pointer-events: none;
    z-index: 0;
}

:root[data-theme="star"] body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(1px 1px at 25% 25%, rgba(139, 124, 246, 0.6), transparent),
        radial-gradient(1px 1px at 75% 75%, rgba(165, 148, 248, 0.5), transparent),
        radial-gradient(1px 1px at 50% 10%, rgba(139, 124, 246, 0.7), transparent),
        radial-gradient(1px 1px at 30% 60%, rgba(165, 148, 248, 0.4), transparent),
        radial-gradient(1px 1px at 80% 40%, rgba(139, 124, 246, 0.6), transparent);
    background-size: 300% 300%;
    animation: starMove 30s linear infinite reverse;
    pointer-events: none;
    z-index: 0;
}

@keyframes starMove {
    0% {
        background-position: 0% 0%;
    }
    100% {
        background-position: 100% 100%;
    }
}

/* 星空主題下的閃爍動畫 */
:root[data-theme="star"] .star-twinkle {
    animation: twinkle 3s ease-in-out infinite;
}

@keyframes twinkle {
    0%, 100% {
        opacity: 0.3;
        transform: scale(1);
    }
    50% {
        opacity: 1;
        transform: scale(1.2);
    }
}

/* 星空主題下的按鈕發光效果 */
:root[data-theme="star"] .fab-btn,
:root[data-theme="midnight"] .fab-btn,
:root[data-theme="obsidian"] .fab-btn,
:root[data-theme="star"] .input-btn:hover,
:root[data-theme="midnight"] .input-btn:hover,
:root[data-theme="obsidian"] .input-btn:hover,
:root[data-theme="star"] .key-btn.operator,
:root[data-theme="midnight"] .key-btn.operator,
:root[data-theme="obsidian"] .key-btn.operator,
:root[data-theme="star"] .check-btn,
:root[data-theme="midnight"] .check-btn,
:root[data-theme="obsidian"] .check-btn {
    box-shadow: 
        0 0 10px rgba(139, 124, 246, 0.5),
        0 0 20px rgba(139, 124, 246, 0.3),
        0 0 30px rgba(139, 124, 246, 0.2),
        var(--shadow-primary);
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from {
        box-shadow: 
            0 0 10px rgba(139, 124, 246, 0.5),
            0 0 20px rgba(139, 124, 246, 0.3),
            0 0 30px rgba(139, 124, 246, 0.2),
            var(--shadow-primary);
    }
    to {
        box-shadow: 
            0 0 20px rgba(139, 124, 246, 0.8),
            0 0 30px rgba(139, 124, 246, 0.5),
            0 0 40px rgba(139, 124, 246, 0.3),
            var(--shadow-primary-lg);
    }
}

/* 星空主題下的卡片邊框發光 */
:root[data-theme="star"] .category-item,
:root[data-theme="midnight"] .category-item,
:root[data-theme="obsidian"] .category-item,
:root[data-theme="star"] .transaction-item,
:root[data-theme="midnight"] .transaction-item,
:root[data-theme="obsidian"] .transaction-item,
:root[data-theme="star"] .summary-card,
:root[data-theme="midnight"] .summary-card,
:root[data-theme="obsidian"] .summary-card {
    border: 1px solid rgba(139, 124, 246, 0.3);
    box-shadow: 
        0 0 5px rgba(139, 124, 246, 0.2),
        var(--shadow-sm);
    transition: all 0.3s ease;
}

:root[data-theme="star"] .category-item:hover,
:root[data-theme="midnight"] .category-item:hover,
:root[data-theme="obsidian"] .category-item:hover,
:root[data-theme="star"] .transaction-item:hover,
:root[data-theme="midnight"] .transaction-item:hover,
:root[data-theme="obsidian"] .transaction-item:hover,
:root[data-theme="star"] .summary-card:hover,
:root[data-theme="midnight"] .summary-card:hover,
:root[data-theme="obsidian"] .summary-card:hover {
    border-color: rgba(139, 124, 246, 0.6);
    box-shadow: 
        0 0 15px rgba(139, 124, 246, 0.4),
        0 0 25px rgba(139, 124, 246, 0.2),
        var(--shadow-md);
}

/* 星空主題下的輸入框發光 */
:root[data-theme="star"] .note-input:focus,
:root[data-theme="midnight"] .note-input:focus,
:root[data-theme="obsidian"] .note-input:focus,
:root[data-theme="star"] .form-input:focus,
:root[data-theme="midnight"] .form-input:focus,
:root[data-theme="obsidian"] .form-input:focus {
    border-color: var(--color-primary);
    box-shadow: 
        0 0 10px rgba(139, 124, 246, 0.4),
        0 0 20px rgba(139, 124, 246, 0.2),
        var(--color-primary-rgba-15);
}

/* 星空主題下的滾動條發光 */
:root[data-theme="star"] ::-webkit-scrollbar-thumb,
:root[data-theme="midnight"] ::-webkit-scrollbar-thumb,
:root[data-theme="obsidian"] ::-webkit-scrollbar-thumb {
    background: rgba(139, 124, 246, 0.5);
    box-shadow: 0 0 5px rgba(139, 124, 246, 0.3);
}

:root[data-theme="star"] ::-webkit-scrollbar-thumb:hover,
:root[data-theme="midnight"] ::-webkit-scrollbar-thumb:hover,
:root[data-theme="obsidian"] ::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 124, 246, 0.7);
    box-shadow: 0 0 10px rgba(139, 124, 246, 0.5);
}

/* ========== 極光主題動畫 ========== */
:root[data-theme="aurora"] body {
    position: relative;
    overflow-x: hidden;
}

:root[data-theme="aurora"] body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 200%;
    height: 200%;
    background:
        radial-gradient(circle at 30% 30%, rgba(0, 212, 255, 0.22) 0%, transparent 45%),
        radial-gradient(circle at 70% 40%, rgba(52, 211, 153, 0.18) 0%, transparent 50%),
        radial-gradient(circle at 50% 70%, rgba(167, 139, 250, 0.18) 0%, transparent 55%);
    z-index: 0;
    pointer-events: none;
    filter: blur(10px);
    animation: auroraShift 14s ease-in-out infinite;
}

:root[data-theme="aurora"] body::after {
    content: '';
    position: fixed;
    top: -10%;
    left: -10%;
    width: 120%;
    height: 120%;
    background: linear-gradient(120deg, rgba(0, 212, 255, 0.10) 0%, rgba(52, 211, 153, 0.08) 50%, rgba(167, 139, 250, 0.10) 100%);
    z-index: 0;
    pointer-events: none;
    mix-blend-mode: screen;
    animation: auroraWave 10s ease-in-out infinite;
}

@keyframes auroraShift {
    0% { transform: translate(-10%, -8%) rotate(0deg); }
    50% { transform: translate(-20%, -15%) rotate(12deg); }
    100% { transform: translate(-10%, -8%) rotate(0deg); }
}

@keyframes auroraWave {
    0% { transform: translateY(0) skewX(-6deg); opacity: 0.65; }
    50% { transform: translateY(12px) skewX(6deg); opacity: 0.85; }
    100% { transform: translateY(0) skewX(-6deg); opacity: 0.65; }
}

/* 極光主題設置頁面 */
:root[data-theme="aurora"] .settings-group {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(0, 212, 255, 0.3);
    backdrop-filter: blur(15px);
}

:root[data-theme="aurora"] .settings-group-header {
    background: rgba(255, 255, 255, 0.9);
    border-bottom: 1px solid rgba(0, 212, 255, 0.2);
}

:root[data-theme="aurora"] .settings-group-header:hover {
    background: rgba(255, 255, 255, 0.95);
    border-bottom-color: rgba(0, 212, 255, 0.4);
}

:root[data-theme="aurora"] .settings-group-title {
    color: #000000;
    text-shadow: 0 0 8px rgba(0, 212, 255, 0.3);
}

:root[data-theme="aurora"] .settings-group-arrow {
    color: rgba(0, 0, 0, 0.8);
}

:root[data-theme="aurora"] .settings-group-content {
    background: rgba(255, 255, 255, 0.7);
}

:root[data-theme="aurora"] .settings-group-content .settings-item {
    border-left-color: transparent;
    transition: all 0.3s ease;
}

:root[data-theme="aurora"] .settings-group-content .settings-item:hover {
    border-left-color: #00d4ff;
    background: rgba(0, 212, 255, 0.1);
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.15);
}

:root[data-theme="aurora"] .settings-group-content .settings-item-text {
    color: #000000;
}

:root[data-theme="aurora"] .settings-group-content .settings-item-arrow {
    color: rgba(0, 0, 0, 0.9);
}


/* ========== 螢火蟲主題動畫 ========== */
:root[data-theme="firefly"] body {
    position: relative;
    overflow-x: hidden;
}

:root[data-theme="firefly"] body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(circle at 20% 30%, rgba(250, 204, 21, 0.18) 0%, transparent 35%),
        radial-gradient(circle at 80% 60%, rgba(250, 204, 21, 0.14) 0%, transparent 40%),
        radial-gradient(circle at 50% 80%, rgba(253, 224, 71, 0.12) 0%, transparent 45%);
    z-index: 0;
    pointer-events: none;
    filter: blur(2px);
    animation: fireflyGlow 6s ease-in-out infinite;
}

:root[data-theme="firefly"] body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 120%;
    height: 120%;
    background:
        radial-gradient(circle at 12% 35%, rgba(250, 204, 21, 0.35) 0%, transparent 16%),
        radial-gradient(circle at 28% 70%, rgba(250, 204, 21, 0.28) 0%, transparent 14%),
        radial-gradient(circle at 48% 42%, rgba(250, 204, 21, 0.30) 0%, transparent 15%),
        radial-gradient(circle at 66% 78%, rgba(250, 204, 21, 0.26) 0%, transparent 13%),
        radial-gradient(circle at 86% 50%, rgba(250, 204, 21, 0.30) 0%, transparent 15%);
    z-index: 0;
    pointer-events: none;
    animation: fireflyDrift 9s ease-in-out infinite;
}

@keyframes fireflyGlow {
    0%, 100% { opacity: 0.55; }
    50% { opacity: 0.9; }
}

@keyframes fireflyDrift {
    0% { transform: translate(0, 0); opacity: 0.35; }
    50% { transform: translate(-18px, 10px); opacity: 0.75; }
    100% { transform: translate(0, 0); opacity: 0.35; }
}

/* ========== 飄雪主題動畫 ========== */
:root[data-theme="snow"] body {
    position: relative;
    overflow-x: hidden;
}

:root[data-theme="snow"] body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 120%;
    height: 120%;
    background:
        radial-gradient(circle at 15% 10%, rgba(255, 255, 255, 0.75) 0%, transparent 10%),
        radial-gradient(circle at 35% 20%, rgba(255, 255, 255, 0.65) 0%, transparent 9%),
        radial-gradient(circle at 55% 8%, rgba(255, 255, 255, 0.7) 0%, transparent 10%),
        radial-gradient(circle at 75% 18%, rgba(255, 255, 255, 0.6) 0%, transparent 9%),
        radial-gradient(circle at 90% 12%, rgba(255, 255, 255, 0.65) 0%, transparent 10%);
    z-index: 0;
    pointer-events: none;
    animation: snowFall 8s linear infinite;
}

:root[data-theme="snow"] body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 120%;
    height: 120%;
    background:
        radial-gradient(circle at 22% 15%, rgba(255, 255, 255, 0.55) 0%, transparent 9%),
        radial-gradient(circle at 42% 5%, rgba(255, 255, 255, 0.5) 0%, transparent 8%),
        radial-gradient(circle at 62% 22%, rgba(255, 255, 255, 0.48) 0%, transparent 8%),
        radial-gradient(circle at 82% 7%, rgba(255, 255, 255, 0.5) 0%, transparent 8%);
    z-index: 0;
    pointer-events: none;
    animation: snowDrift 10s linear infinite;
}

@keyframes snowFall {
    0% { transform: translateY(-10%) translateX(0); opacity: 0.0; }
    15% { opacity: 0.8; }
    100% { transform: translateY(10%) translateX(-10px); opacity: 0.0; }
}

@keyframes snowDrift {
    0% { transform: translateY(-12%) translateX(0); opacity: 0.0; }
    15% { opacity: 0.6; }
    100% { transform: translateY(12%) translateX(12px); opacity: 0.0; }
}

    /* ========== 歷史記錄手機適配 ========== */

.history-records-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 10005 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    background: rgba(0, 0, 0, 0.7) !important;
    overflow: hidden !important;
    touch-action: pan-y !important;
}

.history-modal-content {
    background: var(--bg-white);
    border-radius: var(--radius-lg) !important;
    max-height: 100vh !important;
    height: 100vh !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    box-shadow: var(--shadow-lg) !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    touch-action: pan-y !important;
    position: relative !important;
}

.history-modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-white);
    opacity: 0.85;
    z-index: 0;
    pointer-events: none;
}

.history-modal-content.has-background::before {
    opacity: 0.7;
}

.history-modal-header {
    padding: var(--spacing-lg) !important;
    margin-bottom: 0 !important;
    border-bottom: 1px solid var(--border-light) !important;
    background: var(--bg-white) !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 10 !important;
    backdrop-filter: blur(10px) !important;
}

.history-modal-header h2 {
    font-size: var(--font-lg) !important;
    font-weight: var(--font-semibold) !important;
    color: var(--text-primary) !important;
    margin: 0 !important;
}

.history-search-bar {
    padding: 12px var(--spacing-lg) 12px var(--spacing-lg) !important;
    display: flex !important;
    gap: var(--spacing-sm) !important;
    align-items: center !important;
    border-bottom: 1px solid var(--border-light) !important;
    background: rgba(255, 255, 255, 0.6) !important;
    backdrop-filter: blur(10px) !important;
}

.history-search-input-wrap {
    flex: 1 !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    padding: 10px 12px !important;
    border-radius: 14px !important;
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    background: rgba(255, 255, 255, 0.9) !important;
    box-shadow: var(--shadow-sm) !important;
}

.history-search-icon {
    font-size: 16px !important;
    opacity: 0.75 !important;
    line-height: 1 !important;
}

.history-search-input {
    width: 100% !important;
    border: none !important;
    outline: none !important;
    background: transparent !important;
    color: var(--text-primary) !important;
    font-size: var(--font-md) !important;
}

.history-search-input::placeholder {
    color: var(--text-tertiary) !important;
}

.history-search-input-wrap:focus-within {
    border-color: var(--color-primary-rgba-55) !important;
    box-shadow: 0 0 0 3px var(--color-primary-rgba-15) !important;
}

.history-search-clear {
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    background: rgba(255, 255, 255, 0.9) !important;
    padding: 10px 12px !important;
    border-radius: 14px !important;
    color: var(--text-secondary) !important;
    font-size: var(--font-sm) !important;
    cursor: pointer !important;
    box-shadow: var(--shadow-sm) !important;
    transition: background 0.15s ease, transform 0.1s ease !important;
    white-space: nowrap !important;
}

.history-search-clear:hover {
    background: var(--bg-lighter) !important;
}

.history-search-clear:active {
    transform: scale(0.98) !important;
}

.history-close-btn {
    background: none !important;
    border: none !important;
    font-size: 24px !important;
    color: var(--text-tertiary) !important;
    cursor: pointer !important;
    padding: 0 !important;
    width: 32px !important;
    height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--radius-sm) !important;
    transition: var(--transition-fast) !important;
}

.history-close-btn:hover {
    background: var(--bg-light) !important;
    color: var(--text-primary) !important;
}

.history-background-btn {
    background: none !important;
    border: none !important;
    font-size: 20px !important;
    color: var(--text-tertiary) !important;
    cursor: pointer !important;
    padding: 4px 8px !important;
    width: 36px !important;
    height: 36px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--radius-sm) !important;
    transition: var(--transition-fast) !important;
}

.history-background-btn:hover {
    background: var(--bg-light) !important;
    color: var(--text-primary) !important;
}

.history-advisor-btn {
    background: none !important;
    border: none !important;
    font-size: 20px !important;
    color: var(--text-tertiary) !important;
    cursor: pointer !important;
    padding: 4px 8px !important;
    width: 36px !important;
    height: 36px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--radius-sm) !important;
    transition: var(--transition-fast) !important;
}

.history-advisor-btn:hover {
    background: var(--bg-light) !important;
    color: var(--text-primary) !important;
}

/* 理財顧問聊天界面 */
.history-advisor-chat {
    position: fixed !important;
    bottom: 0 !important;
    right: 0 !important;
    width: 400px !important;
    height: 600px !important;
    max-height: 90vh !important;
    background: var(--bg-white) !important;
    border-radius: 16px 16px 0 0 !important;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15) !important;
    display: none !important;
    flex-direction: column !important;
    z-index: 10006 !important;
    border: 1px solid var(--border-light) !important;
}

.history-advisor-chat.show {
    display: flex !important;
}

.advisor-chat-header {
    padding: 16px !important;
    border-bottom: 1px solid var(--border-light) !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    background: var(--bg-white) !important;
    border-radius: 16px 16px 0 0 !important;
}

.advisor-avatar {
    width: 40px !important;
    height: 40px !important;
    border-radius: 50% !important;
    overflow: hidden !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    background: var(--bg-light) !important;
    border: 2px solid var(--border-light) !important;
}

.advisor-avatar-image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
}

.advisor-info {
    flex: 1 !important;
}

.advisor-name {
    font-size: var(--font-md) !important;
    font-weight: var(--font-semibold) !important;
    color: var(--text-primary) !important;
    margin-bottom: 2px !important;
}

.advisor-status {
    font-size: var(--font-xs) !important;
    color: var(--text-secondary) !important;
    transition: color 0.3s ease !important;
}

.advisor-status.typing {
    color: var(--color-primary) !important;
}

.advisor-close-btn {
    background: none !important;
    border: none !important;
    font-size: 20px !important;
    color: var(--text-tertiary) !important;
    cursor: pointer !important;
    padding: 4px !important;
    width: 28px !important;
    height: 28px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--radius-sm) !important;
    transition: var(--transition-fast) !important;
}

.advisor-close-btn:hover {
    background: var(--bg-light) !important;
    color: var(--text-primary) !important;
}

.advisor-chat-messages {
    flex: 1 !important;
    overflow-y: auto !important;
    padding: 16px !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    background: var(--bg-light) !important;
}

.advisor-quick-actions {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    padding: 10px 0 6px 0 !important;
    margin-bottom: 10px !important;
}

.advisor-quick-btn {
    border: 1px solid var(--color-primary-rgba-25) !important;
    background: rgba(255, 255, 255, 0.85) !important;
    color: var(--text-primary) !important;
    padding: 8px 10px !important;
    border-radius: 999px !important;
    font-size: 12px !important;
    cursor: pointer !important;
    box-shadow: var(--shadow-sm) !important;
    transition: transform 0.1s ease, background 0.15s ease, border-color 0.15s ease !important;
}

.advisor-quick-btn:hover {
    border-color: rgba(255, 105, 180, 0.45) !important;
    background: rgba(255, 182, 217, 0.18) !important;
}

.advisor-quick-btn:active {
    transform: scale(0.98) !important;
}

.advisor-quick-btn-secondary {
    border-color: rgba(0, 0, 0, 0.08) !important;
    color: var(--text-secondary) !important;
}

.advisor-message {
    display: flex !important;
    gap: 8px !important;
    align-items: flex-start !important;
}

.advisor-message-user {
    flex-direction: row-reverse !important;
}

.advisor-message-avatar {
    width: 32px !important;
    height: 32px !important;
    border-radius: 50% !important;
    overflow: hidden !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    background: var(--bg-light) !important;
    border: 1px solid var(--border-light) !important;
}

.advisor-message-avatar-image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
}

.advisor-message-content {
    max-width: 75% !important;
    background: var(--bg-white) !important;
    padding: 10px 14px !important;
    border-radius: 12px !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

.advisor-message-user .advisor-message-content {
    background: var(--color-primary) !important;
    color: white !important;
}

.advisor-message-text {
    font-size: var(--font-sm) !important;
    color: var(--text-primary) !important;
    line-height: 1.5 !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
}

.advisor-message-user .advisor-message-text {
    color: white !important;
}

.advisor-message-time {
    font-size: var(--font-xs) !important;
    color: var(--text-tertiary) !important;
    margin-top: 4px !important;
    text-align: right !important;
}

.advisor-message-user .advisor-message-time {
    color: rgba(255, 255, 255, 0.8) !important;
}

.advisor-chat-input-container {
    padding: 12px 16px !important;
    border-top: 1px solid var(--border-light) !important;
    background: var(--bg-white) !important;
    display: flex !important;
    gap: 8px !important;
    align-items: center !important;
}

.advisor-chat-input {
    flex: 1 !important;
    padding: 10px 14px !important;
    border: 1px solid var(--border-light) !important;
    border-radius: 20px !important;
    font-size: var(--font-sm) !important;
    color: var(--text-primary) !important;
    background: var(--bg-light) !important;
    outline: none !important;
}

.advisor-chat-input:focus {
    border-color: var(--color-primary) !important;
    background: var(--bg-white) !important;
}

.advisor-send-btn {
    padding: 10px 20px !important;
    background: var(--color-primary) !important;
    color: white !important;
    border: none !important;
    border-radius: 20px !important;
    font-size: var(--font-sm) !important;
    font-weight: var(--font-medium) !important;
    cursor: pointer !important;
    transition: var(--transition-fast) !important;
}

.advisor-send-btn:hover {
    background: var(--color-primary-dark) !important;
    transform: scale(1.05) !important;
}

.advisor-send-btn:active {
    transform: scale(0.95) !important;
}

/* 小森對話框 */
.mori-dialog-box {
    position: fixed !important;
    bottom: 100px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.95) 100%) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 
                0 2px 8px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
    padding: 18px 22px !important;
    z-index: 10005 !important;
    min-width: 300px !important;
    max-width: min(500px, 85%) !important;
    animation: moriDialogAppear 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    border: 1px solid rgba(255, 255, 255, 0.8) !important;
    transition: all 0.3s ease !important;
}

.mori-dialog-box:hover {
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15), 
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.95) !important;
    transform: translateX(-50%) translateY(-2px) !important;
}

@keyframes moriDialogAppear {
    0% {
        opacity: 0 !important;
        transform: translateX(-50%) translateY(20px) scale(0.9) !important;
    }
    50% {
        transform: translateX(-50%) translateY(-5px) scale(1.02) !important;
    }
    100% {
        opacity: 1 !important;
        transform: translateX(-50%) translateY(0) scale(1) !important;
    }
}

.mori-dialog-content {
    display: flex !important;
    align-items: flex-start !important;
    gap: 14px !important;
}

.mori-avatar {
    width: 56px !important;
    height: 56px !important;
    border-radius: 50% !important;
    overflow: hidden !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 240, 250, 0.9) 100%) !important;
    border: 3px solid rgba(255, 255, 255, 0.8) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
    position: relative !important;
    transition: all 0.3s ease !important;
}

.mori-avatar::before {
    content: '' !important;
    position: absolute !important;
    top: -2px !important;
    left: -2px !important;
    right: -2px !important;
    bottom: -2px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, rgba(138, 43, 226, 0.2) 0%, rgba(255, 182, 193, 0.2) 100%) !important;
    z-index: -1 !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
}

.mori-dialog-box:hover .mori-avatar::before {
    opacity: 1 !important;
}

.mori-avatar-image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    transition: transform 0.3s ease !important;
}

.mori-dialog-box:hover .mori-avatar-image {
    transform: scale(1.05) !important;
}

.mori-message {
    flex: 1 !important;
    font-size: 15px !important;
    color: var(--text-primary) !important;
    line-height: 1.6 !important;
    font-weight: 400 !important;
    letter-spacing: 0.2px !important;
    padding-top: 4px !important;
    word-break: break-word !important;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
}

.advisor-send-btn:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
    transform: none !important;
}

/* 打字指示器 */
.advisor-message-typing {
    opacity: 0.8 !important;
}

.advisor-typing-dots {
    display: flex !important;
    gap: 4px !important;
    align-items: center !important;
    padding: 4px 0 !important;
}

.advisor-typing-dots span {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    background: var(--text-secondary) !important;
    animation: typing-dot 1.4s infinite ease-in-out !important;
}

.advisor-typing-dots span:nth-child(1) {
    animation-delay: 0s !important;
}

.advisor-typing-dots span:nth-child(2) {
    animation-delay: 0.2s !important;
}

.advisor-typing-dots span:nth-child(3) {
    animation-delay: 0.4s !important;
}

@keyframes typing-dot {
    0%, 60%, 100% {
        transform: translateY(0) !important;
        opacity: 0.5 !important;
    }
    30% {
        transform: translateY(-8px) !important;
        opacity: 1 !important;
    }
}

@media (max-width: 480px) {
    .history-advisor-chat {
        width: 100% !important;
        height: 70vh !important;
        border-radius: 16px 16px 0 0 !important;
        right: 0 !important;
        left: 0 !important;
    }
}

.history-background-selector-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 10010 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: rgba(0, 0, 0, 0.8) !important;
}

.history-background-selector-content {
    background: var(--bg-white) !important;
    border-radius: var(--radius-lg) !important;
    padding: 24px !important;
    max-width: 90% !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
    box-shadow: var(--shadow-xl) !important;
}

.background-options-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)) !important;
    gap: 16px !important;
}

.background-option {
    position: relative !important;
    cursor: pointer !important;
    border-radius: var(--radius-md) !important;
    overflow: hidden !important;
    border: 3px solid transparent !important;
    transition: var(--transition-base) !important;
}

.background-option:hover {
    transform: translateY(-4px) !important;
    box-shadow: var(--shadow-md) !important;
}

.background-option.selected {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 2px var(--color-primary-rgba-20) !important;
}

@media (max-width: 480px) {
    .history-background-selector-content {
        padding: 16px !important;
        max-width: 95% !important;
    }
    
    .background-options-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)) !important;
        gap: 12px !important;
    }
}

.history-records-list {
    flex: 1 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 0 !important;
    background: transparent !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    touch-action: pan-y !important;
    will-change: scroll-position !important;
    position: relative !important;
    z-index: 1 !important;
}

.history-transaction-group {
    margin-bottom: var(--spacing-md) !important;
    padding: 0 var(--spacing-lg) !important;
}

.history-group-header {
    font-size: var(--font-sm) !important;
    font-weight: var(--font-semibold) !important;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    margin-bottom: var(--spacing-sm) !important;
    background: var(--bg-light) !important;
    border-radius: var(--radius-sm) !important;
    color: var(--text-primary) !important;
}

.history-transaction-item {
    display: flex !important;
    align-items: flex-start !important;
    padding: var(--spacing-md) !important;
    border-bottom: 1px solid var(--border-light) !important;
    transition: var(--transition-fast) !important;
    gap: var(--spacing-md) !important;
    position: relative !important;
}

.history-transaction-item:hover {
    background: var(--color-primary-rgba-08) !important;
}

.history-transaction-icon {
    width: 36px !important;
    height: 36px !important;
    font-size: 20px !important;
    border-radius: var(--radius-sm) !important;
    background: var(--bg-light) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
}

.history-transaction-info {
    flex: 1 !important;
    min-width: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
}

.history-transaction-category {
    font-size: var(--font-md) !important;
    font-weight: var(--font-medium) !important;
    line-height: 1.4 !important;
    color: var(--text-primary) !important;
    flex: 1 !important;
    word-break: break-word !important;
}

.history-transaction-amount {
    font-size: var(--font-md) !important;
    font-weight: var(--font-semibold) !important;
    white-space: nowrap !important;
    margin-left: var(--spacing-sm) !important;
}

.history-transaction-amount.expense {
    color: var(--color-error) !important;
}

.history-transaction-amount.income {
    color: var(--color-success) !important;
}

.history-transaction-amount.transfer {
    color: var(--color-info) !important;
}

.history-transaction-account,
.history-transaction-member {
    font-size: var(--font-xs) !important;
    margin-top: 3px !important;
    color: var(--text-secondary) !important;
}

.history-transaction-note {
    font-size: var(--font-xs) !important;
    margin-top: 4px !important;
    color: rgba(255, 255, 255, 0.8) !important;
    line-height: 1.4 !important;
    word-break: break-word !important;
}

.history-receipt-container {
    margin-top: var(--spacing-sm) !important;
}

.history-receipt-thumbnail {
    width: 50px !important;
    height: 50px !important;
    border-radius: var(--radius-sm) !important;
    border: 2px solid var(--border-medium) !important;
    cursor: pointer !important;
    object-fit: cover !important;
}

.history-transaction-delete-btn {
    font-size: 16px !important;
    padding: var(--spacing-sm) !important;
    width: 32px !important;
    height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--radius-sm) !important;
    transition: var(--transition-fast) !important;
    background: none !important;
    border: none !important;
    color: var(--text-tertiary) !important;
    cursor: pointer !important;
    flex-shrink: 0 !important;
    align-self: flex-start !important;
    margin-top: 2px !important;
}

.history-transaction-delete-btn:hover {
    background: var(--bg-light) !important;
    color: var(--text-primary) !important;
}

.history-transaction-delete-btn:active {
    background: var(--bg-lighter) !important;
    transform: scale(0.9) !important;
}

/* 手機端歷史記錄優化 */
@media (max-width: 480px) {
    .history-records-modal {
        padding: 0 !important;
        align-items: stretch !important;
    }
    
    .history-modal-content {
        border-radius: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
        max-height: 100vh !important;
        height: 100vh !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    .history-modal-header {
        padding: 12px 16px !important;
        position: sticky !important;
        top: 0 !important;
        background: var(--bg-white) !important;
        z-index: 10 !important;
        flex-shrink: 0 !important;
        border-bottom: 1px solid var(--border-light) !important;
    }
    
    .history-modal-header h2 {
        font-size: 16px !important;
    }
    
    .history-close-btn {
        width: 28px !important;
        height: 28px !important;
        font-size: 20px !important;
    }
    
    .history-records-list {
        flex: 1 !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        padding: 0 !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior: contain !important;
        height: 0 !important;
        touch-action: pan-y !important;
        will-change: scroll-position !important;
    }
    
    .history-transaction-group {
        margin-bottom: 8px !important;
        padding: 0 !important;
    }
    
    .history-group-header {
        font-size: 12px !important;
        padding: 8px 16px !important;
        margin-bottom: 4px !important;
        background: var(--bg-light) !important;
        position: sticky !important;
        top: 0 !important;
        z-index: 5 !important;
    }
    
    .history-transaction-item {
        padding: 12px 16px !important;
        gap: 12px !important;
        flex-wrap: nowrap !important;
        border-bottom: 1px solid var(--border-light) !important;
    }
    
    .history-transaction-item:last-child {
        border-bottom: none !important;
    }
    
    .history-transaction-icon {
        width: 30px !important;
        height: 30px !important;
        font-size: 16px !important;
        flex-shrink: 0 !important;
    }
    
    .history-transaction-info {
        min-width: 0 !important;
        flex: 1 !important;
    }
    
    .history-transaction-info > div:first-child {
        display: flex !important;
        justify-content: space-between !important;
        align-items: flex-start !important;
        gap: 8px !important;
        margin-bottom: 4px !important;
    }
    
    .history-transaction-category {
        font-size: 13px !important;
        flex: 1 !important;
        min-width: 0 !important;
        word-break: break-word !important;
    }
    
    .history-transaction-amount {
        font-size: 13px !important;
        white-space: nowrap !important;
        flex-shrink: 0 !important;
        margin-left: 8px !important;
    }
    
    .history-transaction-account,
    .history-transaction-member {
        font-size: 10px !important;
        margin-top: 2px !important;
    }
    
    .history-transaction-note {
        font-size: 10px !important;
        margin-top: 3px !important;
    }
    
    .history-receipt-thumbnail {
        width: 40px !important;
        height: 40px !important;
    }
    
    .history-transaction-delete-btn {
        width: 32px !important;
        height: 32px !important;
        font-size: 14px !important;
    }
}

/* ========== 分頁教學系統 ========== */
.page-tutorial-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10005;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.page-tutorial-modal .tutorial-content {
    background: white;
    border-radius: 20px;
    padding: 32px 24px;
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    position: relative;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.page-tutorial-modal .tutorial-close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    background: none;
    border: none;
    font-size: 24px;
    color: #999;
    cursor: pointer;
    padding: 8px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: all 0.2s;
}

.page-tutorial-modal .tutorial-close-btn:hover {
    background: var(--bg-soft);
    color: #666;
}

.page-tutorial-modal .tutorial-prev-btn,
.page-tutorial-modal .tutorial-next-btn,
.page-tutorial-modal .tutorial-complete-btn {
    padding: 14px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.page-tutorial-modal .tutorial-prev-btn {
    border: 2px solid #e0e0e0;
    background: white;
    color: #666;
}

.page-tutorial-modal .tutorial-prev-btn:hover {
    background: var(--bg-soft);
    border-color: #d0d0d0;
}

.page-tutorial-modal .tutorial-next-btn,
.page-tutorial-modal .tutorial-complete-btn {
    background: var(--bg-gradient);
    color: var(--text-white);
    box-shadow: 0 4px 12px var(--color-primary-rgba-30);
}

.page-tutorial-modal .tutorial-next-btn:hover,
.page-tutorial-modal .tutorial-complete-btn:hover {
    box-shadow: 0 6px 16px rgba(255, 105, 180, 0.4);
    transform: translateY(-2px);
}

.page-tutorial-modal .tutorial-skip-btn {
    background: none;
    border: none;
    color: #999;
    font-size: 14px;
    cursor: pointer;
    padding: 8px;
    transition: all 0.2s;
}

.page-tutorial-modal .tutorial-skip-btn:hover {
    color: #666;
}

.page-tutorial-modal .tutorial-page-content {
    min-height: 300px;
}

@media (max-width: 480px) {
    .page-tutorial-modal .tutorial-content {
        padding: 24px 20px;
        border-radius: 16px;
    }
    
    .page-tutorial-modal .tutorial-page-content {
        min-height: 250px;
    }
    
    .page-tutorial-modal .tutorial-prev-btn,
    .page-tutorial-modal .tutorial-next-btn,
    .page-tutorial-modal .tutorial-complete-btn {
        padding: 12px;
        font-size: 14px;
    }
}

html {
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
}

body {
    line-height: 1.55;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.page-ledger,
.page-wallet,
.page-investment,
.page-chart,
.page-settings,
.page-input {
    background: var(--bg-primary) !important;
}

.ledger-header,
.investment-page-header,
.chart-header,
.settings-header,
.wallet-header {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 92%, transparent) 0%, var(--color-primary-rgba-08) 100%) !important;
    border-bottom: 1px solid var(--border-light) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.ledger-summary {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 80%, transparent) 0%, var(--color-primary-rgba-10) 100%) !important;
    border-bottom: 1px solid var(--border-light) !important;
}

.summary-stats {
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 12px !important;
}

@media (min-width: 520px) {
    .summary-stats {
        grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    }
}

.stat-item {
    background: var(--bg-white) !important;
    border: 1px solid var(--border-light) !important;
    border-radius: 20px !important;
    padding: 14px 16px !important;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06), 0 3px 10px rgba(0, 0, 0, 0.04), var(--shadow-sm) !important;
    background: linear-gradient(135deg, var(--bg-white) 0%, var(--color-primary-rgba-08) 100%) !important;
}

.stat-label {
    color: var(--text-tertiary) !important;
    letter-spacing: 0.2px;
}

.stat-value {
    font-weight: 800 !important;
    letter-spacing: 0.2px;
}

.summary-stats .stat-value {
    color: var(--text-primary);
}

.summary-stats .stat-value.income {
    color: var(--color-success);
}

.summary-stats .stat-value.expense {
    color: var(--color-danger);
}

.summary-stats .stat-value.transfer {
    color: var(--color-info);
}

.ledger-list,
.investment-records,
.stock-list,
.category-section,
.budget-list {
    padding-left: 16px !important;
    padding-right: 16px !important;
}

@media (min-width: 768px) {
    .ledger-list,
    .investment-records,
    .stock-list,
    .category-section,
    .budget-list {
        padding-left: 24px !important;
        padding-right: 24px !important;
    }
}

.investment-record-item,
.transaction-item,
.category-item,
.settings-item {
    border: 1px solid var(--border-light) !important;
    border-radius: 24px !important;
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.07), 0 4px 12px rgba(0, 0, 0, 0.05), var(--shadow-sm) !important;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast) !important;
}

.investment-record-item:hover,
.transaction-item:hover,
.category-item:hover,
.settings-item:hover {
    transform: translateY(-3px) scale(1.01);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.10), 0 6px 16px rgba(0, 0, 0, 0.06), var(--shadow-md) !important;
    border-color: var(--color-primary-rgba-20) !important;
}

.form-input {
    border-radius: 18px !important;
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 94%, transparent) 0%, var(--color-primary-rgba-08) 100%) !important;
    border-color: var(--border-light) !important;
}

.form-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 4px var(--color-primary-rgba-10) !important;
}

.form-submit-btn,
.form-delete-btn,
.action-btn,
.buy-action-btn-large,
.dca-action-btn-large {
    border-radius: 22px !important;
    letter-spacing: 0.2px;
}

.form-submit-btn {
    box-shadow: 0 14px 30px var(--color-primary-rgba-25), 0 6px 12px var(--color-primary-rgba-15) !important;
}

.form-submit-btn:hover {
    transform: translateY(-2px) rotate(-0.3deg) !important;
}

.form-submit-btn:active {
    transform: translateY(0) scale(0.98) !important;
}

.fab-btn {
    border-radius: 22px !important;
    box-shadow: 0 18px 38px var(--color-primary-rgba-30), 0 8px 16px var(--color-primary-rgba-20), var(--shadow-primary-lg) !important;
}

.bottom-nav {
    background: linear-gradient(135deg, color-mix(in srgb, var(--bg-white) 82%, transparent) 0%, var(--color-primary-rgba-08) 100%) !important;
    border-top: 1px solid var(--border-light) !important;
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
}

.nav-item {
    border-radius: 18px;
}

.nav-item.active {
    background: color-mix(in srgb, var(--color-primary-rgba-10) 100%, transparent) !important;
}

.ui-icon-img {
    display: inline-block;
    width: 20px;
    height: 20px;
    object-fit: contain;
    pointer-events: none;
}


/* 3-dots menu container */
.record-menu-container {
    position: absolute;
    top: 16px;
    right: 16px;
    z-index: 10;
}

/* The 3-dots button */
.record-menu-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-tertiary);
    font-size: 18px;
    transition: background 0.2s;
    padding: 0;
}

.record-menu-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: var(--text-primary);
}

/* Dropdown menu */
.record-menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 4px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    min-width: 140px;
    display: none; /* hidden by default */
    flex-direction: column;
    overflow: hidden;
    z-index: 20;
    border: 1px solid rgba(0,0,0,0.05);
    padding: 6px;
}

.record-menu-dropdown.show {
    display: flex;
    animation: menuFadeIn 0.2s ease;
}

@keyframes menuFadeIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
}

.record-menu-item {
    padding: 10px 12px;
    font-size: 14px;
    color: var(--text-primary);
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    border-radius: 8px;
    width: 100%;
}

.record-menu-item:hover {
    background: rgba(0, 0, 0, 0.04);
}

.record-menu-item.delete {
    color: #ef4444;
}

.record-menu-item.delete:hover {
    background: #fee2e2;
}

@media (max-width: 576px) {
    .annual-report-modal {
        padding: 12px !important;
        align-items: flex-start !important;
    }

    .annual-report-content {
        width: 100% !important;
        max-width: 100% !important;
        border-radius: 16px !important;
        padding: 16px !important;
        max-height: 92vh !important;
    }

    .annual-report-header {
        margin-bottom: 16px !important;
        padding-bottom: 10px !important;
    }

    .annual-report-title {
        font-size: 18px !important;
        line-height: 1.25 !important;
        padding-right: 8px !important;
        word-break: break-word !important;
    }

    .annual-report-body {
        gap: 16px !important;
    }

    .annual-report-total {
        padding: 16px !important;
    }

    .annual-report-total-value {
        font-size: 26px !important;
    }

    .annual-report-ranking {
        padding: 16px !important;
    }

    .annual-report-investment-grid {
        grid-template-columns: 1fr !important;
    }

    .annual-report-card {
        padding: 16px !important;
    }

    .annual-report-card-value {
        font-size: 20px !important;
    }

    .annual-report-top-category {
        padding: 16px !important;
    }

    .annual-report-top-name {
        font-size: 22px !important;
    }

    .annual-report-rank-row {
        flex-wrap: wrap !important;
        gap: 6px 10px !important;
        align-items: flex-start !important;
    }

    .annual-report-rank-index {
        width: 22px !important;
        flex: 0 0 22px !important;
    }

    .annual-report-rank-category {
        min-width: 0 !important;
        flex: 1 1 100% !important;
        font-size: 14px !important;
    }

    .annual-report-rank-amount {
        flex: 0 0 auto !important;
        font-size: 14px !important;
    }

    .annual-report-rank-percent {
        width: auto !important;
        margin-left: 0 !important;
        text-align: left !important;
    }

    .annual-report-footer {
        margin-top: 16px !important;
        padding-top: 16px !important;
    }

    #exportAnnualReportBtn {
        width: 100% !important;
    }
}


/* 3-dots menu container */
.record-menu-container {
    position: absolute;
    top: 16px;
    right: 16px;
    z-index: 10;
}

/* The 3-dots button */
.record-menu-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-tertiary);
    font-size: 18px;
    transition: background 0.2s;
    padding: 0;
}

.record-menu-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: var(--text-primary);
}

/* Dropdown menu */
.record-menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 4px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    min-width: 140px;
    display: none; /* hidden by default */
    flex-direction: column;
    overflow: hidden;
    z-index: 20;
    border: 1px solid rgba(0,0,0,0.05);
    padding: 6px;
}

.record-menu-dropdown.show {
    display: flex;
    animation: menuFadeIn 0.2s ease;
}

@keyframes menuFadeIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
}

.record-menu-item {
    padding: 10px 12px;
    font-size: 14px;
    color: var(--text-primary);
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    border-radius: 8px;
    width: 100%;
}

.record-menu-item:hover {
    background: rgba(0, 0, 0, 0.04);
}

.record-menu-item.delete {
    color: #ef4444;
}

.record-menu-item.delete:hover {
    background: #fee2e2;
}


/* 3-dots menu container */
.record-menu-container {
    position: absolute;
    top: 16px;
    right: 16px;
    z-index: 10;
}

/* The 3-dots button */
.record-menu-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-tertiary);
    font-size: 18px;
    transition: background 0.2s;
    padding: 0;
}

.record-menu-btn:hover {
    background: rgba(0, 0, 0, 0.05);
    color: var(--text-primary);
}

/* Dropdown menu */
.record-menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 4px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    min-width: 140px;
    display: none; /* hidden by default */
    flex-direction: column;
    overflow: hidden;
    z-index: 20;
    border: 1px solid rgba(0,0,0,0.05);
    padding: 6px;
}

.record-menu-dropdown.show {
    display: flex;
    animation: menuFadeIn 0.2s ease;
}

@keyframes menuFadeIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
}

.record-menu-item {
    padding: 10px 12px;
    font-size: 14px;
    color: var(--text-primary);
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    border-radius: 8px;
    width: 100%;
}

.record-menu-item:hover {
    background: rgba(0, 0, 0, 0.04);
}

.record-menu-item.delete {
    color: #ef4444;
}

.record-menu-item.delete:hover {
    background: #fee2e2;
}


/* =============================
   深色主題：股利再購買卡片文字強制黑色
   ============================= */
:root.dark .record-card.dividend-reinvest {
    color: #fff9d2 !important;
}

/* =============================
   多圖片上傳樣式
   ============================= */
.image-preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
}

.image-count {
    font-size: 14px;
    color: #666;
    font-weight: 500;
}

:root.dark .image-count {
    color: #ccc;
}

.image-gallery-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.image-gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    max-height: 120px;
    overflow-y: auto;
    padding: 8px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
}

.image-thumbnail {
    position: relative;
    width: 60px;
    height: 60px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.image-thumbnail:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.thumbnail-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.thumbnail-remove {
    position: absolute;
    top: -4px;
    right: -4px;
    width: 20px;
    height: 20px;
    background: #ff4757;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.image-thumbnail:hover .thumbnail-remove {
    opacity: 1;
}

.thumbnail-remove:hover {
    background: #ff3838;
}

.main-preview {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    min-height: 200px;
}

.main-preview img {
    max-width: 100%;
    max-height: 300px;
    border-radius: 8px;
    object-fit: contain;
}

/* =============================
   記帳日記詳情對話框樣式
   ============================= */
.entry-detail-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.entry-detail-content {
    width: 95%;
    max-width: 600px;
    max-height: 90vh;
    background: var(--bg-card, var(--bg-white));
    border-radius: 16px;
    overflow: hidden;
    box-shadow: var(--shadow-primary-lg);
    color: var(--text-primary);
}

:root.dark .entry-detail-content {
    background: #2c3e50;
    color: #ecf0f1;
}

.entry-detail-info {
    padding: 20px;
    border-bottom: 1px solid var(--border-light);
}

:root.dark .entry-detail-info {
    border-bottom-color: #34495e;
}

.entry-detail-category {
    font-size: 18px;
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: 8px;
    text-shadow: 0 1px 2px var(--color-primary-rgba-20);
}

:root.dark .entry-detail-category {
    color: #ecf0f1;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.1);
}

.entry-detail-amount {
    font-size: 24px;
    font-weight: 700;
    color: var(--color-secondary);
    margin-bottom: 8px;
    text-shadow: 0 1px 3px var(--color-secondary-rgba-30);
}

.entry-detail-amount.income {
    color: var(--color-accent);
    text-shadow: 0 1px 3px var(--color-accent-rgba-30);
}

.entry-detail-amount.transfer {
    color: var(--color-primary-light);
    text-shadow: 0 1px 3px var(--color-primary-light-rgba-30);
}

.entry-detail-date {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    text-shadow: 0 1px 2px var(--text-secondary-rgba-20);
}

:root.dark .entry-detail-date {
    color: #95a5a6;
    text-shadow: 0 1px 2px rgba(149, 165, 166, 0.2);
}

.entry-detail-note {
    font-size: 16px;
    color: var(--text-primary);
    line-height: 1.5;
    text-shadow: 0 1px 2px var(--text-primary-rgba-10);
}

:root.dark .entry-detail-note {
    color: #ecf0f1;
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.1);
}

.entry-detail-images {
    padding: 20px;
    max-height: 50vh;
    overflow-y: auto;
}

.images-title {
    font-size: 16px;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 16px;
    text-shadow: 0 1px 2px rgba(44, 62, 80, 0.1);
}

:root.dark .images-title {
    color: #ecf0f1;
    text-shadow: 0 1px 2px rgba(236, 240, 241, 0.1);
}

.images-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 12px;
}

.images-gallery img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.images-gallery img:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

/* 交易記錄中的多圖片樣式 */
.transaction-receipt-gallery {
    display: flex;
    align-items: center;
    padding: 4px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    transition: background-color 0.2s ease;
}

.transaction-receipt-gallery:hover {
    background: rgba(255, 255, 255, 0.1);
}

.receipt-thumbnail-small {
    transition: transform 0.2s ease;
}

.receipt-thumbnail-small:hover {
    transform: scale(1.1);
}

.receipt-thumb.entry-detail-info {
    padding: 20px;
    border-bottom: 1px solid var(--border-light);
}

.entry-detail-actions {
    display: flex;
    justify-content: flex-end;
    padding: 16px 20px 0;
}

.entry-detail-edit-btn {
    border: none;
    background: var(--bg-gradient);
    color: var(--text-white);
    font-weight: 600;
    border-radius: 999px;
    padding: 8px 18px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    box-shadow: var(--shadow-primary);
    transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s;
}

.entry-detail-edit-btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-primary-lg);
}

.entry-detail-edit-btn:active {
    transform: scale(0.97);
}

.entry-detail-edit-btn.is-active {
    opacity: 0.75;
}

.entry-detail-edit {
    padding: 0 20px 20px;
    margin-top: 8px;
    border-top: 1px dashed var(--border-light);
}

.entry-detail-edit .form-field {
    margin-bottom: 12px;
}

.entry-edit-row {
    display: flex;
    gap: 12px;
}

.entry-edit-half {
    flex: 1;
}

.entry-edit-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding-top: 4px;
}

.entry-edit-cancel,
.entry-edit-save {
    border: none;
    border-radius: 12px;
    padding: 10px 18px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease, opacity 0.2s ease;
}

.entry-edit-cancel {
    background: rgba(0,0,0,0.05);
    color: var(--text-primary);
}

.entry-edit-save {
    background: var(--bg-gradient, linear-gradient(135deg, #ff7eb3, #ff758c));
    color: #fff;
    box-shadow: var(--shadow-primary, 0 12px 24px rgba(255, 118, 164, 0.35));
}

.entry-edit-cancel:hover,
.entry-edit-save:hover {
    transform: translateY(-1px);
}

.entry-edit-cancel:active,
.entry-edit-save:active {
    transform: scale(0.97);
}

/* 響應式設計 */
@media (max-width: 768px) {
    .entry-detail-content {
        width: 98%;
        max-height: 95vh;
    }
    
    .images-gallery {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 8px;
    }
    
    .images-gallery img {
        height: 120px;
    }
    
    .image-gallery {
        max-height: 100px;
    }
    
    .image-thumbnail {
        width: 50px;
        height: 50px;
    }
}

/* 設置群組樣式 */
.settings-group {
    margin-bottom: 16px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    overflow: hidden;
}

.settings-group-header {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
}

.settings-group-header:hover {
    background: rgba(255, 255, 255, 0.95);
}

.settings-group-icon {
    font-size: 20px;
    margin-right: 12px;
}

.settings-group-title {
    flex: 1;
    font-size: 16px;
    font-weight: 600;
    color: #000000;
}

.settings-group-arrow {
    font-size: 14px;
    color: #000000;
    transition: transform 0.3s ease;
    margin-left: 8px;
}

.settings-group-content {
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.8);
}

.settings-group-content .settings-item {
    display: flex;
    align-items: center;
    padding: 12px 20px 12px 32px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
}

.settings-group-content .settings-item:hover {
    border-left-color: var(--color-primary);
    background: color-mix(in srgb, var(--color-primary) 10%, transparent);
}

.settings-group-content .settings-item-text {
    flex: 1;
    font-size: 14px;
    color: #000000;
}

.settings-group-content .settings-item-arrow {
    font-size: 14px;
    color: #000000;
}

/* 深色主題下的群組樣式 */
.dark-theme .settings-group {
    background: rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.15);
}

.dark-theme .settings-group-header {
    background: rgba(255, 255, 255, 0.05);
}

.dark-theme .settings-group-header:hover {
    background: rgba(255, 255, 255, 0.1);
}

.dark-theme .settings-group-title {
    color: #ffffff;
}

/* 淺色主題下的群組樣式 */
.light-theme .settings-group {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(0, 0, 0, 0.1);
}

.light-theme .settings-group-header {
    background: rgba(255, 255, 255, 0.9);
}

.light-theme .settings-group-header:hover {
    background: rgba(255, 255, 255, 0.95);
}

.light-theme .settings-group-title {
    color: #000000;
}

.light-theme .settings-group-arrow {
    color: #000000;
}

.light-theme .settings-group-content {
    background: rgba(255, 255, 255, 0.8);
}

.light-theme .settings-group-content .settings-item {
    padding: 12px 20px 12px 32px;
}

.light-theme .settings-group-content .settings-item-text {
    color: #000000;
}

.light-theme .settings-group-content .settings-item-arrow {
    color: #000000;
}

.light-theme .settings-group-content .settings-item:hover {
    border-left-color: var(--color-primary);
    background: color-mix(in srgb, var(--color-primary) 10%, transparent);
}

/* ========== 星雲漂移主題 ========== */
::root[data-theme="nebula"] {
    --color-primary: #ffffff;
    --color-primary-light: #f0f0f0;
    --color-primary-lighter: #e0e0e0;
    --color-primary-dark: #d0d0d0;
    --border-primary: rgba(255, 255, 255, 0.3);
    --bg-white: #000000;
    --bg-light: #0a0a0a;
    --bg-primary: #000000;
    --bg-secondary: #1a1a1a;
    --bg-accent: #2a2a2a;
    --text-primary: rgba(255, 255, 255, 0.95);
    --text-secondary: rgba(255, 255, 255, 0.75);
    --text-tertiary: rgba(255, 255, 255, 0.55);
    --text-strong: rgba(255, 255, 255, 1);
    --text-muted: rgba(255, 255, 255, 0.4);
    --shadow-light: rgba(0, 0, 0, 0.3);
    --shadow-medium: rgba(0, 0, 0, 0.5);
    --shadow-strong: rgba(0, 0, 0, 0.7);
    --border-light: rgba(255, 255, 255, 0.1);
    --border-medium: rgba(255, 255, 255, 0.2);
    --border-strong: rgba(255, 255, 255, 0.3);
    --bg-light-gradient: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, #0a0a0a 0%, #000000 100%);
}

::root[data-theme="nebula"] body {
    background: #000000;
    color: rgba(255, 255, 255, 0.95);
    overflow-x: hidden;
}

::root[data-theme="nebula"] body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(200, 200, 255, 0.06) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(255, 200, 255, 0.04) 0%, transparent 60%),
        linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.02) 50%, transparent 70%);
    animation: nebulaDrift 20s ease-in-out infinite alternate;
    pointer-events: none;
    z-index: -1;
}

@keyframes nebulaDrift {
    0% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 0.6;
    }
    25% {
        transform: translate(30px, -20px) rotate(90deg) scale(1.1);
        opacity: 0.8;
    }
    50% {
        transform: translate(-20px, 30px) rotate(180deg) scale(0.9);
        opacity: 0.7;
    }
    75% {
        transform: translate(-30px, -10px) rotate(270deg) scale(1.05);
        opacity: 0.9;
    }
    100% {
        transform: translate(10px, 20px) rotate(360deg) scale(1);
        opacity: 0.6;
    }
}

::root[data-theme="nebula"] body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 10% 10%, rgba(255, 255, 255, 0.15) 1px, transparent 2px),
        radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 1px, transparent 2px),
        radial-gradient(circle at 50% 30%, rgba(255, 255, 255, 0.12) 1px, transparent 2px),
        radial-gradient(circle at 70% 40%, rgba(255, 255, 255, 0.08) 1px, transparent 2px),
        radial-gradient(circle at 90% 50%, rgba(255, 255, 255, 0.14) 1px, transparent 2px),
        radial-gradient(circle at 20% 60%, rgba(255, 255, 255, 0.09) 1px, transparent 2px),
        radial-gradient(circle at 40% 70%, rgba(255, 255, 255, 0.11) 1px, transparent 2px),
        radial-gradient(circle at 60% 80%, rgba(255, 255, 255, 0.13) 1px, transparent 2px),
        radial-gradient(circle at 80% 90%, rgba(255, 255, 255, 0.07) 1px, transparent 2px);
    background-size: 200px 200px, 150px 150px, 180px 180px, 220px 220px, 160px 160px, 
                    190px 190px, 170px 170px, 210px 210px, 140px 140px;
    animation: starryTwinkle 8s ease-in-out infinite alternate;
    pointer-events: none;
    z-index: -1;
}

@keyframes starryTwinkle {
    0%, 100% {
        opacity: 0.3;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.05);
    }
}

/* 黑白律動效果 */
::root[data-theme="nebula"] .card,
::root[data-theme="nebula"] .record-card,
::root[data-theme="nebula"] .ledger-card {
    animation: blackWhiteRhythm 4s ease-in-out infinite alternate;
    transform-origin: center;
}

@keyframes blackWhiteRhythm {
    0% {
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.15);
    }
    50% {
        box-shadow: 0 6px 30px rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.25);
    }
    100% {
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.15);
    }
}

/* 流星動態效果 */
::root[data-theme="nebula"] .meteor {
    position: fixed;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
    animation: meteorShower 3s linear infinite;
    pointer-events: none;
    z-index: 1000;
}

::root[data-theme="nebula"] .meteor::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
    animation: meteorTail 3s linear infinite;
}

@keyframes meteorShower {
    0% {
        transform: translate(0, -100vh) rotate(-45deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translate(100vw, 100vh) rotate(-45deg);
        opacity: 0;
    }
}

@keyframes meteorTail {
    0%, 100% {
        width: 0;
        opacity: 0;
    }
    10% {
        width: 50px;
        opacity: 1;
    }
    90% {
        width: 100px;
        opacity: 0.5;
    }
}

/* 按鈕懸停效果 */
::root[data-theme="nebula"] button:hover,
::root[data-theme="nebula"] .btn:hover {
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
    transition: all 0.3s ease;
}

/* 輸入框焦點效果 */
::root[data-theme="nebula"] input:focus,
::root[data-theme="nebula"] textarea:focus {
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
}


/* 主頁面樣式 */
.page-wishlist-savings {
    position: fixed;
    inset: 0;
    background: linear-gradient(180deg, #fdf2ff 0%, #fefaf2 40%, #ffffff 100%);
    z-index: 1000;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 80px;
}

.wishlist-savings-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 28px 28px 12px;
}

.wishlist-savings-eyebrow {
    margin: 0;
    font-size: 13px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: #a855f7;
    font-weight: 600;
}

.wishlist-savings-title {
    margin: 4px 0 0;
    font-size: 28px;
    font-weight: 700;
    color: #2b2c34;
}

.wishlist-summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
    padding: 0 28px 20px;
}

.wishlist-summary-card {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(209, 153, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(10px);
}

.wishlist-summary-card.accent {
    background: linear-gradient(135deg, #fbc2eb, #a18cd1);
    color: white;
}

.wishlist-summary-label {
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: inherit;
    opacity: 0.8;
}

.wishlist-summary-value {
    font-size: 28px;
    font-weight: 700;
    margin: 6px 0;
    color: inherit;
}

.wishlist-summary-subtext {
    margin: 0;
    font-size: 13px;
    color: inherit;
    opacity: 0.75;
}

/* 選項卡樣式 */
.wishlist-savings-tabs {
    display: flex;
    justify-content: center;
    gap: 12px;
    padding: 12px 28px 0;
}

.tab-btn {
    flex: 1;
    max-width: 220px;
    border: none;
    padding: 14px 18px;
    border-radius: 999px;
    font-size: 15px;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.7);
    color: #8f93a0;
    box-shadow: inset 0 0 0 1px rgba(233, 210, 255, 0.8);
    cursor: pointer;
    transition: all 0.3s ease;
}

.tab-btn.active {
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    color: #fff;
    box-shadow: 0 12px 25px rgba(255, 154, 158, 0.35);
}

.tab-btn:hover {
    transform: translateY(-2px);
}

/* 選項卡內容 */
.tab-content {
    display: none;
    padding: 24px 28px 0;
}

.tab-content.active {
    display: block;
}

.wishlist-toolbar,
.savings-toolbar {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 16px;
}

.wishlist-search {
    flex: 1;
    min-width: 220px;
    display: flex;
    align-items: center;
    background: #fff;
    border-radius: 16px;
    padding: 10px 14px;
    box-shadow: inset 0 0 0 1px rgba(234, 222, 255, 0.8);
}

.wishlist-search span {
    margin-right: 10px;
    font-size: 18px;
    color: #c084fc;
}

.wishlist-search input {
    border: none;
    flex: 1;
    font-size: 14px;
    background: transparent;
    outline: none;
    color: #333;
}

.wishlist-filters,
.savings-filter-group {
    display: flex;
    gap: 10px;
}

.wishlist-filters select,
.savings-filter-group select {
    border: none;
    border-radius: 14px;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: inset 0 0 0 1px rgba(232, 219, 255, 0.8);
    font-size: 13px;
    color: #5f6270;
    cursor: pointer;
}

.add-btn {
    background: linear-gradient(120deg, #f6d365, #fda085);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 16px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 12px 25px rgba(246, 211, 101, 0.45);
}

.add-btn:hover {
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 16px 30px rgba(246, 211, 101, 0.55);
}

/* 列表容器 */
.wishlist-list,
.savings-list {
    display: flex;
    flex-direction: column;
    gap: 18px;
}

/* 想買的東西項目卡片 */
.wishlist-item {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.88), rgba(248, 244, 255, 0.9));
    border-radius: 22px;
    padding: 22px;
    border: 1px solid rgba(182, 149, 255, 0.25);
    box-shadow: 0 20px 40px rgba(94, 76, 255, 0.12);
    margin-bottom: 18px;
    overflow: hidden;
    transition: transform 0.35s ease, box-shadow 0.35s ease;
}

.wishlist-item::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(255, 146, 233, 0.18), rgba(141, 197, 255, 0.12));
    opacity: 0;
    transition: opacity 0.35s ease;
    pointer-events: none;
}

.wishlist-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 25px 60px rgba(94, 76, 255, 0.18);
}

.wishlist-item:hover::before {
    opacity: 1;
}

.wishlist-item-top {
    display: flex;
    justify-content: space-between;
    gap: 18px;
}

.wishlist-item-title-group {
    flex: 1;
}

.wishlist-item-title {
    font-size: 20px;
    font-weight: 700;
    color: #2b2c34;
    margin: 4px 0 6px;
}

.wishlist-item-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.wishlist-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.5px;
    background: rgba(46, 52, 64, 0.08);
    color: #4a4e69;
}

.wishlist-chip.importance.high {
    background: rgba(255, 99, 132, 0.18);
    color: #d7263d;
}

.wishlist-chip.importance.medium {
    background: rgba(255, 214, 102, 0.22);
    color: #c4731a;
}

.wishlist-chip.importance.low {
    background: rgba(134, 166, 255, 0.22);
    color: #4a63d8;
}

.wishlist-item-type {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 600;
    color: #6a00f4;
    background: rgba(106, 0, 244, 0.08);
    padding: 4px 12px;
    border-radius: 999px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.wishlist-item-amount-block {
    text-align: right;
    min-width: 140px;
}

.wishlist-amount-label {
    display: block;
    font-size: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: rgba(43, 44, 52, 0.6);
}

.wishlist-item-amount {
    font-size: 26px;
    font-weight: 700;
    margin-top: 4px;
    color: #6a00f4;
}

.wishlist-item-body {
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1px dashed rgba(106, 0, 244, 0.15);
}

.wishlist-item-importance {
    display: flex;
    gap: 4px;
    font-size: 18px;
    margin-bottom: 12px;
}

.wishlist-item-importance .star {
    color: rgba(43, 44, 52, 0.15);
    transition: transform 0.2s ease, color 0.2s ease;
}

.wishlist-item-importance .star.filled {
    color: #ffaf36;
    text-shadow: 0 5px 15px rgba(255, 175, 54, 0.4);
}

.wishlist-info-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 12px 16px;
    border-radius: 14px;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(147, 112, 219, 0.2);
    margin-bottom: 10px;
}

.wishlist-info-label {
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: rgba(94, 76, 255, 0.9);
}

.wishlist-info-row p {
    margin: 0;
    color: #54546c;
    line-height: 1.6;
}

.wishlist-item-necessary.yes {
    background: rgba(76, 201, 91, 0.18);
    color: #1b7d3a;
}

.wishlist-item-necessary.no {
    background: rgba(255, 107, 107, 0.16);
    color: #b42323;
}

.wishlist-item-actions {
    display: flex;
    gap: 10px;
    margin-top: 18px;
}

.wishlist-item-action-btn {
    background: var(--bg-secondary);
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s ease;
}

.wishlist-item-action-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.wishlist-item-action-btn.delete {
    background: #dc3545;
    color: white;
}

.wishlist-item-action-btn.delete:hover {
    background: #c82333;
}

/* 存錢目標項目卡片 */
.savings-item {
    background: var(--bg-white);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.savings-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.savings-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.savings-item-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 4px 0;
}

.savings-item-priority {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.savings-item-priority.high {
    background: #dc3545;
    color: white;
}

.savings-item-priority.medium {
    background: #ffc107;
    color: #212529;
}

.savings-item-priority.low {
    background: #6c757d;
    color: white;
}

.savings-item-amounts {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin: 16px 0;
}

.savings-amount-item {
    text-align: center;
}

.savings-amount-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.savings-amount-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.savings-amount-value.target {
    color: var(--accent-color);
}

.savings-amount-value.current {
    color: #28a745;
}

.savings-amount-value.remaining {
    color: #dc3545;
}

/* 進度條 */
.savings-progress {
    margin: 16px 0;
}

.savings-progress-bar {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin: 8px 0;
}

.savings-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #28a745, #20c997);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.savings-progress-text {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-secondary);
}

.savings-monthly-info {
    background: var(--bg-secondary);
    padding: 12px;
    border-radius: 8px;
    margin: 12px 0;
    font-size: 14px;
    color: var(--text-secondary);
}

.savings-status {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
    margin: 8px 0;
}

.savings-status.active {
    background: #d4edda;
    color: #155724;
}

.savings-status.paused {
    background: #fff3cd;
    color: #856404;
}

.savings-status.completed {
    background: #d1ecf1;
    color: #0c5460;
}

.savings-item-actions {
    display: flex;
    gap: 8px;
    margin-top: 12px;
}

.savings-item-action-btn {
    background: var(--bg-secondary);
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s ease;
}

.savings-item-action-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.savings-item-action-btn.delete {
    background: #dc3545;
    color: white;
}

.savings-item-action-btn.delete:hover {
    background: #c82333;
}

/* 願望清單表單頁面專用樣式 */
.page-wishlist-form {
    background: linear-gradient(165deg, #fdf2ff 0%, #fefaf2 40%, #ffffff 100%);
    z-index: 1001;
}

.page-wishlist-form .wishlist-form-header {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(182, 149, 255, 0.25);
    padding: 28px 28px 16px;
}

.page-wishlist-form .wishlist-form-title {
    font-size: 26px;
    font-weight: 700;
    color: #2b2c34;
    margin: 0;
}

.page-wishlist-form .back-btn {
    background: rgba(106, 0, 244, 0.08);
    border: 1px solid rgba(106, 0, 244, 0.2);
    color: #6a00f4;
    padding: 8px 16px;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.page-wishlist-form .back-btn:hover {
    background: rgba(106, 0, 244, 0.15);
    transform: translateY(-1px);
}

.page-wishlist-form .wishlist-form-container {
    padding: 10px 28px 28px;
    max-width: 600px;
    margin: 0 auto;
}

.page-wishlist-form .form-group {
    margin-bottom: 24px;
}

.page-wishlist-form .form-label {
    font-size: 14px;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: rgba(49, 46, 71, 0.8);
    margin-bottom: 10px;
}

.page-wishlist-form .form-input,
.page-wishlist-form .form-select,
.page-wishlist-form .form-textarea {
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.6);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(219, 208, 255, 0.75));
    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.6), 0 10px 30px rgba(113, 63, 158, 0.15);
    color: #2b2d42;
    padding: 14px 18px;
    font-size: 16px;
}

.page-wishlist-form .form-input:focus,
.page-wishlist-form .form-select:focus,
.page-wishlist-form .form-textarea:focus {
    border-color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 0 0 4px rgba(130, 71, 229, 0.15), inset 0 0 10px rgba(255, 255, 255, 0.45);
}

.page-wishlist-form .form-textarea {
    min-height: 110px;
    border-radius: 20px;
    resize: vertical;
}

.page-wishlist-form .radio-group {
    gap: 12px;
}

.page-wishlist-form .radio-label {
    background: rgba(255, 255, 255, 0.65);
    padding: 8px 16px;
    border-radius: 999px;
    border: 1px solid transparent;
    transition: all 0.2s ease;
}

.page-wishlist-form .radio-input:checked + .radio-text {
    color: #6a00f4;
}

.page-wishlist-form .radio-label:has(.radio-input:checked) {
    border-color: rgba(106, 0, 244, 0.35);
    box-shadow: 0 8px 18px rgba(106, 0, 244, 0.15);
}

.page-wishlist-form .star-rating {
    justify-content: space-between;
}

.page-wishlist-form .star-btn {
    width: 48px;
    height: 48px;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.5);
    font-size: 22px;
    color: rgba(43, 45, 66, 0.3);
    box-shadow: inset 0 -4px 15px rgba(0, 0, 0, 0.05);
}

.page-wishlist-form .star-btn.active,
.page-wishlist-form .star-btn:hover {
    color: #ffaf36;
    background: linear-gradient(135deg, #fff4d4, #ffe0ac);
    border-color: rgba(255, 175, 54, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 12px 25px rgba(255, 175, 54, 0.35);
}

.page-wishlist-form .form-actions {
    display: flex;
    gap: 16px;
    margin-top: 32px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.4);
}

.page-wishlist-form .btn {
    flex: 1;
    padding: 14px 20px;
    border-radius: 16px;
    font-size: 15px;
    letter-spacing: 0.5px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.page-wishlist-form .btn.ghost {
    background: rgba(255, 255, 255, 0.4);
    color: #6a00f4;
    border: 1px solid rgba(106, 0, 244, 0.2);
}

.page-wishlist-form .btn.ghost:hover {
    background: rgba(255, 255, 255, 0.7);
    transform: translateY(-1px);
}

.page-wishlist-form .btn.primary {
    background: linear-gradient(135deg, #ff8fb1, #8f7cff);
    border: none;
    box-shadow: 0 15px 35px rgba(143, 124, 255, 0.4);
    color: white;
}

.page-wishlist-form .btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 45px rgba(143, 124, 255, 0.45);
}

/* 表單元素樣式 */
.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    font-size: 16px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    font-size: 16px;
    background: var(--bg-white);
    color: var(--text-primary);
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
}

.modal-card {
    background: rgba(255, 255, 255, 0.6);
    border-radius: 28px;
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(20px);
    box-shadow: 0 25px 55px rgba(62, 17, 85, 0.25);
}

#wishlistModal .modal-card {
    background: linear-gradient(165deg, rgba(255, 255, 255, 0.92), rgba(238, 230, 255, 0.85));
    border: 1px solid rgba(173, 132, 255, 0.35);
    box-shadow: 0 25px 80px rgba(83, 58, 135, 0.35);
}

#wishlistModal .modal-header {
    border-bottom: none;
    padding-bottom: 8px;
}

#wishlistModal .modal-label {
    letter-spacing: 4px;
    font-size: 12px;
    text-transform: uppercase;
    color: rgba(106, 0, 244, 0.65);
}

#wishlistModal .modal-title {
    font-size: 26px;
    font-weight: 700;
    color: #2b2d42;
}

#wishlistModal .wishlist-form-container {
    padding: 10px 28px 28px;
    display: flex;
    flex-direction: column;
    gap: 18px;
}

#wishlistModal .form-group {
    margin-bottom: 0;
}

#wishlistModal .form-label {
    font-size: 14px;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: rgba(49, 46, 71, 0.8);
}

#wishlistModal .form-input,
#wishlistModal .form-select,
#wishlistModal .form-textarea {
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.6);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(219, 208, 255, 0.75));
    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.6), 0 10px 30px rgba(113, 63, 158, 0.15);
    color: #2b2d42;
}

#wishlistModal .form-input:focus,
#wishlistModal .form-select:focus,
#wishlistModal .form-textarea:focus {
    border-color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 0 0 4px rgba(130, 71, 229, 0.15), inset 0 0 10px rgba(255, 255, 255, 0.45);
}

#wishlistModal .form-textarea {
    min-height: 110px;
    border-radius: 20px;
}

#wishlistModal .radio-group {
    gap: 12px;
}

#wishlistModal .radio-label {
    background: rgba(255, 255, 255, 0.65);
    padding: 8px 16px;
    border-radius: 999px;
    border: 1px solid transparent;
    transition: all 0.2s ease;
}

#wishlistModal .radio-input:checked + .radio-text {
    color: #6a00f4;
}

#wishlistModal .radio-label:has(.radio-input:checked) {
    border-color: rgba(106, 0, 244, 0.35);
    box-shadow: 0 8px 18px rgba(106, 0, 244, 0.15);
}

#wishlistModal .star-rating {
    justify-content: space-between;
}

#wishlistModal .star-btn {
    width: 48px;
    height: 48px;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.5);
    font-size: 22px;
    color: rgba(43, 45, 66, 0.3);
    box-shadow: inset 0 -4px 15px rgba(0, 0, 0, 0.05);
}

#wishlistModal .star-btn.active,
#wishlistModal .star-btn:hover {
    color: #ffaf36;
    background: linear-gradient(135deg, #fff4d4, #ffe0ac);
    border-color: rgba(255, 175, 54, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 12px 25px rgba(255, 175, 54, 0.35);
}

#wishlistModal .modal-actions {
    border-top: 1px solid rgba(255, 255, 255, 0.4);
    padding: 18px 28px 28px;
    gap: 16px;
}

#wishlistModal .btn {
    border-radius: 16px;
    font-size: 15px;
    letter-spacing: 0.5px;
}

#wishlistModal .btn.ghost {
    background: rgba(255, 255, 255, 0.4);
    color: #6a00f4;
    border: 1px solid rgba(106, 0, 244, 0.2);
}

#wishlistModal .btn.ghost:hover {
    background: rgba(255, 255, 255, 0.7);
}

#wishlistModal .btn.primary {
    background: linear-gradient(135deg, #ff8fb1, #8f7cff);
    border: none;
    box-shadow: 0 15px 35px rgba(143, 124, 255, 0.4);
}

#wishlistModal .btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 45px rgba(143, 124, 255, 0.45);
}

.form-textarea {
    min-height: 100px;
    resize: vertical;
}

/* 星級評分樣式 */
.star-rating {
    display: flex;
    gap: 8px;
}

.star-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: #ddd;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
}

.star-btn:hover,
.star-btn.active {
    color: #ffc107;
    transform: scale(1.1);
}

/* 單選按鈕樣式 */
.radio-group {
    display: flex;
    gap: 20px;
}

.radio-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 16px;
    color: var(--text-primary);
}

.radio-input {
    margin: 0;
}

.radio-text {
    user-select: none;
}

/* 表單操作按鈕 */
.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid var(--border-color);
}

.btn {
    flex: 1;
    padding: 14px 20px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-primary {
    background: var(--accent-color);
    color: white;
}

.btn-primary:hover {
    background: var(--accent-color-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.btn-secondary {
    background: var(--bg-secondary);
    color: var(--text-secondary);
}

.btn-secondary:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

/* 空狀態樣式 */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-secondary);
}

.empty-state-icon {
    font-size: 64px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.empty-state-text {
    font-size: 16px;
    margin-bottom: 8px;
}

.empty-state-subtext {
    font-size: 14px;
    opacity: 0.8;
}

/* 響應式設計 */
@media (max-width: 768px) {
    .wishlist-savings-header,
    .wishlist-form-header,
    .savings-form-header {
        padding: 16px;
    }
    
    .wishlist-form-container,
    .savings-form-container {
        padding: 16px;
    }
    
    .wishlist-item,
    .savings-item {
        padding: 16px;
    }
    
    .wishlist-item-amounts,
    .savings-amounts {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
    }
}

/* 財兔滿滿主題樣式 */
:root[data-theme="caitu"] {
    --color-primary: #FFD700;
    --color-primary-light: #FFED4E;
    --color-primary-lighter: #FFF59D;
    --color-primary-dark: #FFC107;
    --color-secondary: #FFA000;
    --color-secondary-light: #FFB300;
    --color-secondary-dark: #FF8F00;
    --bg-primary: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 193, 7, 0.1) 65%, rgba(255, 160, 0, 0.05) 100%);
    --bg-body: rgba(255, 248, 225, 0.95);
    --bg-body-strong: rgba(255, 245, 200, 0.98);
    --bg-gradient: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 193, 7, 0.15) 60%, rgba(255, 160, 0, 0.1) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(255, 193, 7, 0.15) 100%);
    --bg-white: rgba(255, 248, 225, 0.9);
    --bg-card: rgba(255, 245, 200, 0.85);
    --bg-light: rgba(255, 235, 180, 0.7);
    --bg-lighter: rgba(255, 225, 150, 0.6);
    --bg-soft: rgba(255, 215, 100, 0.5);
    --bg-soft-strong: rgba(255, 200, 80, 0.65);
    --text-primary: rgba(51, 25, 0, 0.95);
    --text-secondary: rgba(102, 51, 0, 0.8);
    --text-tertiary: rgba(153, 102, 51, 0.7);
    --text-strong: rgba(0, 0, 0, 0.9);
    --text-white: rgba(255, 255, 255, 0.98);
    --border-primary: rgba(255, 193, 7, 0.6);
    --border-light: rgba(255, 215, 0, 0.3);
    --border-medium: rgba(255, 160, 0, 0.4);
    --card-border-color: rgba(255, 193, 7, 0.5);
    --control-border-color: rgba(255, 215, 0, 0.4);
    --table-border-color: rgba(255, 215, 0, 0.2);
    --shadow-primary: 0 20px 60px rgba(255, 193, 7, 0.3);
    --shadow-primary-lg: 0 30px 80px rgba(255, 193, 7, 0.25);
    --color-primary-rgba-08: rgba(255, 215, 0, 0.08);
    --color-primary-rgba-10: rgba(255, 215, 0, 0.1);
    --color-primary-rgba-15: rgba(255, 215, 0, 0.15);
    --color-primary-rgba-20: rgba(255, 215, 0, 0.2);
    --color-primary-rgba-25: rgba(255, 215, 0, 0.25);
    --color-primary-rgba-30: rgba(255, 215, 0, 0.3);
    --color-primary-rgba-40: rgba(255, 215, 0, 0.4);
    --color-primary-light-rgba-08: rgba(255, 237, 78, 0.08);
    --color-primary-light-rgba-10: rgba(255, 237, 78, 0.1);
    --color-primary-light-rgba-15: rgba(255, 237, 78, 0.15);
    --color-primary-light-rgba-20: rgba(255, 237, 78, 0.2);
    --color-primary-light-rgba-25: rgba(255, 237, 78, 0.25);
    --color-primary-light-rgba-30: rgba(255, 237, 78, 0.3);
    --color-primary-light-rgba-40: rgba(255, 237, 78, 0.4);
    --color-secondary-rgba-08: rgba(255, 160, 0, 0.08);
    --color-secondary-rgba-10: rgba(255, 160, 0, 0.1);
    --color-secondary-rgba-15: rgba(255, 160, 0, 0.15);
    --color-secondary-rgba-20: rgba(255, 160, 0, 0.2);
    --color-secondary-rgba-25: rgba(255, 160, 0, 0.25);
    --color-secondary-rgba-30: rgba(255, 160, 0, 0.3);
    --color-secondary-rgba-40: rgba(255, 160, 0, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(255, 248, 225, 0.85) 0%, rgba(255, 245, 200, 0.65) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(255, 248, 225, 0.85) 0%, rgba(255, 245, 200, 0.65) 100%);
    --action-side-bg: color-mix(in srgb, rgba(255, 245, 200, 0.92) 75%, rgba(255, 193, 7, 0.08));
    --action-side-bg-hover: color-mix(in srgb, rgba(255, 245, 200, 0.92) 65%, rgba(255, 193, 7, 0.2));
    --action-side-text: rgba(51, 25, 0, 0.95);
}

:root[data-theme="caitu"] body {
    background: url("https://i.pinimg.com/736x/85/9c/7c/859c7c50479b84c65089909c4acec1f3.jpg") center/cover no-repeat fixed;
    background-color: #FFF8E1;
    color: var(--text-primary);
}

:root[data-theme="caitu"] body::before {
    display: none;
}

:root[data-theme="caitu"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="caitu"] .page-input,
:root[data-theme="caitu"] .page-chart,
:root[data-theme="caitu"] .page-budget,
:root[data-theme="caitu"] .page-monthly-planner,
:root[data-theme="caitu"] .page-daily-budget,
:root[data-theme="caitu"] .page-settings,
:root[data-theme="caitu"] .page-category-manage,
:root[data-theme="caitu"] .page-investment,
:root[data-theme="caitu"] .page-wallet,
:root[data-theme="caitu"] .page-history,
:root[data-theme="caitu"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="caitu"] .card,
:root[data-theme="caitu"] .record-card,
:root[data-theme="caitu"] .ledger-card,
:root[data-theme="caitu"] .summary-card,
:root[data-theme="caitu"] .budget-card,
:root[data-theme="caitu"] .wallet-card,
:root[data-theme="caitu"] .chart-card,
:root[data-theme="caitu"] .investment-card {
    background: rgba(255, 248, 225, 0.85);
    border: 1px solid rgba(255, 193, 7, 0.4);
    box-shadow: 0 12px 32px rgba(255, 193, 7, 0.2);
}

:root[data-theme="caitu"] .investment-card,
:root[data-theme="caitu"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-secondary) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-secondary);
    box-shadow: 
        0 8px 24px rgba(255, 160, 0, 0.15),
        0 0 30px var(--color-secondary-rgba-40);
}

:root[data-theme="caitu"] .investment-card::before,
:root[data-theme="caitu"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-secondary-rgba-40) 0%, var(--color-secondary-rgba-30) 55%, var(--color-secondary-rgba-20) 100%);
}

:root[data-theme="caitu"] .nav-item.active {
    background: var(--color-secondary-rgba-20);
    box-shadow: 0 8px 20px rgba(255, 160, 0, 0.25);
}

:root[data-theme="caitu"] .nav-item.active:hover {
    filter: brightness(1.1);
}

:root[data-theme="caitu"] .modal-content,
:root[data-theme="caitu"] .modal-content-standard,
:root[data-theme="caitu"] .budget-category-modal-content,
:root[data-theme="caitu"] .budget-setting-modal-content,
:root[data-theme="caitu"] .category-modal-content,
:root[data-theme="caitu"] .dca-execute-modal .modal-content,
:root[data-theme="caitu"] .account-modal-content,
:root[data-theme="caitu"] .emoji-modal-content,
:root[data-theme="caitu"] .crop-modal-content,
:root[data-theme="caitu"] .history-modal-content {
    background: rgba(255, 248, 225, 0.95);
    border: 1px solid rgba(255, 193, 7, 0.5);
    box-shadow: 0 12px 32px rgba(255, 193, 7, 0.25);
}

:root[data-theme="caitu"] .input-section {
    background: rgba(255, 245, 200, 0.92);
    border: 2px solid rgba(255, 193, 7, 0.4);
    box-shadow: 0 -4px 20px rgba(255, 160, 0, 0.15);
}

:root[data-theme="caitu"] .bottom-nav {
    background: rgba(255, 248, 225, 0.9) !important;
    border-top: 1px solid rgba(255, 193, 7, 0.5) !important;
    backdrop-filter: blur(14px);
}

:root[data-theme="caitu"] .form-input,
:root[data-theme="caitu"] .form-select,
:root[data-theme="caitu"] .form-textarea,
:root[data-theme="caitu"] .note-input {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(255, 193, 7, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="caitu"] .form-input:focus,
:root[data-theme="caitu"] .form-select:focus,
:root[data-theme="caitu"] .form-textarea:focus,
:root[data-theme="caitu"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2) !important;
    background: rgba(255, 255, 255, 0.95) !important;
}

:root[data-theme="caitu"] .header-section {
    background: rgba(255, 248, 225, 0.9) !important;
    border-bottom: 1px solid rgba(255, 193, 7, 0.4) !important;
    backdrop-filter: blur(10px);
}

:root[data-theme="caitu"] .tab-btn {
    background: rgba(255, 255, 255, 0.7) !important;
    border: 1px solid rgba(255, 193, 7, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="caitu"] .tab-btn.active {
    background: rgba(255, 215, 0, 0.3) !important;
    border: 2px solid var(--color-primary) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 4px 12px rgba(255, 193, 7, 0.25) !important;
}

:root[data-theme="caitu"] .tab-btn:hover {
    background: rgba(255, 215, 0, 0.2) !important;
    border-color: rgba(255, 160, 0, 0.4) !important;
}

:root[data-theme="caitu"] .key-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(255, 193, 7, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="caitu"] .key-btn:hover {
    background: rgba(255, 215, 0, 0.3) !important;
    border-color: var(--color-primary) !important;
}

:root[data-theme="caitu"] .key-btn.active {
    background: var(--color-primary) !important;
    color: white !important;
    border-color: var(--color-primary-dark) !important;
}

:root[data-theme="caitu"] .btn-primary {
    background: var(--color-primary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--color-primary-dark) !important;
}

:root[data-theme="caitu"] .btn-primary:hover {
    background: var(--color-primary-light) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
}

:root[data-theme="caitu"] .btn-secondary {
    background: rgba(255, 255, 255, 0.8) !important;
    color: var(--text-primary) !important;
    border: 1px solid rgba(255, 193, 7, 0.4) !important;
}

:root[data-theme="caitu"] .btn-secondary:hover {
    background: rgba(255, 215, 0, 0.2) !important;
    border-color: var(--color-primary) !important;
}

/* 金樹計畫主題樣式 */
:root[data-theme="goldenTree"] {
    --color-primary: #8B4513;
    --color-primary-light: #A0522D;
    --color-primary-lighter: #CD853F;
    --color-primary-dark: #654321;
    --color-secondary: #B8860B;
    --color-secondary-light: #DAA520;
    --color-secondary-dark: #996515;
    --bg-primary: linear-gradient(135deg, rgba(139, 69, 19, 0.15) 0%, rgba(160, 82, 45, 0.1) 65%, rgba(184, 134, 11, 0.05) 100%);
    --bg-body: rgba(245, 235, 220, 0.95);
    --bg-body-strong: rgba(240, 230, 210, 0.98);
    --bg-gradient: linear-gradient(135deg, rgba(139, 69, 19, 0.2) 0%, rgba(160, 82, 45, 0.15) 60%, rgba(184, 134, 11, 0.1) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(139, 69, 19, 0.08) 0%, rgba(184, 134, 11, 0.15) 100%);
    --bg-white: rgba(245, 235, 220, 0.9);
    --bg-card: rgba(240, 230, 210, 0.85);
    --bg-light: rgba(235, 225, 200, 0.7);
    --bg-lighter: rgba(230, 220, 190, 0.6);
    --bg-soft: rgba(225, 215, 180, 0.5);
    --bg-soft-strong: rgba(220, 210, 170, 0.65);
    --text-primary: rgba(51, 25, 0, 0.95);
    --text-secondary: rgba(102, 51, 0, 0.8);
    --text-tertiary: rgba(153, 102, 51, 0.7);
    --text-strong: rgba(0, 0, 0, 0.9);
    --text-white: rgba(255, 255, 255, 0.98);
    --border-primary: rgba(184, 134, 11, 0.6);
    --border-light: rgba(139, 69, 19, 0.3);
    --border-medium: rgba(160, 82, 45, 0.4);
    --card-border-color: rgba(184, 134, 11, 0.5);
    --control-border-color: rgba(139, 69, 19, 0.4);
    --table-border-color: rgba(139, 69, 19, 0.2);
    --shadow-primary: 0 20px 60px rgba(139, 69, 19, 0.3);
    --shadow-primary-lg: 0 30px 80px rgba(139, 69, 19, 0.25);
    --color-primary-rgba-08: rgba(139, 69, 19, 0.08);
    --color-primary-rgba-10: rgba(139, 69, 19, 0.1);
    --color-primary-rgba-15: rgba(139, 69, 19, 0.15);
    --color-primary-rgba-20: rgba(139, 69, 19, 0.2);
    --color-primary-rgba-25: rgba(139, 69, 19, 0.25);
    --color-primary-rgba-30: rgba(139, 69, 19, 0.3);
    --color-primary-rgba-40: rgba(139, 69, 19, 0.4);
    --color-primary-light-rgba-08: rgba(160, 82, 45, 0.08);
    --color-primary-light-rgba-10: rgba(160, 82, 45, 0.1);
    --color-primary-light-rgba-15: rgba(160, 82, 45, 0.15);
    --color-primary-light-rgba-20: rgba(160, 82, 45, 0.2);
    --color-primary-light-rgba-25: rgba(160, 82, 45, 0.25);
    --color-primary-light-rgba-30: rgba(160, 82, 45, 0.3);
    --color-primary-light-rgba-40: rgba(160, 82, 45, 0.4);
    --color-secondary-rgba-08: rgba(184, 134, 11, 0.08);
    --color-secondary-rgba-10: rgba(184, 134, 11, 0.1);
    --color-secondary-rgba-15: rgba(184, 134, 11, 0.15);
    --color-secondary-rgba-20: rgba(184, 134, 11, 0.2);
    --color-secondary-rgba-25: rgba(184, 134, 11, 0.25);
    --color-secondary-rgba-30: rgba(184, 134, 11, 0.3);
    --color-secondary-rgba-40: rgba(184, 134, 11, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(245, 235, 220, 0.85) 0%, rgba(240, 230, 210, 0.65) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(245, 235, 220, 0.85) 0%, rgba(240, 230, 210, 0.65) 100%);
    --action-side-bg: color-mix(in srgb, rgba(240, 230, 210, 0.92) 75%, rgba(184, 134, 11, 0.08));
    --action-side-bg-hover: color-mix(in srgb, rgba(240, 230, 210, 0.92) 65%, rgba(184, 134, 11, 0.2));
    --action-side-text: rgba(51, 25, 0, 0.95);
}

:root[data-theme="goldenTree"] body {
    background: url("https://i.pinimg.com/736x/28/a0/be/28a0be222d619be4c2944dbd309c4153.jpg") center/cover no-repeat fixed;
    background-color: #F5EBDC;
    color: var(--text-primary);
}

:root[data-theme="goldenTree"] body::before {
    display: none;
}

:root[data-theme="goldenTree"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="goldenTree"] .page-input,
:root[data-theme="goldenTree"] .page-chart,
:root[data-theme="goldenTree"] .page-budget,
:root[data-theme="goldenTree"] .page-monthly-planner,
:root[data-theme="goldenTree"] .page-daily-budget,
:root[data-theme="goldenTree"] .page-settings,
:root[data-theme="goldenTree"] .page-category-manage,
:root[data-theme="goldenTree"] .page-investment,
:root[data-theme="goldenTree"] .page-wallet,
:root[data-theme="goldenTree"] .page-history,
:root[data-theme="goldenTree"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="goldenTree"] .card,
:root[data-theme="goldenTree"] .record-card,
:root[data-theme="goldenTree"] .ledger-card,
:root[data-theme="goldenTree"] .summary-card,
:root[data-theme="goldenTree"] .budget-card,
:root[data-theme="goldenTree"] .wallet-card,
:root[data-theme="goldenTree"] .chart-card,
:root[data-theme="goldenTree"] .investment-card {
    background: rgba(245, 235, 220, 0.85);
    border: 1px solid rgba(184, 134, 11, 0.4);
    box-shadow: 0 12px 32px rgba(139, 69, 19, 0.2);
}

:root[data-theme="goldenTree"] .investment-card,
:root[data-theme="goldenTree"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-secondary) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-secondary);
    box-shadow: 
        0 8px 24px rgba(184, 134, 11, 0.15),
        0 0 30px var(--color-secondary-rgba-40);
}

:root[data-theme="goldenTree"] .investment-card::before,
:root[data-theme="goldenTree"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-secondary-rgba-40) 0%, var(--color-secondary-rgba-30) 55%, var(--color-secondary-rgba-20) 100%);
}

:root[data-theme="goldenTree"] .nav-item.active {
    background: var(--color-secondary-rgba-20);
    box-shadow: 0 8px 20px rgba(184, 134, 11, 0.25);
}

:root[data-theme="goldenTree"] .nav-item.active:hover {
    filter: brightness(1.1);
}

:root[data-theme="goldenTree"] .modal-content,
:root[data-theme="goldenTree"] .modal-content-standard,
:root[data-theme="goldenTree"] .budget-category-modal-content,
:root[data-theme="goldenTree"] .budget-setting-modal-content,
:root[data-theme="goldenTree"] .category-modal-content,
:root[data-theme="goldenTree"] .dca-execute-modal .modal-content,
:root[data-theme="goldenTree"] .account-modal-content,
:root[data-theme="goldenTree"] .emoji-modal-content,
:root[data-theme="goldenTree"] .crop-modal-content,
:root[data-theme="goldenTree"] .history-modal-content {
    background: rgba(245, 235, 220, 0.95);
    border: 1px solid rgba(184, 134, 11, 0.5);
    box-shadow: 0 12px 32px rgba(139, 69, 19, 0.25);
}

:root[data-theme="goldenTree"] .input-section {
    background: rgba(240, 230, 210, 0.92);
    border: 2px solid rgba(184, 134, 11, 0.4);
    box-shadow: 0 -4px 20px rgba(160, 82, 45, 0.15);
}

:root[data-theme="goldenTree"] .bottom-nav {
    background: rgba(245, 235, 220, 0.9) !important;
    border-top: 1px solid rgba(184, 134, 11, 0.5) !important;
    backdrop-filter: blur(14px);
}

:root[data-theme="goldenTree"] .form-input,
:root[data-theme="goldenTree"] .form-select,
:root[data-theme="goldenTree"] .form-textarea,
:root[data-theme="goldenTree"] .note-input {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(184, 134, 11, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="goldenTree"] .form-input:focus,
:root[data-theme="goldenTree"] .form-select:focus,
:root[data-theme="goldenTree"] .form-textarea:focus,
:root[data-theme="goldenTree"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.2) !important;
    background: rgba(255, 255, 255, 0.95) !important;
}

:root[data-theme="goldenTree"] .header-section {
    background: rgba(245, 235, 220, 0.9) !important;
    border-bottom: 1px solid rgba(184, 134, 11, 0.4) !important;
    backdrop-filter: blur(10px);
}

:root[data-theme="goldenTree"] .tab-btn {
    background: rgba(255, 255, 255, 0.7) !important;
    border: 1px solid rgba(184, 134, 11, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="goldenTree"] .tab-btn.active {
    background: rgba(139, 69, 19, 0.3) !important;
    border: 2px solid var(--color-primary) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 4px 12px rgba(184, 134, 11, 0.25) !important;
}

:root[data-theme="goldenTree"] .tab-btn:hover {
    background: rgba(139, 69, 19, 0.2) !important;
    border-color: rgba(160, 82, 45, 0.4) !important;
}

:root[data-theme="goldenTree"] .key-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(184, 134, 11, 0.4) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="goldenTree"] .key-btn:hover {
    background: rgba(139, 69, 19, 0.3) !important;
    border-color: var(--color-primary) !important;
}

:root[data-theme="goldenTree"] .key-btn.active {
    background: var(--color-primary) !important;
    color: white !important;
    border-color: var(--color-primary-dark) !important;
}

:root[data-theme="goldenTree"] .btn-primary {
    background: var(--color-primary) !important;
    color: white !important;
    border: 1px solid var(--color-primary-dark) !important;
}

:root[data-theme="goldenTree"] .btn-primary:hover {
    background: var(--color-primary-light) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
}

:root[data-theme="goldenTree"] .btn-secondary {
    background: rgba(255, 255, 255, 0.8) !important;
    color: var(--text-primary) !important;
    border: 1px solid rgba(184, 134, 11, 0.4) !important;
}

:root[data-theme="goldenTree"] .btn-secondary:hover {
    background: rgba(139, 69, 19, 0.2) !important;
    border-color: var(--color-primary) !important;
}

/* 鈔能力主題樣式 */
:root[data-theme="chaonengli"] {
    --color-primary: #D4AF37;
    --color-primary-light: #F4E4C1;
    --color-primary-lighter: #FAEBD7;
    --color-primary-dark: #B8860B;
    --color-secondary: #FFD700;
    --color-secondary-light: #FFED4E;
    --color-secondary-dark: #FFC107;
    --bg-primary: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(255, 215, 0, 0.1) 65%, rgba(184, 134, 11, 0.05) 100%);
    --bg-body: rgba(50, 30, 15, 0.95);
    --bg-body-strong: rgba(40, 25, 10, 0.98);
    --bg-gradient: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(255, 215, 0, 0.15) 60%, rgba(184, 134, 11, 0.1) 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(255, 215, 0, 0.15) 100%);
    --bg-white: rgba(50, 30, 15, 0.9);
    --bg-card: rgba(40, 25, 10, 0.85);
    --bg-light: rgba(60, 40, 20, 0.7);
    --bg-lighter: rgba(80, 50, 25, 0.6);
    --bg-soft: rgba(100, 60, 30, 0.5);
    --bg-soft-strong: rgba(90, 55, 28, 0.65);
    --text-primary: rgba(255, 248, 220, 0.95);
    --text-secondary: rgba(255, 235, 180, 0.8);
    --text-tertiary: rgba(255, 220, 150, 0.7);
    --text-strong: rgba(255, 255, 255, 0.98);
    --text-white: rgba(255, 255, 255, 0.98);
    --border-primary: rgba(255, 215, 0, 0.6);
    --border-light: rgba(212, 175, 55, 0.3);
    --border-medium: rgba(255, 193, 7, 0.4);
    --card-border-color: rgba(255, 215, 0, 0.5);
    --control-border-color: rgba(212, 175, 55, 0.4);
    --table-border-color: rgba(212, 175, 55, 0.2);
    --shadow-primary: 0 20px 60px rgba(212, 175, 55, 0.3);
    --shadow-primary-lg: 0 30px 80px rgba(212, 175, 55, 0.25);
    --color-primary-rgba-08: rgba(212, 175, 55, 0.08);
    --color-primary-rgba-10: rgba(212, 175, 55, 0.1);
    --color-primary-rgba-15: rgba(212, 175, 55, 0.15);
    --color-primary-rgba-20: rgba(212, 175, 55, 0.2);
    --color-primary-rgba-25: rgba(212, 175, 55, 0.25);
    --color-primary-rgba-30: rgba(212, 175, 55, 0.3);
    --color-primary-rgba-40: rgba(212, 175, 55, 0.4);
    --color-primary-light-rgba-08: rgba(244, 228, 193, 0.08);
    --color-primary-light-rgba-10: rgba(244, 228, 193, 0.1);
    --color-primary-light-rgba-15: rgba(244, 228, 193, 0.15);
    --color-primary-light-rgba-20: rgba(244, 228, 193, 0.2);
    --color-primary-light-rgba-25: rgba(244, 228, 193, 0.25);
    --color-primary-light-rgba-30: rgba(244, 228, 193, 0.3);
    --color-primary-light-rgba-40: rgba(244, 228, 193, 0.4);
    --color-secondary-rgba-08: rgba(255, 215, 0, 0.08);
    --color-secondary-rgba-10: rgba(255, 215, 0, 0.1);
    --color-secondary-rgba-15: rgba(255, 215, 0, 0.15);
    --color-secondary-rgba-20: rgba(255, 215, 0, 0.2);
    --color-secondary-rgba-25: rgba(255, 215, 0, 0.25);
    --color-secondary-rgba-30: rgba(255, 215, 0, 0.3);
    --color-secondary-rgba-40: rgba(255, 215, 0, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(50, 30, 15, 0.85) 0%, rgba(40, 25, 10, 0.65) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(50, 30, 15, 0.85) 0%, rgba(40, 25, 10, 0.65) 100%);
    --action-side-bg: color-mix(in srgb, rgba(40, 25, 10, 0.92) 75%, rgba(212, 175, 55, 0.08));
    --action-side-bg-hover: color-mix(in srgb, rgba(40, 25, 10, 0.92) 65%, rgba(212, 175, 55, 0.2));
    --action-side-text: rgba(255, 248, 220, 0.95);
}

:root[data-theme="chaonengli"] body {
    background: url("https://i.pinimg.com/736x/cc/56/8d/cc568d4109c2c92d507f597ba0ece7be.jpg") center/cover no-repeat fixed;
    background-color: #321E0F;
    color: var(--text-primary);
}

:root[data-theme="chaonengli"] body::before {
    display: none;
}

:root[data-theme="chaonengli"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="chaonengli"] .page-input,
:root[data-theme="chaonengli"] .page-chart,
:root[data-theme="chaonengli"] .page-budget,
:root[data-theme="chaonengli"] .page-monthly-planner,
:root[data-theme="chaonengli"] .page-daily-budget,
:root[data-theme="chaonengli"] .page-settings,
:root[data-theme="chaonengli"] .page-category-manage,
:root[data-theme="chaonengli"] .page-investment,
:root[data-theme="chaonengli"] .page-wallet,
:root[data-theme="chaonengli"] .page-history,
:root[data-theme="chaonengli"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="chaonengli"] .card,
:root[data-theme="chaonengli"] .record-card,
:root[data-theme="chaonengli"] .ledger-card,
:root[data-theme="chaonengli"] .summary-card,
:root[data-theme="chaonengli"] .budget-card,
:root[data-theme="chaonengli"] .wallet-card,
:root[data-theme="chaonengli"] .chart-card,
:root[data-theme="chaonengli"] .investment-card {
    background: rgba(40, 25, 10, 0.85);
    border: 1px solid rgba(255, 215, 0, 0.4);
    box-shadow: 0 12px 32px rgba(212, 175, 55, 0.2);
}

:root[data-theme="chaonengli"] .investment-card,
:root[data-theme="chaonengli"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-secondary) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-secondary);
    box-shadow: 
        0 8px 24px rgba(255, 215, 0, 0.15),
        0 0 30px var(--color-secondary-rgba-40);
}

:root[data-theme="chaonengli"] .investment-card::before,
:root[data-theme="chaonengli"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-secondary-rgba-40) 0%, var(--color-secondary-rgba-30) 55%, var(--color-secondary-rgba-20) 100%);
}

:root[data-theme="chaonengli"] .nav-item.active {
    background: var(--color-secondary-rgba-20);
    box-shadow: 0 8px 20px rgba(255, 215, 0, 0.25);
}

:root[data-theme="chaonengli"] .nav-item.active:hover {
    filter: brightness(1.1);
}

:root[data-theme="chaonengli"] .modal-content,
:root[data-theme="chaonengli"] .modal-content-standard,
:root[data-theme="chaonengli"] .budget-category-modal-content,
:root[data-theme="chaonengli"] .budget-setting-modal-content,
:root[data-theme="chaonengli"] .category-modal-content,
:root[data-theme="chaonengli"] .dca-execute-modal .modal-content,
:root[data-theme="chaonengli"] .account-modal-content,
:root[data-theme="chaonengli"] .emoji-modal-content,
:root[data-theme="chaonengli"] .crop-modal-content,
:root[data-theme="chaonengli"] .history-modal-content {
    background: rgba(40, 25, 10, 0.95);
    border: 1px solid rgba(255, 215, 0, 0.5);
    box-shadow: 0 12px 32px rgba(212, 175, 55, 0.25);
}

:root[data-theme="chaonengli"] .input-section {
    background: rgba(50, 30, 15, 0.92);
    border: 2px solid rgba(255, 215, 0, 0.4);
    box-shadow: 0 -4px 20px rgba(184, 134, 11, 0.15);
}

:root[data-theme="chaonengli"] .bottom-nav {
    background: rgba(40, 25, 10, 0.9) !important;
    border-top: 1px solid rgba(255, 215, 0, 0.5) !important;
    backdrop-filter: blur(14px);
}

:root[data-theme="chaonengli"] .form-input,
:root[data-theme="chaonengli"] .form-select,
:root[data-theme="chaonengli"] .form-textarea,
:root[data-theme="chaonengli"] .note-input {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 2px solid rgba(255, 215, 0, 0.4) !important;
    color: #321E0F !important;
}

:root[data-theme="chaonengli"] .form-input:focus,
:root[data-theme="chaonengli"] .form-select:focus,
:root[data-theme="chaonengli"] .form-textarea:focus,
:root[data-theme="chaonengli"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2) !important;
    background: rgba(255, 255, 255, 0.95) !important;
}

:root[data-theme="chaonengli"] .header-section {
    background: rgba(40, 25, 10, 0.9) !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.4) !important;
    backdrop-filter: blur(10px);
}

:root[data-theme="chaonengli"] .tab-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 1px solid rgba(255, 215, 0, 0.4) !important;
    color: #321E0F !important;
}

:root[data-theme="chaonengli"] .tab-btn.active {
    background: rgba(212, 175, 55, 0.3) !important;
    border: 2px solid var(--color-primary) !important;
    color: #321E0F !important;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.25) !important;
}

:root[data-theme="chaonengli"] .tab-btn:hover {
    background: rgba(212, 175, 55, 0.2) !important;
    border-color: rgba(184, 134, 11, 0.4) !important;
}

:root[data-theme="chaonengli"] .key-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(255, 215, 0, 0.4) !important;
    color: #321E0F !important;
}

:root[data-theme="chaonengli"] .key-btn:hover {
    background: rgba(212, 175, 55, 0.3) !important;
    border-color: var(--color-primary) !important;
}

:root[data-theme="chaonengli"] .key-btn.active {
    background: var(--color-primary) !important;
    color: white !important;
    border-color: var(--color-primary-dark) !important;
}

:root[data-theme="chaonengli"] .btn-primary {
    background: var(--color-primary) !important;
    color: white !important;
    border: 1px solid var(--color-primary-dark) !important;
}

:root[data-theme="chaonengli"] .btn-primary:hover {
    background: var(--color-primary-light) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
}

:root[data-theme="chaonengli"] .btn-secondary {
    background: rgba(255, 255, 255, 0.8) !important;
    color: #321E0F !important;
    border: 1px solid rgba(255, 215, 0, 0.4) !important;
}

:root[data-theme="chaonengli"] .btn-secondary:hover {
    background: rgba(212, 175, 55, 0.2) !important;
    border-color: var(--color-primary) !important;
}

/* 記錄類型標籤樣式 */
.record-type-tabs {
    display: flex;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.record-type-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 60px;
}

.record-type-tab:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
}

.record-type-tab.active {
    background: var(--color-primary, #ff6b6b);
    border-color: var(--color-primary, #ff6b6b);
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
}

.record-type-icon {
    font-size: 20px;
    margin-bottom: 4px;
}

.record-type-text {
    font-size: 12px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.8);
}

.record-type-tab.active .record-type-text {
    color: white;
}

/* ========== 水果清爽主題樣式 ========== */
:root[data-theme="fruit"] {
    --color-primary: #40E0D0;
    --color-primary-light: #7FFFD4;
    --color-primary-lighter: #AFEEEE;
    --color-primary-dark: #48D1CC;
    --color-secondary: #FF69B4;
    --color-secondary-light: #FFB6D9;
    --color-secondary-lighter: #FF9EC7;
    --color-accent: #32CD32;
    --color-accent-light: #90EE90;
    --bg-primary: linear-gradient(135deg, rgba(64, 224, 208, 0.3) 0%, rgba(255, 105, 180, 0.2) 50%, rgba(50, 205, 50, 0.3) 100%);
    --bg-gradient: linear-gradient(135deg, #40E0D0 0%, #48D1CC 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(175, 238, 238, 0.3) 0%, rgba(255, 182, 193, 0.3) 100%);
    --border-primary: #40E0D0;
    --border-secondary: #FF69B4;
    --shadow-primary: 0 2px 8px rgba(64, 224, 208, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(64, 224, 208, 0.3);
    --shadow-secondary: 0 2px 8px rgba(255, 105, 180, 0.25);
    --color-primary-rgba-08: rgba(64, 224, 208, 0.08);
    --color-primary-rgba-10: rgba(64, 224, 208, 0.1);
    --color-primary-rgba-12: rgba(64, 224, 208, 0.12);
    --color-primary-rgba-15: rgba(64, 224, 208, 0.15);
    --color-primary-rgba-18: rgba(64, 224, 208, 0.18);
    --color-primary-rgba-20: rgba(64, 224, 208, 0.2);
    --color-primary-rgba-25: rgba(64, 224, 208, 0.25);
    --color-primary-rgba-30: rgba(64, 224, 208, 0.3);
    --color-primary-rgba-40: rgba(64, 224, 208, 0.4);
    --color-primary-light-rgba-08: rgba(127, 255, 212, 0.08);
    --color-primary-light-rgba-10: rgba(127, 255, 212, 0.1);
    --color-primary-light-rgba-15: rgba(127, 255, 212, 0.15);
    --color-primary-light-rgba-20: rgba(127, 255, 212, 0.2);
    --color-primary-light-rgba-25: rgba(127, 255, 212, 0.25);
    --color-primary-light-rgba-30: rgba(127, 255, 212, 0.3);
    --color-secondary-rgba-08: rgba(255, 105, 180, 0.08);
    --color-secondary-rgba-10: rgba(255, 105, 180, 0.1);
    --color-secondary-rgba-15: rgba(255, 105, 180, 0.15);
    --color-secondary-rgba-20: rgba(255, 105, 180, 0.2);
    --color-secondary-rgba-25: rgba(255, 105, 180, 0.25);
    --color-secondary-rgba-30: rgba(255, 105, 180, 0.3);
    --color-secondary-rgba-40: rgba(255, 105, 180, 0.4);
    --bg-card: rgba(255, 255, 255, 0.9);
    --bg-light: rgba(240, 255, 255, 0.95);
    --bg-lighter: rgba(245, 255, 250, 0.98);
    --bg-soft: rgba(250, 255, 250, 0.99);
    --text-primary: #2F4F4F;
    --text-secondary: #708090;
    --text-light: rgba(255, 255, 255, 0.9);
    --action-side-text: rgba(255, 255, 255, 0.95);
}

:root[data-theme="fruit"] body {
    background: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") center/cover no-repeat fixed;
    background-color: #40E0D0;
    color: var(--text-primary);
}

:root[data-theme="fruit"] body::before {
    display: none;
}

:root[data-theme="fruit"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="fruit"] .page-input,
:root[data-theme="fruit"] .page-chart,
:root[data-theme="fruit"] .page-budget,
:root[data-theme="fruit"] .page-monthly-planner,
:root[data-theme="fruit"] .page-daily-budget,
:root[data-theme="fruit"] .page-settings,
:root[data-theme="fruit"] .page-category-manage,
:root[data-theme="fruit"] .page-investment,
:root[data-theme="fruit"] .page-wallet,
:root[data-theme="fruit"] .page-history,
:root[data-theme="fruit"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="fruit"] .card,
:root[data-theme="fruit"] .record-card,
:root[data-theme="fruit"] .ledger-card,
:root[data-theme="fruit"] .summary-card,
:root[data-theme="fruit"] .budget-card,
:root[data-theme="fruit"] .wallet-card,
:root[data-theme="fruit"] .chart-card,
:root[data-theme="fruit"] .investment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(64, 224, 208, 0.4);
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

:root[data-theme="fruit"] .investment-card,
:root[data-theme="fruit"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-primary-rgba-20) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-primary);
    border-radius: 20px;
    box-shadow: 
        0 8px 24px rgba(64, 224, 208, 0.2),
        0 0 30px var(--color-primary-rgba-15);
}

:root[data-theme="fruit"] .investment-card::before,
:root[data-theme="fruit"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-primary-rgba-40) 0%, var(--color-primary-rgba-30) 55%, var(--color-primary-rgba-20) 100%);
}

/* 水果主題持股卡片文字顏色 */
:root[data-theme="fruit"] .stock-item-card {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card h1,
:root[data-theme="fruit"] .stock-item-card h2,
:root[data-theme="fruit"] .stock-item-card h3,
:root[data-theme="fruit"] .stock-item-card h4,
:root[data-theme="fruit"] .stock-item-card h5,
:root[data-theme="fruit"] .stock-item-card h6,
:root[data-theme="fruit"] .stock-item-card .title,
:root[data-theme="fruit"] .stock-item-card .subtitle,
:root[data-theme="fruit"] .stock-item-card .card-title,
:root[data-theme="fruit"] .stock-item-card .card-subtitle,
:root[data-theme="fruit"] .stock-item-card .stock-name {
    color: var(--color-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card .text,
:root[data-theme="fruit"] .stock-item-card .description,
:root[data-theme="fruit"] .stock-item-card .content,
:root[data-theme="fruit"] .stock-item-card p,
:root[data-theme="fruit"] .stock-item-card span,
:root[data-theme="fruit"] .stock-item-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card .highlight,
:root[data-theme="fruit"] .stock-item-card .accent,
:root[data-theme="fruit"] .stock-item-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="fruit"] .stock-item-card .secondary-text,
:root[data-theme="fruit"] .stock-item-card .muted-text,
:root[data-theme="fruit"] .stock-item-card .stock-code {
    color: var(--text-secondary) !important;
}

:root[data-theme="fruit"] .stock-item-card .label,
:root[data-theme="fruit"] .stock-item-card .form-label {
    color: var(--color-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card .value,
:root[data-theme="fruit"] .stock-item-card .amount,
:root[data-theme="fruit"] .stock-item-card .stock-price {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card .stock-change,
:root[data-theme="fruit"] .stock-item-card .profit-loss {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card .profit-loss.positive {
    color: #f44336 !important; /* 紅色表示漲 */
}

:root[data-theme="fruit"] .stock-item-card .profit-loss.negative {
    color: #4caf50 !important; /* 綠色表示跌 */
}

:root[data-theme="fruit"] .stock-item-card .stock-card-icon {
    background: var(--color-primary-rgba-15) !important;
    color: var(--color-primary) !important;
    border: 2px solid var(--color-primary-rgba-30) !important;
}

:root[data-theme="fruit"] .stock-item-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.25) !important;
    border-color: var(--color-primary) !important;
}

:root[data-theme="fruit"] .stock-item-card:hover .stock-card-icon {
    transform: scale(1.05) rotate(3deg);
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.3) !important;
}

/* 通用持股卡片文字顏色樣式 */
.stock-item-card {
    color: var(--text-primary) !important;
}

.stock-item-card h1,
.stock-item-card h2,
.stock-item-card h3,
.stock-item-card h4,
.stock-item-card h5,
.stock-item-card h6,
.stock-item-card .title,
.stock-item-card .subtitle,
.stock-item-card .card-title,
.stock-item-card .card-subtitle,
.stock-item-card .stock-name {
    color: var(--color-primary) !important;
}

.stock-item-card .text,
.stock-item-card .description,
.stock-item-card .content,
.stock-item-card p,
.stock-item-card span,
.stock-item-card div {
    color: var(--text-primary) !important;
}

.stock-item-card .highlight,
.stock-item-card .accent,
.stock-item-card .primary-text {
    color: var(--color-secondary) !important;
}

.stock-item-card .secondary-text,
.stock-item-card .muted-text,
.stock-item-card .stock-code {
    color: var(--text-secondary) !important;
}

.stock-item-card .label,
.stock-item-card .form-label {
    color: var(--color-primary) !important;
}

.stock-item-card .value,
.stock-item-card .amount,
.stock-item-card .stock-price {
    color: var(--text-primary) !important;
}

.stock-item-card .stock-change,
.stock-item-card .profit-loss {
    color: var(--text-primary) !important;
}

.stock-item-card .profit-loss.positive {
    color: #f44336 !important; /* 紅色表示漲 */
}

.stock-item-card .profit-loss.negative {
    color: #4caf50 !important; /* 綠色表示跌 */
}

.stock-item-card .stock-card-icon {
    background: var(--color-primary-rgba-15) !important;
    color: var(--color-primary) !important;
    border: 2px solid var(--color-primary-rgba-30) !important;
}

:root[data-theme="fruit"] .nav-item.active {
    background: var(--color-primary-rgba-20);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.25);
}

:root[data-theme="fruit"] .nav-item.active:hover {
    filter: brightness(1.1);
    transform: translateY(-2px);
}

:root[data-theme="fruit"] .modal-content,
:root[data-theme="fruit"] .modal-content-standard,
:root[data-theme="fruit"] .budget-category-modal-content,
:root[data-theme="fruit"] .budget-setting-modal-content,
:root[data-theme="fruit"] .category-modal-content,
:root[data-theme="fruit"] .dca-execute-modal .modal-content,
:root[data-theme="fruit"] .account-modal-content,
:root[data-theme="fruit"] .emoji-modal-content,
:root[data-theme="fruit"] .crop-modal-content,
:root[data-theme="fruit"] .history-modal-content {
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid rgba(64, 224, 208, 0.5);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(64, 224, 208, 0.25);
    backdrop-filter: blur(15px);
}

:root[data-theme="fruit"] .input-section {
    background: rgba(255, 255, 255, 0.92);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 -4px 20px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(12px);
}

:root[data-theme="fruit"] .bottom-nav {
    background: rgba(255, 255, 255, 0.9) !important;
    border-top: 2px solid rgba(64, 224, 208, 0.5) !important;
    border-radius: 20px 20px 0 0;
    backdrop-filter: blur(15px);
}

:root[data-theme="fruit"] .form-input,
:root[data-theme="fruit"] .form-select,
:root[data-theme="fruit"] .form-textarea,
:root[data-theme="fruit"] .note-input {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(64, 224, 208, 0.3) !important;
    border-radius: 12px;
    color: var(--text-primary) !important;
    backdrop-filter: blur(5px);
}

:root[data-theme="fruit"] .form-input:focus,
:root[data-theme="fruit"] .form-select:focus,
:root[data-theme="fruit"] .form-textarea:focus,
:root[data-theme="fruit"] .note-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgba(64, 224, 208, 0.2) !important;
    background: rgba(255, 255, 255, 0.95) !important;
}

:root[data-theme="fruit"] .header-section {
    background: rgba(255, 255, 255, 0.9) !important;
    border-bottom: 2px solid rgba(64, 224, 208, 0.4) !important;
    border-radius: 0 0 20px 20px;
    backdrop-filter: blur(12px);
}

:root[data-theme="fruit"] .tab-btn {
    background: rgba(255, 255, 255, 0.7) !important;
    border: 2px solid rgba(64, 224, 208, 0.3) !important;
    border-radius: 12px;
    color: var(--text-primary) !important;
    backdrop-filter: blur(5px);
}

:root[data-theme="fruit"] .tab-btn.active {
    background: var(--color-primary) !important;
    border: 2px solid var(--color-primary-dark) !important;
    color: white !important;
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.25) !important;
}

:root[data-theme="fruit"] .tab-btn:hover {
    background: var(--color-primary-rgba-20) !important;
    border-color: var(--color-primary) !important;
    transform: translateY(-2px);
}

:root[data-theme="fruit"] .key-btn {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 2px solid rgba(64, 224, 208, 0.3) !important;
    border-radius: 12px;
    color: var(--text-primary) !important;
    backdrop-filter: blur(5px);
}

:root[data-theme="fruit"] .key-btn:hover {
    background: var(--color-primary-rgba-20) !important;
    border-color: var(--color-primary) !important;
    transform: translateY(-2px);
}

:root[data-theme="fruit"] .key-btn.active {
    background: var(--color-primary) !important;
    color: white !important;
    border-color: var(--color-primary-dark) !important;
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.3);
}

:root[data-theme="fruit"] .btn-primary {
    background: var(--color-primary) !important;
    color: white !important;
    border: 2px solid var(--color-primary-dark) !important;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.25);
}

:root[data-theme="fruit"] .btn-primary:hover {
    background: var(--color-primary-light) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(64, 224, 208, 0.3);
}

:root[data-theme="fruit"] .btn-secondary {
    background: rgba(255, 255, 255, 0.8) !important;
    color: var(--text-primary) !important;
    border: 2px solid rgba(64, 224, 208, 0.3) !important;
    border-radius: 12px;
    backdrop-filter: blur(5px);
}

:root[data-theme="fruit"] .btn-secondary:hover {
    background: var(--color-primary-rgba-20) !important;
    border-color: var(--color-primary) !important;
    transform: translateY(-2px);
}

/* 小森對話框樣式 */
:root[data-theme="fruit"] .mori-dialog {
    background: rgba(255, 255, 255, 0.95) !important;
    border: 2px solid rgba(64, 224, 208, 0.5) !important;
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(64, 224, 208, 0.25);
    backdrop-filter: blur(15px);
}

:root[data-theme="fruit"] .mori-dialog-content {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .mori-dialog-title {
    color: var(--color-primary) !important;
    border-bottom: 2px solid var(--color-primary-rgba-30) !important;
}

/* 返回按鈕樣式 */
:root[data-theme="fruit"] .back-btn,
:root[data-theme="fruit"] .return-btn {
    background: var(--color-primary) !important;
    color: white !important;
    border: 2px solid var(--color-primary-dark) !important;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(64, 224, 208, 0.25);
}

:root[data-theme="fruit"] .back-btn:hover,
:root[data-theme="fruit"] .return-btn:hover {
    background: var(--color-primary-light) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(64, 224, 208, 0.3);
}

/* 投資卡片圖片 */
:root[data-theme="fruit"] .investment-card-image {
    background-image: url("https://i.pinimg.com/736x/9f/2c/4d/9f2c4d979cd3ea629ad900d9b838b38f.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 記帳卡片圖片 */
:root[data-theme="fruit"] .ledger-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 錢包預算設定卡片圖片 */
:root[data-theme="fruit"] .budget-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 每月規劃卡片圖片 */
:root[data-theme="fruit"] .monthly-planner-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 投資設定卡片圖片 */
:root[data-theme="fruit"] .investment-settings-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 持有中/買入卡片圖片 */
:root[data-theme="fruit"] .hold-card-image,
:root[data-theme="fruit"] .buy-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 賣出卡片圖片 */
:root[data-theme="fruit"] .sell-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 股息卡片圖片 */
:root[data-theme="fruit"] .dividend-card-image {
    background-image: url("https://i.pinimg.com/736x/3a/57/69/3a576934dcdf3bb2ba06b3d2964ab296.jpg") !important;
    background-size: cover;
    background-position: center;
    border-radius: 16px;
}

/* 定期定額頁面樣式 */
:root[data-theme="fruit"] .page-dca {
    background: transparent !important;
}

:root[data-theme="fruit"] .dca-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

/* 管理投資卡片頁面樣式 */
:root[data-theme="fruit"] .page-manage-investment {
    background: transparent !important;
}

:root[data-theme="fruit"] .manage-investment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .manage-investment-card h1,
:root[data-theme="fruit"] .manage-investment-card h2,
:root[data-theme="fruit"] .manage-investment-card h3,
:root[data-theme="fruit"] .manage-investment-card h4,
:root[data-theme="fruit"] .manage-investment-card h5,
:root[data-theme="fruit"] .manage-investment-card h6,
:root[data-theme="fruit"] .manage-investment-card .title,
:root[data-theme="fruit"] .manage-investment-card .subtitle,
:root[data-theme="fruit"] .manage-investment-card .card-title,
:root[data-theme="fruit"] .manage-investment-card .card-subtitle {
    color: var(--color-primary) !important;
}

:root[data-theme="fruit"] .manage-investment-card .text,
:root[data-theme="fruit"] .manage-investment-card .description,
:root[data-theme="fruit"] .manage-investment-card .content,
:root[data-theme="fruit"] .manage-investment-card p,
:root[data-theme="fruit"] .manage-investment-card span,
:root[data-theme="fruit"] .manage-investment-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="fruit"] .manage-investment-card .highlight,
:root[data-theme="fruit"] .manage-investment-card .accent,
:root[data-theme="fruit"] .manage-investment-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="fruit"] .manage-investment-card .secondary-text,
:root[data-theme="fruit"] .manage-investment-card .muted-text {
    color: var(--text-secondary) !important;
}

:root[data-theme="fruit"] .manage-investment-card .label,
:root[data-theme="fruit"] .manage-investment-card .form-label {
    color: var(--color-primary) !important;
}

:root[data-theme="fruit"] .manage-investment-card .value,
:root[data-theme="fruit"] .manage-investment-card .amount {
    color: var(--color-accent) !important;
}

/* ========== 喵喵喵主題樣式 ========== */
:root[data-theme="meow"] {
    --color-primary: #87CEEB;
    --color-primary-light: #ADD8E6;
    --color-primary-lighter: #B0E0E6;
    --color-primary-dark: #4682B4;
    --color-secondary: #FFB6C1;
    --color-secondary-light: #FFC0CB;
    --color-secondary-lighter: #FFD1DC;
    --color-accent: #98FB98;
    --bg-primary: linear-gradient(135deg, rgba(135, 206, 235, 0.4) 0%, rgba(255, 182, 193, 0.3) 50%, rgba(152, 251, 152, 0.4) 100%);
    --bg-gradient: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(173, 216, 230, 0.3) 0%, rgba(255, 182, 193, 0.3) 100%);
    --border-primary: #87CEEB;
    --border-secondary: #FFB6C1;
    --shadow-primary: 0 2px 8px rgba(135, 206, 235, 0.25);
    --shadow-primary-lg: 0 4px 12px rgba(135, 206, 235, 0.3);
    --shadow-secondary: 0 2px 8px rgba(255, 182, 193, 0.25);
    --color-primary-rgba-08: rgba(135, 206, 235, 0.08);
    --color-primary-rgba-10: rgba(135, 206, 235, 0.1);
    --color-primary-rgba-12: rgba(135, 206, 235, 0.12);
    --color-primary-rgba-15: rgba(135, 206, 235, 0.15);
    --color-primary-rgba-18: rgba(135, 206, 235, 0.18);
    --color-primary-rgba-20: rgba(135, 206, 235, 0.2);
    --color-primary-rgba-25: rgba(135, 206, 235, 0.25);
    --color-primary-rgba-30: rgba(135, 206, 235, 0.3);
    --color-primary-rgba-40: rgba(135, 206, 235, 0.4);
    --color-primary-light-rgba-08: rgba(173, 216, 230, 0.08);
    --color-primary-light-rgba-10: rgba(173, 216, 230, 0.1);
    --color-primary-light-rgba-15: rgba(173, 216, 230, 0.15);
    --color-primary-light-rgba-20: rgba(173, 216, 230, 0.2);
    --color-primary-light-rgba-25: rgba(173, 216, 230, 0.25);
    --color-primary-light-rgba-30: rgba(173, 216, 230, 0.3);
    --color-secondary-rgba-08: rgba(255, 182, 193, 0.08);
    --color-secondary-rgba-10: rgba(255, 182, 193, 0.1);
    --color-secondary-rgba-15: rgba(255, 182, 193, 0.15);
    --color-secondary-rgba-20: rgba(255, 182, 193, 0.2);
    --color-secondary-rgba-25: rgba(255, 182, 193, 0.25);
    --color-secondary-rgba-30: rgba(255, 182, 193, 0.3);
    --color-secondary-rgba-40: rgba(255, 182, 193, 0.4);
    --bg-card: rgba(255, 255, 255, 0.9);
    --bg-light: rgba(240, 248, 255, 0.95);
    --bg-lighter: rgba(245, 250, 255, 0.98);
    --bg-soft: rgba(250, 255, 255, 0.99);
    --text-primary: #2F4F4F;
    --text-secondary: #708090;
    --text-light: rgba(255, 255, 255, 0.9);
    --action-side-text: rgba(255, 255, 255, 0.95);
}

:root[data-theme="meow"] body {
    background: url("https://i.pinimg.com/736x/9b/c1/cd/9bc1cd5e89c11cd36a290ef3cf707919.jpg") center/cover no-repeat fixed;
    background-color: #87CEEB;
    color: var(--text-primary);
}

:root[data-theme="meow"] body::before {
    display: none;
}

:root[data-theme="meow"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="meow"] .page-input,
:root[data-theme="meow"] .page-chart,
:root[data-theme="meow"] .page-budget,
:root[data-theme="meow"] .page-monthly-planner,
:root[data-theme="meow"] .page-daily-budget,
:root[data-theme="meow"] .page-settings,
:root[data-theme="meow"] .page-category-manage,
:root[data-theme="meow"] .page-investment,
:root[data-theme="meow"] .page-wallet,
:root[data-theme="meow"] .page-history,
:root[data-theme="meow"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="meow"] .card,
:root[data-theme="meow"] .record-card,
:root[data-theme="meow"] .ledger-card,
:root[data-theme="meow"] .summary-card,
:root[data-theme="meow"] .budget-card,
:root[data-theme="meow"] .wallet-card,
:root[data-theme="meow"] .chart-card,
:root[data-theme="meow"] .investment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(135, 206, 235, 0.4);
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
}

:root[data-theme="meow"] .investment-card,
:root[data-theme="meow"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-primary-rgba-20) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-primary);
    border-radius: 20px;
    box-shadow: 
        0 8px 24px rgba(135, 206, 235, 0.2),
        0 0 30px var(--color-primary-rgba-15);
}

:root[data-theme="meow"] .investment-card::before,
:root[data-theme="meow"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-primary-rgba-40) 0%, var(--color-primary-rgba-30) 55%, var(--color-primary-rgba-20) 100%);
}

/* 喵喵喵主題持股卡片文字顏色 */
:root[data-theme="meow"] .stock-item-card {
    color: var(--text-primary) !important;
}

:root[data-theme="meow"] .stock-item-card h1,
:root[data-theme="meow"] .stock-item-card h2,
:root[data-theme="meow"] .stock-item-card h3,
:root[data-theme="meow"] .stock-item-card h4,
:root[data-theme="meow"] .stock-item-card h5,
:root[data-theme="meow"] .stock-item-card h6,
:root[data-theme="meow"] .stock-item-card .title,
:root[data-theme="meow"] .stock-item-card .subtitle,
:root[data-theme="meow"] .stock-item-card .card-title,
:root[data-theme="meow"] .stock-item-card .card-subtitle,
:root[data-theme="meow"] .stock-item-card .stock-name {
    color: var(--color-primary) !important;
}

:root[data-theme="meow"] .stock-item-card .text,
:root[data-theme="meow"] .stock-item-card .description,
:root[data-theme="meow"] .stock-item-card .content,
:root[data-theme="meow"] .stock-item-card p,
:root[data-theme="meow"] .stock-item-card span,
:root[data-theme="meow"] .stock-item-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="meow"] .stock-item-card .highlight,
:root[data-theme="meow"] .stock-item-card .accent,
:root[data-theme="meow"] .stock-item-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="meow"] .stock-item-card .secondary-text,
:root[data-theme="meow"] .stock-item-card .muted-text,
:root[data-theme="meow"] .stock-item-card .stock-code {
    color: var(--text-secondary) !important;
}

/* 管理投資卡片頁面樣式 */
:root[data-theme="meow"] .page-manage-investment {
    background: transparent !important;
}

:root[data-theme="meow"] .manage-investment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(135, 206, 235, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
    color: var(--text-primary) !important;
}

:root[data-theme="meow"] .manage-investment-card h1,
:root[data-theme="meow"] .manage-investment-card h2,
:root[data-theme="meow"] .manage-investment-card h3,
:root[data-theme="meow"] .manage-investment-card h4,
:root[data-theme="meow"] .manage-investment-card h5,
:root[data-theme="meow"] .manage-investment-card h6,
:root[data-theme="meow"] .manage-investment-card .title,
:root[data-theme="meow"] .manage-investment-card .subtitle,
:root[data-theme="meow"] .manage-investment-card .card-title,
:root[data-theme="meow"] .manage-investment-card .card-subtitle {
    color: var(--color-primary) !important;
}

:root[data-theme="meow"] .manage-investment-card .text,
:root[data-theme="meow"] .manage-investment-card .description,
:root[data-theme="meow"] .manage-investment-card .content,
:root[data-theme="meow"] .manage-investment-card p,
:root[data-theme="meow"] .manage-investment-card span,
:root[data-theme="meow"] .manage-investment-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="meow"] .manage-investment-card .highlight,
:root[data-theme="meow"] .manage-investment-card .accent,
:root[data-theme="meow"] .manage-investment-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="meow"] .manage-investment-card .secondary-text,
:root[data-theme="meow"] .manage-investment-card .muted-text {
    color: var(--text-secondary) !important;
}

:root[data-theme="meow"] .manage-investment-card .label,
:root[data-theme="meow"] .manage-investment-card .form-label {
    color: var(--color-primary) !important;
}

:root[data-theme="meow"] .manage-investment-card .value,
:root[data-theme="meow"] .manage-investment-card .amount {
    color: var(--color-accent) !important;
}

/* 年度報告頁面樣式 */
:root[data-theme="meow"] .page-annual-report {
    background: transparent !important;
}

:root[data-theme="meow"] .annual-report-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(135, 206, 235, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
}

/* 關於記帳本頁面樣式 */
:root[data-theme="meow"] .page-about {
    background: transparent !important;
}

:root[data-theme="meow"] .about-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(135, 206, 235, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
}

/* 記帳日記頁面樣式 */
:root[data-theme="meow"] .page-diary {
    background: transparent !important;
}

:root[data-theme="meow"] .diary-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(135, 206, 235, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
}

/* 分期網頁樣式 */
:root[data-theme="meow"] .page-installment {
    background: transparent !important;
}

:root[data-theme="meow"] .installment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(135, 206, 235, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15);
    backdrop-filter: blur(10px);
}

/* 小森對話框主題適配 */
:root[data-theme="meow"] .mori-dialog-box {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 16px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
}

:root[data-theme="meow"] .mori-dialog-content {
    background: transparent !important;
    color: var(--text-primary) !important;
}

:root[data-theme="meow"] .mori-message {
    color: var(--text-primary) !important;
}

/* 返回按鈕主題適配 */
:root[data-theme="meow"] .back-btn,
:root[data-theme="meow"] .dca-setup-back-btn,
:root[data-theme="meow"] .stock-detail-back-btn,
:root[data-theme="meow"] .history-close-btn,
:root[data-theme="meow"] .advisor-close-btn {
    background: var(--color-primary) !important;
    color: white !important;
    border: 1px solid var(--color-primary) !important;
    border-radius: 8px !important;
}

:root[data-theme="meow"] .back-btn:hover,
:root[data-theme="meow"] .dca-setup-back-btn:hover,
:root[data-theme="meow"] .stock-detail-back-btn:hover,
:root[data-theme="meow"] .history-close-btn:hover,
:root[data-theme="meow"] .advisor-close-btn:hover {
    background: var(--color-primary-dark) !important;
    transform: scale(1.05) !important;
}

/* 定期定額頁面樣式 */
:root[data-theme="meow"] .page-dca-management,
:root[data-theme="meow"] .page-dca-setup {
    background: transparent !important;
}

:root[data-theme="meow"] .dca-card,
:root[data-theme="meow"] .dca-setup-form {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 投資設定頁面樣式 */
:root[data-theme="meow"] .page-investment-settings {
    background: transparent !important;
}

:root[data-theme="meow"] .investment-settings-card {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 持有中頁面樣式 */
:root[data-theme="meow"] .page-stock-detail {
    background: transparent !important;
}

:root[data-theme="meow"] .stock-detail-card {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 買入卡片樣式 */
:root[data-theme="meow"] .buy-card {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 賣出卡片樣式 */
:root[data-theme="meow"] .sell-card {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 股息卡片樣式 */
:root[data-theme="meow"] .dividend-card {
    background: rgba(255, 255, 255, 0.85) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 每月規劃卡片樣式 */
:root[data-theme="meow"] .monthly-planner-card {
    background: url("https://i.pinimg.com/736x/8a/42/0b/8a420b2c26a91187da871ef11f859731.jpg") center/cover !important;
    background-blend-mode: overlay !important;
    background-color: rgba(135, 206, 235, 0.3) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 錢包預算設定卡片樣式 */
:root[data-theme="meow"] .wallet-budget-card {
    background: url("https://i.pinimg.com/1200x/da/af/29/daaf2933df91dc69201590262a495c01.jpg") center/cover !important;
    background-blend-mode: overlay !important;
    background-color: rgba(135, 206, 235, 0.3) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 記帳卡片樣式 */
:root[data-theme="meow"] .ledger-card {
    background: url("https://i.pinimg.com/1200x/da/af/29/daaf2933df91dc69201590262a495c01.jpg") center/cover !important;
    background-blend-mode: overlay !important;
    background-color: rgba(135, 206, 235, 0.3) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 投資卡片樣式 */
:root[data-theme="meow"] .investment-card {
    background: url("https://i.pinimg.com/736x/db/0a/4c/db0a4ca3e630deafb765969aa41396b5.jpg") center/cover !important;
    background-blend-mode: overlay !important;
    background-color: rgba(135, 206, 235, 0.3) !important;
    border: 2px solid rgba(135, 206, 235, 0.4) !important;
    border-radius: 20px !important;
    box-shadow: 0 8px 24px rgba(135, 206, 235, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

/* 通用管理投資卡片文字顏色樣式 */
.manage-investment-card {
    color: var(--text-primary) !important;
}

.manage-investment-card h1,
.manage-investment-card h2,
.manage-investment-card h3,
.manage-investment-card h4,
.manage-investment-card h5,
.manage-investment-card h6,
.manage-investment-card .title,
.manage-investment-card .subtitle,
.manage-investment-card .card-title,
.manage-investment-card .card-subtitle {
    color: var(--color-primary) !important;
}

.manage-investment-card .text,
.manage-investment-card .description,
.manage-investment-card .content,
.manage-investment-card p,
.manage-investment-card span,
.manage-investment-card div {
    color: var(--text-primary) !important;
}

.manage-investment-card .highlight,
.manage-investment-card .accent,
.manage-investment-card .primary-text {
    color: var(--color-secondary) !important;
}

.manage-investment-card .secondary-text,
.manage-investment-card .muted-text {
    color: var(--text-secondary) !important;
}

.manage-investment-card .label,
.manage-investment-card .form-label {
    color: var(--color-primary) !important;
}

.manage-investment-card .value,
.manage-investment-card .amount {
    color: var(--color-accent) !important;
}

/* 年度報告頁面樣式 */
:root[data-theme="fruit"] .page-annual-report {
    background: transparent !important;
}

:root[data-theme="fruit"] .annual-report-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

/* 關於記帳本頁面樣式 */
:root[data-theme="fruit"] .page-about {
    background: transparent !important;
}

:root[data-theme="fruit"] .about-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

/* 記帳日記頁面樣式 */
:root[data-theme="fruit"] .page-diary {
    background: transparent !important;
}

:root[data-theme="fruit"] .diary-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

/* 分期網頁樣式 */
:root[data-theme="fruit"] .page-installment {
    background: transparent !important;
}

:root[data-theme="fruit"] .installment-card {
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid rgba(64, 224, 208, 0.4);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(64, 224, 208, 0.15);
    backdrop-filter: blur(10px);
}

/* 確保所有頁面元素都使用主題顏色 */
:root[data-theme="fruit"] * {
    scrollbar-color: var(--color-primary) rgba(255, 255, 255, 0.3);
}

:root[data-theme="fruit"] *::-webkit-scrollbar {
    width: 8px;
}

:root[data-theme="fruit"] *::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

:root[data-theme="fruit"] *::-webkit-scrollbar-thumb {
    background: var(--color-primary);
    border-radius: 4px;
}

:root[data-theme="fruit"] *::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary-dark);
}

/* ========== 預算設定卡片文字淺色樣式 ========== */
/* 為所有主題統一設置預算標籤文字為淺色 */
.budget-summary-label {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.budget-detail-label {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.stat-label {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.dividend-stat-label {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.account-info {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.account-item-name {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.account-item-currency {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.tab-text {
    color: var(--text-secondary) !important;
    font-weight: 500 !important;
}

.portfolio-shares {
    color: var(--color-accent) !important;
    font-weight: 800 !important;
    font-size: 18px !important;
    background: linear-gradient(135deg, var(--color-accent-rgba-10) 0%, var(--color-accent-rgba-05) 100%) !important;
    border: 2px solid var(--color-accent-rgba-20) !important;
    border-radius: 20px !important;
    padding: 8px 16px !important;
    display: inline-block !important;
    position: relative !important;
    overflow: hidden !important;
    box-shadow: 
        0 4px 12px var(--color-accent-rgba-15),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
}

.portfolio-shares::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.portfolio-shares:hover::before {
    left: 100%;
}

.stock-grid-card-tag--shares {
    font-size: 13px !important;
    font-weight: 800 !important;
    color: var(--color-accent) !important;
    background: linear-gradient(145deg, var(--color-accent-rgba-15) 0%, var(--color-accent-rgba-25) 50%, var(--color-accent-rgba-15) 100%) !important;
    border: 2px solid var(--color-accent-rgba-30) !important;
    border-radius: 12px !important;
    padding: 6px 12px !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    position: relative !important;
    overflow: hidden !important;
    box-shadow: 
        0 3px 10px var(--color-accent-rgba-20),
        inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    transform: translateY(0) !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.stock-grid-card-tag--shares::before {
    content: '📊';
    font-size: 14px !important;
    opacity: 0.8 !important;
}

.stock-grid-card-tag--shares:hover {
    transform: translateY(-2px) scale(1.05) !important;
    box-shadow: 
        0 6px 20px var(--color-accent-rgba-30),
        inset 0 1px 0 rgba(255, 255, 255, 0.25) !important;
    border-color: var(--color-accent-rgba-40) !important;
}

/* 各主題特定調整 */
:root[data-theme="pink"] .budget-summary-label,
:root[data-theme="pink"] .budget-detail-label,
:root[data-theme="pink"] .stat-label,
:root[data-theme="pink"] .dividend-stat-label,
:root[data-theme="pink"] .account-info,
:root[data-theme="pink"] .account-item-name,
:root[data-theme="pink"] .account-item-currency,
:root[data-theme="pink"] .tab-text {
    color: var(--color-primary-rgba-80) !important;
}

:root[data-theme="pink"] .portfolio-shares,
:root[data-theme="pink"] .stock-grid-card-tag--shares {
    color: var(--color-accent) !important;
    background: linear-gradient(145deg, var(--color-primary-rgba-15) 0%, var(--color-primary-rgba-25) 50%, var(--color-primary-rgba-15) 100%) !important;
    border: 2px solid var(--color-primary-rgba-35) !important;
    box-shadow: 
        0 4px 15px var(--color-primary-rgba-25),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

:root[data-theme="pink"] .portfolio-shares:hover,
:root[data-theme="pink"] .stock-grid-card-tag--shares:hover {
    border-color: var(--color-primary-rgba-50) !important;
    box-shadow: 
        0 8px 25px var(--color-primary-rgba-35),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

:root[data-theme="blue"] .budget-summary-label,
:root[data-theme="blue"] .budget-detail-label,
:root[data-theme="blue"] .stat-label,
:root[data-theme="blue"] .dividend-stat-label,
:root[data-theme="blue"] .account-info,
:root[data-theme="blue"] .account-item-name,
:root[data-theme="blue"] .account-item-currency,
:root[data-theme="blue"] .tab-text {
    color: rgba(74, 144, 226, 0.8) !important;
}

:root[data-theme="blue"] .portfolio-shares,
:root[data-theme="blue"] .stock-grid-card-tag--shares {
    color: var(--color-accent) !important;
    background: linear-gradient(145deg, rgba(74, 144, 226, 0.15) 0%, rgba(74, 144, 226, 0.25) 50%, rgba(74, 144, 226, 0.15) 100%) !important;
    border: 2px solid rgba(74, 144, 226, 0.35) !important;
    box-shadow: 
        0 4px 15px rgba(74, 144, 226, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

:root[data-theme="blue"] .portfolio-shares:hover,
:root[data-theme="blue"] .stock-grid-card-tag--shares:hover {
    border-color: rgba(74, 144, 226, 0.5) !important;
    box-shadow: 
        0 8px 25px rgba(74, 144, 226, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

:root[data-theme="green"] .budget-summary-label,
:root[data-theme="green"] .budget-detail-label,
:root[data-theme="green"] .stat-label,
:root[data-theme="green"] .dividend-stat-label,
:root[data-theme="green"] .account-info,
:root[data-theme="green"] .account-item-name,
:root[data-theme="green"] .account-item-currency,
:root[data-theme="green"] .tab-text {
    color: rgba(76, 175, 80, 0.8) !important;
}

:root[data-theme="green"] .portfolio-shares,
:root[data-theme="green"] .stock-grid-card-tag--shares {
    color: var(--color-accent) !important;
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(76, 175, 80, 0.15) 100%) !important;
    border: 1px solid rgba(76, 175, 80, 0.3) !important;
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.25) !important;
}

:root[data-theme="purple"] .budget-summary-label,
:root[data-theme="purple"] .budget-detail-label,
:root[data-theme="purple"] .stat-label,
:root[data-theme="purple"] .dividend-stat-label,
:root[data-theme="purple"] .account-info,
:root[data-theme="purple"] .account-item-name,
:root[data-theme="purple"] .account-item-currency,
:root[data-theme="purple"] .tab-text {
    color: rgba(156, 39, 176, 0.8) !important;
}

:root[data-theme="orange"] .budget-summary-label,
:root[data-theme="orange"] .budget-detail-label,
:root[data-theme="orange"] .stat-label,
:root[data-theme="orange"] .dividend-stat-label,
:root[data-theme="orange"] .account-info,
:root[data-theme="orange"] .account-item-name,
:root[data-theme="orange"] .account-item-currency,
:root[data-theme="orange"] .tab-text {
    color: rgba(255, 152, 0, 0.8) !important;
}

:root[data-theme="red"] .budget-summary-label,
:root[data-theme="red"] .budget-detail-label,
:root[data-theme="red"] .stat-label,
:root[data-theme="red"] .dividend-stat-label,
:root[data-theme="red"] .account-info,
:root[data-theme="red"] .account-item-name,
:root[data-theme="red"] .account-item-currency,
:root[data-theme="red"] .tab-text {
    color: rgba(229, 57, 53, 0.8) !important;
}

:root[data-theme="yellow"] .budget-summary-label,
:root[data-theme="yellow"] .budget-detail-label,
:root[data-theme="yellow"] .stat-label,
:root[data-theme="yellow"] .dividend-stat-label,
:root[data-theme="yellow"] .account-info,
:root[data-theme="yellow"] .account-item-name,
:root[data-theme="yellow"] .account-item-currency,
:root[data-theme="yellow"] .tab-text {
    color: rgba(251, 192, 45, 0.8) !important;
}

:root[data-theme="cyan"] .budget-summary-label,
:root[data-theme="cyan"] .budget-detail-label,
:root[data-theme="cyan"] .stat-label,
:root[data-theme="cyan"] .dividend-stat-label,
:root[data-theme="cyan"] .account-info,
:root[data-theme="cyan"] .account-item-name,
:root[data-theme="cyan"] .account-item-currency,
:root[data-theme="cyan"] .tab-text {
    color: rgba(0, 188, 212, 0.8) !important;
}

:root[data-theme="star"] .budget-summary-label,
:root[data-theme="star"] .budget-detail-label,
:root[data-theme="star"] .stat-label,
:root[data-theme="star"] .dividend-stat-label,
:root[data-theme="star"] .account-info,
:root[data-theme="star"] .account-item-name,
:root[data-theme="star"] .account-item-currency,
:root[data-theme="star"] .tab-text {
    color: rgba(139, 124, 246, 0.8) !important;
}

:root[data-theme="forest"] .budget-summary-label,
:root[data-theme="forest"] .budget-detail-label,
:root[data-theme="forest"] .stat-label,
:root[data-theme="forest"] .dividend-stat-label,
:root[data-theme="forest"] .account-info,
:root[data-theme="forest"] .account-item-name,
:root[data-theme="forest"] .account-item-currency,
:root[data-theme="forest"] .tab-text {
    color: rgba(47, 133, 90, 0.8) !important;
}

:root[data-theme="totoro"] .budget-summary-label,
:root[data-theme="totoro"] .budget-detail-label,
:root[data-theme="totoro"] .stat-label,
:root[data-theme="totoro"] .dividend-stat-label,
:root[data-theme="totoro"] .account-info,
:root[data-theme="totoro"] .account-item-name,
:root[data-theme="totoro"] .account-item-currency,
:root[data-theme="totoro"] .tab-text {
    color: rgba(70, 130, 180, 0.7) !important;
}

:root[data-theme="noface"] .budget-summary-label,
:root[data-theme="noface"] .budget-detail-label,
:root[data-theme="noface"] .stat-label,
:root[data-theme="noface"] .dividend-stat-label,
:root[data-theme="noface"] .account-info,
:root[data-theme="noface"] .account-item-name,
:root[data-theme="noface"] .account-item-currency,
:root[data-theme="noface"] .tab-text {
    color: rgba(246, 195, 67, 0.7) !important;
}

:root[data-theme="demonslayer"] .budget-summary-label,
:root[data-theme="demonslayer"] .budget-detail-label,
:root[data-theme="demonslayer"] .stat-label,
:root[data-theme="demonslayer"] .dividend-stat-label,
:root[data-theme="demonslayer"] .account-info,
:root[data-theme="demonslayer"] .account-item-name,
:root[data-theme="demonslayer"] .account-item-currency,
:root[data-theme="demonslayer"] .tab-text {
    color: rgba(0, 194, 209, 0.7) !important;
}

:root[data-theme="neon"] .budget-summary-label,
:root[data-theme="neon"] .budget-detail-label,
:root[data-theme="neon"] .stat-label,
:root[data-theme="neon"] .dividend-stat-label,
:root[data-theme="neon"] .account-info,
:root[data-theme="neon"] .account-item-name,
:root[data-theme="neon"] .account-item-currency,
:root[data-theme="neon"] .tab-text {
    color: rgba(124, 58, 237, 0.7) !important;
}

:root[data-theme="money"] .budget-summary-label,
:root[data-theme="money"] .budget-detail-label,
:root[data-theme="money"] .stat-label,
:root[data-theme="money"] .dividend-stat-label,
:root[data-theme="money"] .account-info,
:root[data-theme="money"] .account-item-name,
:root[data-theme="money"] .account-item-currency,
:root[data-theme="money"] .tab-text {
    color: rgba(22, 244, 154, 0.7) !important;
}

:root[data-theme="peach"] .budget-summary-label,
:root[data-theme="peach"] .budget-detail-label,
:root[data-theme="peach"] .stat-label,
:root[data-theme="peach"] .dividend-stat-label,
:root[data-theme="peach"] .account-info,
:root[data-theme="peach"] .account-item-name,
:root[data-theme="peach"] .account-item-currency,
:root[data-theme="peach"] .tab-text {
    color: rgba(251, 113, 133, 0.7) !important;
}

:root[data-theme="snow"] .budget-summary-label,
:root[data-theme="snow"] .budget-detail-label,
:root[data-theme="snow"] .stat-label,
:root[data-theme="snow"] .dividend-stat-label,
:root[data-theme="snow"] .account-info,
:root[data-theme="snow"] .account-item-name,
:root[data-theme="snow"] .account-item-currency,
:root[data-theme="snow"] .tab-text {
    color: rgba(147, 197, 253, 0.8) !important;
}

:root[data-theme="midnight"] .budget-summary-label,
:root[data-theme="midnight"] .budget-detail-label,
:root[data-theme="midnight"] .stat-label,
:root[data-theme="midnight"] .dividend-stat-label,
:root[data-theme="midnight"] .account-info,
:root[data-theme="midnight"] .account-item-name,
:root[data-theme="midnight"] .account-item-currency,
:root[data-theme="midnight"] .tab-text {
    color: rgba(99, 102, 241, 0.7) !important;
}

:root[data-theme="space"] .budget-summary-label,
:root[data-theme="space"] .budget-detail-label,
:root[data-theme="space"] .stat-label,
:root[data-theme="space"] .dividend-stat-label,
:root[data-theme="space"] .account-info,
:root[data-theme="space"] .account-item-name,
:root[data-theme="space"] .account-item-currency,
:root[data-theme="space"] .tab-text {
    color: rgba(0, 212, 255, 0.7) !important;
}

:root[data-theme="caitu"] .budget-summary-label,
:root[data-theme="caitu"] .budget-detail-label,
:root[data-theme="caitu"] .stat-label,
:root[data-theme="caitu"] .dividend-stat-label,
:root[data-theme="caitu"] .account-info,
:root[data-theme="caitu"] .account-item-name,
:root[data-theme="caitu"] .account-item-currency,
:root[data-theme="caitu"] .tab-text {
    color: rgba(255, 215, 0, 0.7) !important;
}

:root[data-theme="goldenTree"] .budget-summary-label,
:root[data-theme="goldenTree"] .budget-detail-label,
:root[data-theme="goldenTree"] .stat-label,
:root[data-theme="goldenTree"] .dividend-stat-label,
:root[data-theme="goldenTree"] .account-info,
:root[data-theme="goldenTree"] .account-item-name,
:root[data-theme="goldenTree"] .account-item-currency,
:root[data-theme="goldenTree"] .tab-text {
    color: rgba(139, 69, 19, 0.7) !important;
}

:root[data-theme="chaonengli"] .budget-summary-label,
:root[data-theme="chaonengli"] .budget-detail-label,
:root[data-theme="chaonengli"] .stat-label,
:root[data-theme="chaonengli"] .dividend-stat-label,
:root[data-theme="chaonengli"] .account-info,
:root[data-theme="chaonengli"] .account-item-name,
:root[data-theme="chaonengli"] .account-item-currency,
:root[data-theme="chaonengli"] .tab-text {
    color: rgba(212, 175, 55, 0.7) !important;
}

:root[data-theme="fruit"] .budget-summary-label,
:root[data-theme="fruit"] .budget-detail-label,
:root[data-theme="fruit"] .stat-label,
:root[data-theme="fruit"] .dividend-stat-label,
:root[data-theme="fruit"] .account-info,
:root[data-theme="fruit"] .account-item-name,
:root[data-theme="fruit"] .account-item-currency,
:root[data-theme="fruit"] .tab-text {
    color: rgba(64, 224, 208, 0.7) !important;
}

:root[data-theme="meow"] .budget-summary-label,
:root[data-theme="meow"] .budget-detail-label,
:root[data-theme="meow"] .stat-label,
:root[data-theme="meow"] .dividend-stat-label,
:root[data-theme="meow"] .account-info,
:root[data-theme="meow"] .account-item-name,
:root[data-theme="meow"] .account-item-currency,
:root[data-theme="meow"] .tab-text {
    color: rgba(135, 206, 235, 0.7) !important;
}

/* ========== 藍玫瑰騎士主題樣式 ========== */
:root[data-theme="bluerose"] {
    --color-primary: #007bff;
    --color-primary-light: #4d94ff;
    --color-primary-lighter: #80b3ff;
    --color-primary-dark: #0056b3;
    --color-secondary: #1e3c72;
    --color-secondary-light: #2e5a8a;
    --color-secondary-dark: #152a52;
    --color-accent: #6610f2;
    --bg-primary: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(30, 60, 114, 0.8) 50%, rgba(0, 123, 255, 0.6) 100%);
    --bg-body: rgba(0, 0, 0, 0.85);
    --bg-body-strong: rgba(30, 60, 114, 0.9);
    --bg-gradient: linear-gradient(135deg, #000000 0%, #1e3c72 60%, #007bff 100%);
    --bg-gradient-light: linear-gradient(135deg, rgba(0, 123, 255, 0.15) 0%, rgba(30, 60, 114, 0.25) 100%);
    --bg-white: rgba(0, 0, 0, 0.7);
    --bg-card: rgba(0, 0, 0, 0.75);
    --bg-light: rgba(30, 60, 114, 0.6);
    --bg-lighter: rgba(77, 148, 255, 0.5);
    --bg-soft: rgba(128, 179, 255, 0.4);
    --bg-soft-strong: rgba(30, 60, 114, 0.7);
    --text-primary: rgba(255, 255, 255, 0.95);
    --text-secondary: rgba(173, 216, 230, 0.8);
    --text-tertiary: rgba(135, 206, 235, 0.6);
    --text-strong: rgba(255, 255, 255, 0.98);
    --text-white: rgba(255, 255, 255, 0.98);
    --border-primary: rgba(0, 123, 255, 0.7);
    --border-light: rgba(30, 60, 114, 0.4);
    --border-medium: rgba(77, 148, 255, 0.5);
    --card-border-color: rgba(0, 123, 255, 0.6);
    --control-border-color: rgba(30, 60, 114, 0.5);
    --table-border-color: rgba(30, 60, 114, 0.3);
    --shadow-primary: 0 20px 60px rgba(0, 0, 0, 0.8);
    --shadow-primary-lg: 0 30px 80px rgba(0, 0, 0, 0.7);
    --color-primary-rgba-08: rgba(0, 123, 255, 0.08);
    --color-primary-rgba-10: rgba(0, 123, 255, 0.1);
    --color-primary-rgba-15: rgba(0, 123, 255, 0.15);
    --color-primary-rgba-20: rgba(0, 123, 255, 0.2);
    --color-primary-rgba-25: rgba(0, 123, 255, 0.25);
    --color-primary-rgba-30: rgba(0, 123, 255, 0.3);
    --color-primary-rgba-40: rgba(0, 123, 255, 0.4);
    --color-primary-light-rgba-08: rgba(77, 148, 255, 0.08);
    --color-primary-light-rgba-10: rgba(77, 148, 255, 0.1);
    --color-primary-light-rgba-15: rgba(77, 148, 255, 0.15);
    --color-primary-light-rgba-20: rgba(77, 148, 255, 0.2);
    --color-primary-light-rgba-25: rgba(77, 148, 255, 0.25);
    --color-primary-light-rgba-30: rgba(77, 148, 255, 0.3);
    --color-primary-light-rgba-40: rgba(77, 148, 255, 0.4);
    --color-secondary-rgba-08: rgba(30, 60, 114, 0.08);
    --color-secondary-rgba-10: rgba(30, 60, 114, 0.1);
    --color-secondary-rgba-15: rgba(30, 60, 114, 0.15);
    --color-secondary-rgba-20: rgba(30, 60, 114, 0.2);
    --color-secondary-rgba-25: rgba(30, 60, 114, 0.25);
    --color-secondary-rgba-30: rgba(30, 60, 114, 0.3);
    --color-secondary-rgba-40: rgba(30, 60, 114, 0.4);
    --bg-light-gradient: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(30, 60, 114, 0.6) 100%);
    --bg-light-gradient-reverse: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(30, 60, 114, 0.6) 100%);
    --action-side-bg: color-mix(in srgb, rgba(0, 0, 0, 0.9) 75%, rgba(0, 123, 255, 0.15));
    --action-side-bg-hover: color-mix(in srgb, rgba(0, 0, 0, 0.9) 65%, rgba(0, 123, 255, 0.25));
    --action-side-text: rgba(255, 255, 255, 0.95);
}

:root[data-theme="bluerose"] body {
    background: url("https://i.pinimg.com/1200x/d5/a1/c1/d5a1c149ab3b2a049576504e83fd21f7.jpg") center/cover no-repeat fixed;
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

:root[data-theme="bluerose"] body::before {
    display: none;
}

:root[data-theme="bluerose"] .page-ledger {
    background: transparent !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

:root[data-theme="bluerose"] .page-input,
:root[data-theme="bluerose"] .page-chart,
:root[data-theme="bluerose"] .page-budget,
:root[data-theme="bluerose"] .page-monthly-planner,
:root[data-theme="bluerose"] .page-daily-budget,
:root[data-theme="bluerose"] .page-settings,
:root[data-theme="bluerose"] .page-category-manage,
:root[data-theme="bluerose"] .page-investment,
:root[data-theme="bluerose"] .page-wallet,
:root[data-theme="bluerose"] .page-history,
:root[data-theme="bluerose"] .page-planner {
    background: transparent;
    backdrop-filter: none;
    box-shadow: none;
}

:root[data-theme="bluerose"] .card,
:root[data-theme="bluerose"] .record-card,
:root[data-theme="bluerose"] .ledger-card,
:root[data-theme="bluerose"] .summary-card,
:root[data-theme="bluerose"] .budget-card,
:root[data-theme="bluerose"] .wallet-card,
:root[data-theme="bluerose"] .chart-card,
:root[data-theme="bluerose"] .investment-card {
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(0, 123, 255, 0.4);
    border-radius: 16px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

:root[data-theme="bluerose"] .investment-card,
:root[data-theme="bluerose"] .stock-item-card {
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-light) 25%, var(--color-primary-rgba-20) 50%, var(--bg-lighter) 75%, var(--bg-soft) 100%);
    border: 1px solid var(--color-primary);
    border-radius: 20px;
    box-shadow: 
        0 12px 32px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        0 0 30px var(--color-primary-rgba-15);
}

:root[data-theme="bluerose"] .investment-card::before,
:root[data-theme="bluerose"] .stock-item-card::before {
    background: linear-gradient(135deg, var(--color-primary-rgba-40) 0%, var(--color-primary-rgba-30) 55%, var(--color-primary-rgba-20) 100%);
}

/* 藍玫瑰騎士主題持股卡片文字顏色 */
:root[data-theme="bluerose"] .stock-item-card {
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .stock-item-card h1,
:root[data-theme="bluerose"] .stock-item-card h2,
:root[data-theme="bluerose"] .stock-item-card h3,
:root[data-theme="bluerose"] .stock-item-card h4,
:root[data-theme="bluerose"] .stock-item-card h5,
:root[data-theme="bluerose"] .stock-item-card h6,
:root[data-theme="bluerose"] .stock-item-card .title,
:root[data-theme="bluerose"] .stock-item-card .subtitle,
:root[data-theme="bluerose"] .stock-item-card .card-title,
:root[data-theme="bluerose"] .stock-item-card .card-subtitle,
:root[data-theme="bluerose"] .stock-item-card .stock-name {
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .stock-item-card .text,
:root[data-theme="bluerose"] .stock-item-card .description,
:root[data-theme="bluerose"] .stock-item-card .content,
:root[data-theme="bluerose"] .stock-item-card p,
:root[data-theme="bluerose"] .stock-item-card span,
:root[data-theme="bluerose"] .stock-item-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .stock-item-card .highlight,
:root[data-theme="bluerose"] .stock-item-card .accent,
:root[data-theme="bluerose"] .stock-item-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="bluerose"] .stock-item-card .secondary-text,
:root[data-theme="bluerose"] .stock-item-card .muted-text,
:root[data-theme="bluerose"] .stock-item-card .stock-code {
    color: var(--text-secondary) !important;
}

/* 管理投資卡片頁面樣式 */
:root[data-theme="bluerose"] .page-manage-investment {
    background: transparent !important;
}

:root[data-theme="bluerose"] .manage-investment-card {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid rgba(0, 123, 255, 0.4);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card h1,
:root[data-theme="bluerose"] .manage-investment-card h2,
:root[data-theme="bluerose"] .manage-investment-card h3,
:root[data-theme="bluerose"] .manage-investment-card h4,
:root[data-theme="bluerose"] .manage-investment-card h5,
:root[data-theme="bluerose"] .manage-investment-card h6,
:root[data-theme="bluerose"] .manage-investment-card .title,
:root[data-theme="bluerose"] .manage-investment-card .subtitle,
:root[data-theme="bluerose"] .manage-investment-card .card-title,
:root[data-theme="bluerose"] .manage-investment-card .card-subtitle {
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card .text,
:root[data-theme="bluerose"] .manage-investment-card .description,
:root[data-theme="bluerose"] .manage-investment-card .content,
:root[data-theme="bluerose"] .manage-investment-card p,
:root[data-theme="bluerose"] .manage-investment-card span,
:root[data-theme="bluerose"] .manage-investment-card div {
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card .highlight,
:root[data-theme="bluerose"] .manage-investment-card .accent,
:root[data-theme="bluerose"] .manage-investment-card .primary-text {
    color: var(--color-secondary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card .secondary-text,
:root[data-theme="bluerose"] .manage-investment-card .muted-text {
    color: var(--text-secondary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card .label,
:root[data-theme="bluerose"] .manage-investment-card .form-label {
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .manage-investment-card .value,
:root[data-theme="bluerose"] .manage-investment-card .amount {
    color: var(--color-accent) !important;
}

/* 年度報告頁面樣式 */
:root[data-theme="bluerose"] .page-annual-report {
    background: transparent !important;
}

:root[data-theme="bluerose"] .annual-report-card {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid rgba(0, 123, 255, 0.4);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

/* 關於記帳本頁面樣式 */
:root[data-theme="bluerose"] .page-about {
    background: transparent !important;
}

:root[data-theme="bluerose"] .about-card {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid rgba(0, 123, 255, 0.4);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

/* 記帳日記頁面樣式 */
:root[data-theme="bluerose"] .page-diary {
    background: transparent !important;
}

:root[data-theme="bluerose"] .diary-card {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid rgba(0, 123, 255, 0.4);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

/* 分期網頁樣式 */
:root[data-theme="bluerose"] .page-installment {
    background: transparent !important;
}

:root[data-theme="bluerose"] .installment-card {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid rgba(0, 123, 255, 0.4);
    border-radius: 20px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

/* 小森對話框樣式 */
:root[data-theme="bluerose"] .modal-content,
:root[data-theme="bluerose"] .modal-content-standard,
:root[data-theme="bluerose"] .dialog-content,
:root[data-theme="bluerose"] .popup-content {
    background: rgba(0, 0, 0, 0.8) !important;
    border: 2px solid rgba(0, 123, 255, 0.5) !important;
    border-radius: 20px !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    backdrop-filter: blur(15px) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .modal-header,
:root[data-theme="bluerose"] .dialog-header,
:root[data-theme="bluerose"] .popup-header {
    background: rgba(0, 123, 255, 0.2) !important;
    border-bottom: 1px solid rgba(0, 123, 255, 0.3) !important;
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .modal-title,
:root[data-theme="bluerose"] .dialog-title,
:root[data-theme="bluerose"] .popup-title {
    color: var(--color-primary) !important;
}

/* 返回按鈕樣式 */
:root[data-theme="bluerose"] .back-btn,
:root[data-theme="bluerose"] .return-btn,
:root[data-theme="bluerose"] .cancel-btn {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
    border: 1px solid var(--color-primary) !important;
    color: white !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3) !important;
}

:root[data-theme="bluerose"] .back-btn:hover,
:root[data-theme="bluerose"] .return-btn:hover,
:root[data-theme="bluerose"] .cancel-btn:hover {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%) !important;
    box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4) !important;
    transform: translateY(-2px) !important;
}

/* 歷史記錄備註字體顏色 */
:root[data-theme="bluerose"] .history-transaction-note {
    color: rgba(255, 255, 255, 0.8) !important;
}

/* 選擇帳戶字體顏色 */
:root[data-theme="bluerose"] .account-info,
:root[data-theme="bluerose"] .account-item-name,
:root[data-theme="bluerose"] .account-item-currency,
:root[data-theme="bluerose"] .tab-text {
    color: rgba(173, 216, 230, 0.8) !important;
}

/* 預算設定卡片文字顏色 */
:root[data-theme="bluerose"] .budget-summary-label,
:root[data-theme="bluerose"] .budget-detail-label,
:root[data-theme="bluerose"] .stat-label,
:root[data-theme="bluerose"] .dividend-stat-label {
    color: rgba(173, 216, 230, 0.8) !important;
}

/* 數字鍵盤樣式 */
:root[data-theme="bluerose"] .keypad-container,
:root[data-theme="bluerose"] .number-keypad {
    background: rgba(0, 0, 0, 0.8) !important;
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 20px !important;
    backdrop-filter: blur(10px) !important;
}

:root[data-theme="bluerose"] .key-btn {
    background: rgba(0, 123, 255, 0.2) !important;
    border: 1px solid rgba(0, 123, 255, 0.4) !important;
    color: var(--text-primary) !important;
    border-radius: 12px !important;
}

:root[data-theme="bluerose"] .key-btn:hover {
    background: rgba(0, 123, 255, 0.3) !important;
    border-color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .key-btn.equal {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%) !important;
    color: white !important;
}

/* 投資卡片圖片樣式 */
:root[data-theme="bluerose"] .investment-card-image,
:root[data-theme="bluerose"] .card-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 記帳卡片圖片樣式 */
:root[data-theme="bluerose"] .record-card-image,
:root[data-theme="bluerose"] .ledger-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 錢包預算設定卡片圖片 */
:root[data-theme="bluerose"] .budget-card-image,
:root[data-theme="bluerose"] .wallet-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 每月規劃圖片 */
:root[data-theme="bluerose"] .planner-image,
:root[data-theme="bluerose"] .monthly-planner-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 投資設定樣式 */
:root[data-theme="bluerose"] .investment-settings,
:root[data-theme="bluerose"] .settings-card {
    background: rgba(0, 0, 0, 0.8) !important;
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 20px !important;
    backdrop-filter: blur(10px) !important;
}

/* 持有中買入卡片圖片 */
:root[data-theme="bluerose"] .buy-card-image,
:root[data-theme="bluerose"] .holding-buy-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 賣出卡片圖片 */
:root[data-theme="bluerose"] .sell-card-image,
:root[data-theme="bluerose"] .holding-sell-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 股息卡片圖片 */
:root[data-theme="bluerose"] .dividend-card-image,
:root[data-theme="bluerose"] .dividend-image {
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 定期定額和管理投資卡片 */
:root[data-theme="bluerose"] .regular-savings-card,
:root[data-theme="bluerose"] .investment-management-card {
    background: rgba(0, 0, 0, 0.8) !important;
    border: 2px solid rgba(0, 123, 255, 0.4) !important;
    border-radius: 20px !important;
    backdrop-filter: blur(10px) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .regular-savings-card h1,
:root[data-theme="bluerose"] .regular-savings-card h2,
:root[data-theme="bluerose"] .regular-savings-card h3,
:root[data-theme="bluerose"] .regular-savings-card h4,
:root[data-theme="bluerose"] .regular-savings-card h5,
:root[data-theme="bluerose"] .regular-savings-card h6,
:root[data-theme="bluerose"] .investment-management-card h1,
:root[data-theme="bluerose"] .investment-management-card h2,
:root[data-theme="bluerose"] .investment-management-card h3,
:root[data-theme="bluerose"] .investment-management-card h4,
:root[data-theme="bluerose"] .investment-management-card h5,
:root[data-theme="bluerose"] .investment-management-card h6,
:root[data-theme="bluerose"] .regular-savings-card .title,
:root[data-theme="bluerose"] .regular-savings-card .subtitle,
:root[data-theme="bluerose"] .regular-savings-card .card-title,
:root[data-theme="bluerose"] .regular-savings-card .card-subtitle,
:root[data-theme="bluerose"] .investment-management-card .title,
:root[data-theme="bluerose"] .investment-management-card .subtitle,
:root[data-theme="bluerose"] .investment-management-card .card-title,
:root[data-theme="bluerose"] .investment-management-card .card-subtitle {
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .regular-savings-card .text,
:root[data-theme="bluerose"] .regular-savings-card .description,
:root[data-theme="bluerose"] .regular-savings-card .content,
:root[data-theme="bluerose"] .regular-savings-card p,
:root[data-theme="bluerose"] .regular-savings-card span,
:root[data-theme="bluerose"] .regular-savings-card div,
:root[data-theme="bluerose"] .investment-management-card .text,
:root[data-theme="bluerose"] .investment-management-card .description,
:root[data-theme="bluerose"] .investment-management-card .content,
:root[data-theme="bluerose"] .investment-management-card p,
:root[data-theme="bluerose"] .investment-management-card span,
:root[data-theme="bluerose"] .investment-management-card div {
    color: var(--text-primary) !important;
}

/* 年度報告、關於記帳本、記帳日記文字顏色 */
:root[data-theme="bluerose"] .annual-report-card,
:root[data-theme="bluerose"] .about-card,
:root[data-theme="bluerose"] .diary-card {
    color: var(--text-primary) !important;
}

:root[data-theme="bluerose"] .annual-report-card h1,
:root[data-theme="bluerose"] .annual-report-card h2,
:root[data-theme="bluerose"] .annual-report-card h3,
:root[data-theme="bluerose"] .annual-report-card h4,
:root[data-theme="bluerose"] .annual-report-card h5,
:root[data-theme="bluerose"] .annual-report-card h6,
:root[data-theme="bluerose"] .about-card h1,
:root[data-theme="bluerose"] .about-card h2,
:root[data-theme="bluerose"] .about-card h3,
:root[data-theme="bluerose"] .about-card h4,
:root[data-theme="bluerose"] .about-card h5,
:root[data-theme="bluerose"] .about-card h6,
:root[data-theme="bluerose"] .diary-card h1,
:root[data-theme="bluerose"] .diary-card h2,
:root[data-theme="bluerose"] .diary-card h3,
:root[data-theme="bluerose"] .diary-card h4,
:root[data-theme="bluerose"] .diary-card h5,
:root[data-theme="bluerose"] .diary-card h6,
:root[data-theme="bluerose"] .annual-report-card .title,
:root[data-theme="bluerose"] .annual-report-card .subtitle,
:root[data-theme="bluerose"] .annual-report-card .card-title,
:root[data-theme="bluerose"] .annual-report-card .card-subtitle,
:root[data-theme="bluerose"] .about-card .title,
:root[data-theme="bluerose"] .about-card .subtitle,
:root[data-theme="bluerose"] .about-card .card-title,
:root[data-theme="bluerose"] .about-card .card-subtitle,
:root[data-theme="bluerose"] .diary-card .title,
:root[data-theme="bluerose"] .diary-card .subtitle,
:root[data-theme="bluerose"] .diary-card .card-title,
:root[data-theme="bluerose"] .diary-card .card-subtitle {
    color: var(--color-primary) !important;
}

:root[data-theme="bluerose"] .annual-report-card .text,
:root[data-theme="bluerose"] .annual-report-card .description,
:root[data-theme="bluerose"] .annual-report-card .content,
:root[data-theme="bluerose"] .annual-report-card p,
:root[data-theme="bluerose"] .annual-report-card span,
:root[data-theme="bluerose"] .annual-report-card div,
:root[data-theme="bluerose"] .about-card .text,
:root[data-theme="bluerose"] .about-card .description,
:root[data-theme="bluerose"] .about-card .content,
:root[data-theme="bluerose"] .about-card p,
:root[data-theme="bluerose"] .about-card span,
:root[data-theme="bluerose"] .about-card div,
:root[data-theme="bluerose"] .diary-card .text,
:root[data-theme="bluerose"] .diary-card .description,
:root[data-theme="bluerose"] .diary-card .content,
:root[data-theme="bluerose"] .diary-card p,
:root[data-theme="bluerose"] .diary-card span,
:root[data-theme="bluerose"] .diary-card div {
    color: var(--text-primary) !important;
}

/* 藍玫瑰騎士主題淺色文字調整 */
:root[data-theme="bluerose"] .budget-summary-label,
:root[data-theme="bluerose"] .budget-detail-label,
:root[data-theme="bluerose"] .stat-label,
:root[data-theme="bluerose"] .dividend-stat-label,
:root[data-theme="bluerose"] .account-info,
:root[data-theme="bluerose"] .account-item-name,
:root[data-theme="bluerose"] .account-item-currency,
:root[data-theme="bluerose"] .tab-text {
    color: rgba(173, 216, 230, 0.8) !important;
}
