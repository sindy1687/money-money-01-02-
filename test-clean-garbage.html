<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº‚ç¢¼åœ–ç¤ºæ¸…ç†æ¸¬è©¦</title>
    <link rel="stylesheet" href="clean-garbage-icons.css">
    <style>
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .test-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
        }
        .test-label {
            font-size: 14px;
            color: #666;
            min-width: 150px;
        }
        .test-result {
            font-size: 16px;
            font-weight: bold;
        }
        .status {
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* æ¸¬è©¦æ¨£å¼ */
        .metric-quote-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }
        .metric-quick-link {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 12px;
        }
        .theme-item-preview--image.error {
            width: 100px;
            height: 100px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .record-card.dividend-reinvest {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            position: relative;
            margin: 10px 0;
        }
        .investment-form-back-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }
        .form-query-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }
        .quick-title {
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
        }
        .input-page-header {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            position: relative;
        }
        .investment-back-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }
        .input-field-label {
            font-size: 14px;
            color: #666;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§¹ äº‚ç¢¼åœ–ç¤ºæ¸…ç†æ¸¬è©¦</h1>
        
        <div class="status info">
            æ­¤é é¢ç”¨æ–¼æ¸¬è©¦äº‚ç¢¼åœ–ç¤ºæ˜¯å¦å·²è¢«æˆåŠŸæ¸…ç†
        </div>

        <div class="test-section">
            <h2 class="test-title">æŒ‰éˆ•åœ–ç¤ºæ¸¬è©¦</h2>
            
            <div class="test-item">
                <span class="test-label">metric-quote-btn:</span>
                <button class="metric-quote-btn">å¼•ç”¨æŒ‰éˆ•</button>
                <span class="test-result" id="result1">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">metric-quick-link:</span>
                <button class="metric-quick-link">å¿«é€Ÿé€£çµ</button>
                <span class="test-result" id="result2">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">investment-form-back-btn:</span>
                <button class="investment-form-back-btn">è¿”å›</button>
                <span class="test-result" id="result3">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">form-query-btn:</span>
                <button class="form-query-btn">æŸ¥è©¢</button>
                <span class="test-result" id="result4">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">investment-back-btn:</span>
                <button class="investment-back-btn">æŠ•è³‡è¿”å›</button>
                <span class="test-result" id="result5">æª¢æ¸¬ä¸­...</span>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">å…¶ä»–å…ƒç´ æ¸¬è©¦</h2>
            
            <div class="test-item">
                <span class="test-label">quick-title:</span>
                <div class="quick-title">å¿«é€Ÿæ¨™é¡Œ</div>
                <span class="test-result" id="result6">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">input-field-label:</span>
                <div class="input-field-label">è¼¸å…¥æ¬„ä½æ¨™ç±¤</div>
                <span class="test-result" id="result7">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">theme-item-preview--image.error:</span>
                <div class="theme-item-preview--image.error">éŒ¯èª¤åœ–ç‰‡</div>
                <span class="test-result" id="result8">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">record-card.dividend-reinvest:</span>
                <div class="record-card.dividend-reinvest">è‚¡æ¯å†æŠ•è³‡å¡ç‰‡</div>
                <span class="test-result" id="result9">æª¢æ¸¬ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span class="test-label">input-page-header:</span>
                <div class="input-page-header">è¼¸å…¥é é¢æ¨™é¡Œ</div>
                <span class="test-result" id="result10">æª¢æ¸¬ä¸­...</span>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">æª¢æ¸¬çµæœ</h2>
            <div id="detection-results"></div>
        </div>
    </div>

    <script src="clean-garbage-icons.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§¹ äº‚ç¢¼åœ–ç¤ºæ¸…ç†æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ');
            
            // æª¢æ¸¬å‡½æ•¸
            function detectGarbageIcons() {
                const testElements = [
                    { selector: '.metric-quote-btn', id: 'result1' },
                    { selector: '.metric-quick-link', id: 'result2' },
                    { selector: '.investment-form-back-btn', id: 'result3' },
                    { selector: '.form-query-btn', id: 'result4' },
                    { selector: '.investment-back-btn', id: 'result5' },
                    { selector: '.quick-title', id: 'result6' },
                    { selector: '.input-field-label', id: 'result7' },
                    { selector: '.theme-item-preview--image.error', id: 'result8' },
                    { selector: '.record-card.dividend-reinvest', id: 'result9' },
                    { selector: '.input-page-header', id: 'result10' }
                ];
                
                let cleanCount = 0;
                let garbageCount = 0;
                let results = [];
                
                testElements.forEach(test => {
                    const element = document.querySelector(test.selector);
                    if (element) {
                        const beforeStyle = window.getComputedStyle(element, '::before');
                        const afterStyle = window.getComputedStyle(element, '::after');
                        
                        const beforeContent = beforeStyle.content;
                        const afterContent = afterStyle.content;
                        
                        const hasGarbage = (beforeContent && beforeContent.includes('')) || 
                                        (afterContent && afterContent.includes(''));
                        
                        const resultElement = document.getElementById(test.id);
                        if (resultElement) {
                            if (hasGarbage) {
                                resultElement.textContent = 'âŒ ä»æœ‰äº‚ç¢¼';
                                resultElement.className = 'test-result error';
                                garbageCount++;
                            } else {
                                resultElement.textContent = 'âœ… å·²æ¸…ç†';
                                resultElement.className = 'test-result success';
                                cleanCount++;
                            }
                        }
                        
                        results.push({
                            selector: test.selector,
                            beforeContent: beforeContent,
                            afterContent: afterContent,
                            clean: !hasGarbage
                        });
                    }
                });
                
                return { cleanCount, garbageCount, results };
            }
            
            // é¡¯ç¤ºæª¢æ¸¬çµæœ
            function showResults() {
                const { cleanCount, garbageCount, results } = detectGarbageIcons();
                const resultsDiv = document.getElementById('detection-results');
                
                let html = `
                    <div class="status ${garbageCount === 0 ? 'success' : 'error'}">
                        <strong>æª¢æ¸¬å®Œæˆï¼š</strong> 
                        âœ… å·²æ¸…ç†: ${cleanCount} å€‹å…ƒç´  | 
                        ${garbageCount > 0 ? `âŒ ä»æœ‰äº‚ç¢¼: ${garbageCount} å€‹å…ƒç´ ` : 'ğŸ‰ æ‰€æœ‰äº‚ç¢¼å·²æ¸…ç†ï¼'}
                    </div>
                    <h3>è©³ç´°çµæœï¼š</h3>
                `;
                
                results.forEach(result => {
                    html += `
                        <div class="test-item">
                            <span class="test-label">${result.selector}:</span>
                            <span class="test-result ${result.clean ? 'success' : 'error'}">
                                ${result.clean ? 'âœ… å·²æ¸…ç†' : 'âŒ ä»æœ‰äº‚ç¢¼'}
                            </span>
                            <br>
                            <small style="color: #666;">
                                before: "${result.beforeContent}" | after: "${result.afterContent}"
                            </small>
                        </div>
                    `;
                });
                
                resultsDiv.innerHTML = html;
                
                // åŸ·è¡Œæ¸…ç†è…³æœ¬
                if (window.cleanGarbageIcons) {
                    setTimeout(() => {
                        console.log('ğŸ§¹ åŸ·è¡Œæ¸…ç†è…³æœ¬...');
                        window.cleanGarbageIcons();
                        
                        // å†æ¬¡æª¢æ¸¬
                        setTimeout(() => {
                            showResults();
                        }, 1000);
                    }, 2000);
                }
            }
            
            // å»¶é²æª¢æ¸¬ä»¥ç¢ºä¿æ¨£å¼å·²æ‡‰ç”¨
            setTimeout(() => {
                showResults();
            }, 1000);
        });
    </script>
</body>
</html>
