<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒè‚¡å¡ç‰‡ä¸»é¡Œæ¸¬è©¦</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="little-prince-theme.css">
    <style>
        body {
            font-family: 'Georgia', 'Times New Roman', 'Noto Sans TC', serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            position: relative;
            min-height: 200px;
        }
        
        .controls {
            text-align: center;
            margin: 40px 0;
        }
        
        .controls button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            background: #007bff;
            color: white;
            transition: all 0.3s ease;
        }
        
        .controls button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body data-theme="littlePrince">
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ‘‘ æŒè‚¡å¡ç‰‡ä¸»é¡Œæ¸¬è©¦</h1>
            <p>å°ˆé–€æ¸¬è©¦å°ç‹å­ä¸»é¡Œä¸‹çš„æŒè‚¡å¡ç‰‡æ¨£å¼</p>
        </div>

        <div class="controls">
            <button onclick="applyLittlePrinceTheme()">æ‡‰ç”¨å°ç‹å­ä¸»é¡Œ</button>
            <button onclick="applyDefaultTheme()">æ‡‰ç”¨é è¨­ä¸»é¡Œ</button>
            <button onclick="forceApplyStyles()">å¼·åˆ¶æ‡‰ç”¨æ¨£å¼</button>
            <button onclick="debugStyles()">èª¿è©¦æ¨£å¼</button>
            <button onclick="clearDebugInfo()">æ¸…é™¤èª¿è©¦ä¿¡æ¯</button>
        </div>

        <div class="debug-info" id="debugInfo">
èª¿è©¦ä¿¡æ¯å°‡é¡¯ç¤ºåœ¨é€™è£¡...
        </div>

        <div class="test-grid">
            <!-- æŒæœ‰ä¸­å¡ç‰‡ -->
            <div class="card holding-card">
                <h2>æŒæœ‰ä¸­è‚¡ç¥¨</h2>
                <p>è‚¡ç¥¨ä»£ç¢¼: <span class="stock-code">2330</span></p>
                <p>è‚¡ç¥¨åç¨±: å°ç©é›»</p>
                <p>ç•¶å‰åƒ¹æ ¼: <span class="price">1,770.00</span></p>
                <p>æ¼²è·Œå¹…: <span class="percentage positive">+10.00 (+0.57%)</span></p>
                <p>æ˜¨æ”¶: <span class="yesterday-close">1,760.00</span></p>
                <p>æŒæœ‰è‚¡æ•¸: <span class="shares">24 è‚¡</span></p>
                <button class="btn">ç®¡ç†</button>
            </div>

            <!-- æŒæœ‰å¡ç‰‡2 -->
            <div class="card holdings-card">
                <h2>æŒæœ‰å¤šç­†è‚¡ç¥¨</h2>
                <p>è‚¡ç¥¨ä»£ç¢¼: <span class="stock-code">0056</span></p>
                <p>è‚¡ç¥¨åç¨±: é«˜è‚¡æ¯ETF</p>
                <p>ç•¶å‰åƒ¹æ ¼: <span class="price">125.50</span></p>
                <p>æ¼²è·Œå¹…: <span class="percentage negative">-0.50 (-0.40%)</span></p>
                <p>æ˜¨æ”¶: <span class="yesterday-close">126.00</span></p>
                <p>æŒæœ‰è‚¡æ•¸: <span class="shares">1000 è‚¡</span></p>
                <button class="btn">æŸ¥çœ‹è©³æƒ…</button>
            </div>

            <!-- è‚¡ç¥¨æŒæœ‰å¡ç‰‡ -->
            <div class="card stock-holding-card">
                <h2>è‚¡ç¥¨æŒæœ‰æ˜ç´°</h2>
                <p>è‚¡ç¥¨ä»£ç¢¼: <span class="stock-code">3008</span></p>
                <p>è‚¡ç¥¨åç¨±: å¤§ç«‹å…‰</p>
                <p>ç•¶å‰åƒ¹æ ¼: <span class="price">2,450.00</span></p>
                <p>æ¼²è·Œå¹…: <span class="percentage positive">+25.00 (+1.03%)</span></p>
                <p>æ˜¨æ”¶: <span class="yesterday-close">2,425.00</span></p>
                <p>æŒæœ‰è‚¡æ•¸: <span class="shares">10 è‚¡</span></p>
                <button class="btn">äº¤æ˜“è¨˜éŒ„</button>
            </div>

            <!-- è‚¡ç¥¨å¡ç‰‡ -->
            <div class="card stock-card">
                <div class="stock-header">
                    <div class="stock-info">
                        <span class="stock-icon">ğŸ“Š</span>
                        <div class="stock-name">å°ç©é›» (2330)</div>
                        <div class="stock-price">NT$ 650.00</div>
                    </div>
                    <div class="stock-grid-card-change positive">â–² +5.2%</div>
                </div>
            </div>

            <!-- æŠ•è³‡çµ„åˆå¡ç‰‡ -->
            <div class="card portfolio-card">
                <div class="portfolio-card-title">æŒè‚¡æ•¸</div>
                <div class="portfolio-card-value">1,000</div>
            </div>

            <!-- æŠ•è³‡çµ„åˆå¡ç‰‡2 -->
            <div class="card portfolio-card">
                <div class="portfolio-card-title">æœªå¯¦ç¾æç›Š</div>
                <div class="portfolio-card-value unrealized-pnl">+NT$8,250</div>
            </div>

            <!-- æŠ•è³‡çµ„åˆå¡ç‰‡3 -->
            <div class="card portfolio-card">
                <div class="portfolio-card-title">å ±é…¬ç‡</div>
                <div class="portfolio-card-value">+5.48%</div>
            </div>

            <!-- æŠ•è³‡çµ„åˆå¡ç‰‡4 -->
            <div class="card portfolio-card">
                <div class="portfolio-card-title">ç¾åƒ¹è¼¸å…¥</div>
                <input type="number" class="current-price-input" placeholder="è«‹è¼¸å…¥ç¾åƒ¹" value="158.75">
            </div>
        </div>
    </div>

    <script>
        let debugInfo = document.getElementById('debugInfo');
        
        function log(message) {
            debugInfo.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
            debugInfo.scrollTop = debugInfo.scrollHeight;
            console.log(message);
        }
        
        function clearDebugInfo() {
            debugInfo.textContent = '';
            log('èª¿è©¦ä¿¡æ¯å·²æ¸…é™¤');
        }
        
        function applyLittlePrinceTheme() {
            log('=== æ‡‰ç”¨å°ç‹å­ä¸»é¡Œ ===');
            document.body.setAttribute('data-theme', 'littlePrince');
            document.documentElement.setAttribute('data-theme', 'littlePrince');
            log('ä¸»é¡Œå±¬æ€§å·²è¨­ç½®ç‚º littlePrince');
            
            setTimeout(() => {
                checkCardStyles();
            }, 100);
        }
        
        function applyDefaultTheme() {
            log('=== æ‡‰ç”¨é è¨­ä¸»é¡Œ ===');
            document.body.removeAttribute('data-theme');
            document.documentElement.removeAttribute('data-theme');
            log('ä¸»é¡Œå±¬æ€§å·²æ¸…é™¤');
            
            setTimeout(() => {
                checkCardStyles();
            }, 100);
        }
        
        function forceApplyStyles() {
            log('=== å¼·åˆ¶æ‡‰ç”¨æ¨£å¼ ===');
            
            const holdingCards = document.querySelectorAll('.holding-card, .holdings-card, .stock-holding-card');
            const stockCards = document.querySelectorAll('.stock-card');
            const portfolioCards = document.querySelectorAll('.portfolio-card');
            const allCards = document.querySelectorAll('.card');
            
            log(`æ‰¾åˆ° ${holdingCards.length} å€‹æŒè‚¡å¡ç‰‡`);
            log(`æ‰¾åˆ° ${stockCards.length} å€‹è‚¡ç¥¨å¡ç‰‡`);
            log(`æ‰¾åˆ° ${portfolioCards.length} å€‹æŠ•è³‡çµ„åˆå¡ç‰‡`);
            log(`æ‰¾åˆ° ${allCards.length} å€‹ç¸½å¡ç‰‡`);
            
            // è™•ç†æ‰€æœ‰å¡ç‰‡
            allCards.forEach((card, index) => {
                log(`è™•ç†å¡ç‰‡ ${index + 1}: ${card.className}`);
                
                // å¼·åˆ¶è¨­ç½®å…§è¯æ¨£å¼
                card.style.setProperty('background', 'url("https://i.pinimg.com/736x/91/87/48/918748238a3b26c91dcacd9926591d57.jpg") center/cover fixed', 'important');
                card.style.setProperty('background-image', 'url("https://i.pinimg.com/736x/91/87/48/918748238a3b26c91dcacd9926591d57.jpg")', 'important');
                card.style.setProperty('background-size', 'cover', 'important');
                card.style.setProperty('background-position', 'center', 'important');
                card.style.setProperty('border', '3px solid #D4AF37', 'important');
                card.style.setProperty('border-radius', '16px', 'important');
                card.style.setProperty('backdrop-filter', 'blur(20px)', 'important');
                card.style.setProperty('position', 'relative', 'important');
                card.style.setProperty('overflow', 'hidden', 'important');
                
                log(`å¡ç‰‡ ${index + 1} æ¨£å¼å·²å¼·åˆ¶æ‡‰ç”¨`);
            });
            
            setTimeout(() => {
                checkCardStyles();
            }, 100);
        }
        
        function checkCardStyles() {
            log('=== æª¢æŸ¥å¡ç‰‡æ¨£å¼ ===');
            
            const holdingCards = document.querySelectorAll('.holding-card, .holdings-card, .stock-holding-card');
            const stockCards = document.querySelectorAll('.stock-card');
            const portfolioCards = document.querySelectorAll('.portfolio-card');
            const allCards = document.querySelectorAll('.card');
            
            log(`å¡ç‰‡çµ±è¨ˆ:`);
            log(`  ç¸½å¡ç‰‡æ•¸: ${allCards.length}`);
            log(`  æŒè‚¡å¡ç‰‡: ${holdingCards.length}`);
            log(`  è‚¡ç¥¨å¡ç‰‡: ${stockCards.length}`);
            log(`  æŠ•è³‡çµ„åˆå¡ç‰‡: ${portfolioCards.length}`);
            
            // æª¢æŸ¥æŒè‚¡å¡ç‰‡
            holdingCards.forEach((card, index) => {
                const computedStyle = window.getComputedStyle(card);
                log(`\n--- æŒè‚¡å¡ç‰‡ ${index + 1} (${card.className}) ---`);
                logCardStyle(computedStyle, card.className);
            });
            
            // æª¢æŸ¥è‚¡ç¥¨å¡ç‰‡
            stockCards.forEach((card, index) => {
                const computedStyle = window.getComputedStyle(card);
                log(`\n--- è‚¡ç¥¨å¡ç‰‡ ${index + 1} (${card.className}) ---`);
                logCardStyle(computedStyle, card.className);
            });
            
            // æª¢æŸ¥æŠ•è³‡çµ„åˆå¡ç‰‡
            portfolioCards.forEach((card, index) => {
                const computedStyle = window.getComputedStyle(card);
                log(`\n--- æŠ•è³‡çµ„åˆå¡ç‰‡ ${index + 1} (${card.className}) ---`);
                logCardStyle(computedStyle, card.className);
            });
        }
        
        function logCardStyle(computedStyle, className) {
            log(`èƒŒæ™¯åœ–ç‰‡: ${computedStyle.backgroundImage.substring(0, 100)}...`);
            log(`é‚Šæ¡†: ${computedStyle.borderWidth} ${computedStyle.borderStyle} ${computedStyle.borderColor}`);
            log(`é‚Šæ¡†åŠå¾‘: ${computedStyle.borderRadius}`);
            log(`èƒŒæ™¯é¡è‰²: ${computedStyle.backgroundColor}`);
            log(`backdrop-filter: ${computedStyle.backdropFilter}`);
            
            // æª¢æŸ¥æ˜¯å¦åŒ…å«å°ç‹å­åœ–ç‰‡
            if (computedStyle.backgroundImage.includes('918748238a3b26c91dcacd9926591d57.jpg')) {
                log('âœ… èƒŒæ™¯åœ–ç‰‡æ­£ç¢º');
            } else {
                log('âŒ èƒŒæ™¯åœ–ç‰‡ä¸æ­£ç¢º');
            }
            
            // æª¢æŸ¥é‚Šæ¡†æ˜¯å¦ç‚ºé‡‘è‰²
            if (computedStyle.borderColor.includes('212, 175, 55') || 
                computedStyle.borderColor.includes('d4af37') ||
                computedStyle.borderColor.includes('218, 165, 32')) {
                log('âœ… é‚Šæ¡†é¡è‰²æ­£ç¢º');
            } else {
                log('âŒ é‚Šæ¡†é¡è‰²ä¸æ­£ç¢º: ' + computedStyle.borderColor);
            }
        }
        
        function debugStyles() {
            log('=== è©³ç´°èª¿è©¦ä¿¡æ¯ ===');
            
            // æª¢æŸ¥ç•¶å‰ä¸»é¡Œ
            const currentTheme = document.body.getAttribute('data-theme') || 
                                document.documentElement.getAttribute('data-theme');
            log(`ç•¶å‰ä¸»é¡Œ: ${currentTheme}`);
            
            // æª¢æŸ¥CSSæ–‡ä»¶
            const cssLinks = document.querySelectorAll('link[rel="stylesheet"]');
            log('CSSæ–‡ä»¶:');
            cssLinks.forEach((link, index) => {
                log(`  ${index + 1}: ${link.href}`);
            });
            
            // æª¢æŸ¥CSSè®Šæ•¸
            const rootStyles = getComputedStyle(document.documentElement);
            log('CSSè®Šæ•¸:');
            log(`  --theme-gold: ${rootStyles.getPropertyValue('--theme-gold')}`);
            log(`  --theme-shadow: ${rootStyles.getPropertyValue('--theme-shadow')}`);
            log(`  --theme-primary: ${rootStyles.getPropertyValue('--theme-primary')}`);
            
            // æª¢æŸ¥æ‰€æœ‰å¡ç‰‡å…ƒç´ 
            const allCards = document.querySelectorAll('.card');
            const holdingCards = document.querySelectorAll('.holding-card, .holdings-card, .stock-holding-card');
            log(`å¡ç‰‡çµ±è¨ˆ: ç¸½å…± ${allCards.length} å€‹å¡ç‰‡ï¼Œå…¶ä¸­ ${holdingCards.length} å€‹æŒè‚¡å¡ç‰‡`);
            
            checkCardStyles();
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•æ‡‰ç”¨ä¸»é¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            log('é é¢è¼‰å…¥å®Œæˆ');
            applyLittlePrinceTheme();
        });
    </script>
</body>
</html>
